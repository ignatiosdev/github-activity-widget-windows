{"version":3,"file":"behaviors-xxxxxxxxxxxx.js","mappings":"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","sources":["app/assets/modules/github/behaviors/autosearch-form.ts","app/assets/modules/github/behaviors/hovercards.ts","app/assets/modules/github/behaviors/quote-selection.ts","app/assets/modules/github/alive/idle-state.ts","ui/packages/turbo/frame.ts","ui/packages/web-vitals/hydro-stats.ts","ui/packages/hotkey/observer.ts","app/assets/modules/github/behaviors/ajax-loading.ts","app/assets/modules/github/behaviors/ajax-pagination.ts","app/assets/modules/github/behaviors/console-debug.ts","app/assets/modules/github/behaviors/analytics-events.ts","app/assets/modules/github/behaviors/animated-image.ts","app/assets/modules/github/behaviors/autocheck.ts","app/assets/modules/github/behaviors/autocomplete.ts","app/assets/modules/github/behaviors/autoselect.ts","app/assets/modules/github/behaviors/autosubmit.ts","app/assets/modules/github/behaviors/avatar-reset-text.ts","app/assets/modules/github/behaviors/billing-addons.ts","app/assets/modules/github/repositories/blob-header.ts","app/assets/modules/github/behaviors/blob-csv.ts","app/assets/modules/github/behaviors/branch-protection-integration-select.ts","app/assets/modules/github/behaviors/bulk-actions.ts","app/assets/modules/github/behaviors/bundle-download-stats.ts","app/assets/modules/github/behaviors/buttons.ts","app/assets/modules/github/behaviors/check-all.ts","app/assets/modules/github/behaviors/clear-data-on-logout.ts","app/assets/modules/github/behaviors/clipboard-copy.ts","app/assets/modules/github/behaviors/commenting/ajax.ts","app/assets/modules/github/behaviors/commenting/close.ts","app/assets/modules/github/behaviors/commenting/focus.ts","app/assets/modules/github/behaviors/commenting/caret-placement.ts","app/assets/modules/github/behaviors/commenting/markdown.ts","app/assets/modules/github/behaviors/commenting/preview.ts","app/assets/modules/github/behaviors/commenting/reaction-suggestion.ts","app/assets/modules/github/behaviors/commits.ts","app/assets/modules/github/behaviors/company-name-input.ts","app/assets/modules/github/behaviors/company-owned.ts","app/assets/modules/github/behaviors/details-element.ts","app/assets/modules/github/behaviors/details-menu.ts","app/assets/modules/github/behaviors/dialog-helpers.ts","app/assets/modules/github/behaviors/disable-with.ts","app/assets/modules/github/behaviors/feature-preview-indicator.ts","app/assets/modules/github/behaviors/favicon.ts","app/assets/modules/github/behaviors/feature-preview-trigger.ts","app/assets/modules/github/upload/attachment-upload.ts","app/assets/modules/github/upload/batch-upload.ts","app/assets/modules/github/upload/batch.ts","app/assets/modules/github/behaviors/file-attachment.ts","app/assets/modules/github/filter-list.ts","app/assets/modules/github/behaviors/filter-input.ts","app/assets/modules/github/filter-sort-list.ts","app/assets/modules/github/substring-memory-filter-list.ts","app/assets/modules/github/labels-typeahead-filter-list.ts","app/assets/modules/github/behaviors/filterable.ts","app/assets/modules/github/behaviors/fixed-offset-fragment-navigation-observer.ts","app/assets/modules/github/behaviors/flash.ts","app/assets/modules/github/flash.ts","app/assets/modules/github/behaviors/flash-observer.ts","app/assets/modules/github/behaviors/focus-delay.ts","app/assets/modules/github/behaviors/form-toggle.ts","app/assets/modules/github/behaviors/fuzzy-list.ts","app/assets/modules/github/behaviors/hooks.ts","app/assets/modules/github/behaviors/gfm.ts","app/assets/modules/github/behaviors/hotkey-map.ts","app/assets/modules/github/behaviors/hydro-analytics-pageview.ts","app/assets/modules/github/behaviors/hydro-analytics-tracking.ts","app/assets/modules/github/behaviors/hydro-click-tracking.ts","app/assets/modules/github/behaviors/immediate-updates.ts","app/assets/modules/github/behaviors/indeterminate.ts","app/assets/modules/github/behaviors/keyboard-shortcuts.ts","app/assets/modules/github/behaviors/length-limited-input-with-warning.ts","app/assets/modules/github/behaviors/member-search-filter.ts","app/assets/modules/github/behaviors/notice.ts","app/assets/modules/github/behaviors/open-in-github-dev.ts","app/assets/modules/github/behaviors/permalink.ts","app/assets/modules/github/behaviors/permission-menu-form.ts","app/assets/modules/github/behaviors/turbo-timing.ts","app/assets/modules/github/behaviors/print-popup.ts","app/assets/modules/github/behaviors/poll-include-fragment.ts","app/assets/modules/github/behaviors/quick-submit.ts","app/assets/modules/github/behaviors/reactions.ts","app/assets/modules/github/behaviors/remote-form.ts","app/assets/modules/github/behaviors/removed-contents.ts","app/assets/modules/github/behaviors/replace-remote-form.ts","app/assets/modules/github/behaviors/report-long-tasks.ts","app/assets/modules/github/behaviors/saved-replies.ts","app/assets/modules/github/behaviors/scanning.ts","app/assets/modules/github/notifications/v2/notification-shelf-helpers.ts","app/assets/modules/github/behaviors/site-notifications.ts","app/assets/modules/github/behaviors/site-search.ts","app/assets/modules/github/behaviors/size-to-fit.ts","app/assets/modules/github/behaviors/smooth-scroll-anchor.ts","app/assets/modules/github/behaviors/snippet-clipboard-copy.ts","app/assets/modules/github/behaviors/social.ts","app/assets/modules/github/behaviors/socket-channel.ts","app/assets/modules/github/behaviors/stale-session.ts","app/assets/modules/github/behaviors/sso-auto-replay.ts","app/assets/modules/github/behaviors/statuses.ts","app/assets/modules/github/behaviors/sticky-is-stuck.ts","app/assets/modules/github/behaviors/sudo-required.ts","app/assets/modules/github/behaviors/suggesters/emoji-suggester.ts","app/assets/modules/github/behaviors/suggesters/issue-suggester.ts","app/assets/modules/github/behaviors/suggesters/mention-suggester.ts","app/assets/modules/github/behaviors/survey.ts","app/assets/modules/github/behaviors/sync-details-text.ts","app/assets/modules/github/behaviors/tab-container.ts","app/assets/modules/github/behaviors/team-members.ts","app/assets/modules/github/behaviors/timeline/marker.ts","app/assets/modules/github/behaviors/timeline/progressive.ts","app/assets/modules/github/behaviors/register-service-worker.ts","app/assets/modules/github/behaviors/targetable-elements.ts","app/assets/modules/github/behaviors/timeline/timeline-accessibility.ts","app/assets/modules/github/behaviors/toggler.ts","ui/packages/turbo/setup.ts","ui/packages/turbo/history.ts","ui/packages/turbo/progress-bar.ts","ui/packages/turbo/cache.ts","ui/packages/turbo/events.ts","ui/packages/turbo/soft-nav.ts","app/assets/modules/github/behaviors/tz-cookie.ts","app/assets/modules/github/timezone.ts","app/assets/modules/github/behaviors/sudo-credential-options.ts","app/assets/modules/github/behaviors/unread-comments.ts","app/assets/modules/github/behaviors/unread-item-counter.ts","app/assets/modules/github/behaviors/updatable-content-observer.ts","app/assets/modules/github/behaviors/updatable-content-stale-object.ts","app/assets/modules/github/behaviors/upload-avatar.ts","app/assets/modules/github/behaviors/user-content.ts","app/assets/modules/github/behaviors/user-status-loader.ts","app/assets/modules/github/behaviors/user-lists.ts","app/assets/modules/github/behaviors/warn-unsaved-changes.ts","app/assets/modules/github/behaviors/will-transition-once.ts","app/assets/modules/github/issues/issue-link.ts","app/assets/modules/github/issues/labels.ts","app/assets/modules/github/notifications/configure-thread-subscription-dialog.ts","app/assets/modules/github/issues/sidebar-widget.ts","app/assets/modules/github/issues/sidebar-memex-input.ts","app/assets/modules/github/issues/sidebar.ts","app/assets/modules/github/memex/search.ts","ui/packages/soft-nav/external.ts","ui/packages/web-vitals/web-vitals.ts","ui/packages/cpu-bucket/cpu-bucket.ts","ui/packages/web-vitals/timing-stats.ts","ui/packages/web-vitals/get-selector.ts","ui/packages/web-vitals/hpc-events.ts","ui/packages/web-vitals/hpc.ts","ui/packages/web-vitals/inp/interaction-count.ts","ui/packages/web-vitals/inp/interaction-list.ts","ui/packages/web-vitals/inp/metric.ts","ui/packages/web-vitals/inp/interaction-processor.ts","ui/packages/web-vitals/inp/observer.ts","ui/packages/soft-nav/setup.ts","app/assets/modules/behaviors.ts","ui/packages/web-vitals/setup.ts","ui/packages/cpu-cookie/cpu-cookie.ts","app/assets/modules/github/behaviors/batch-deferred-content/batch-loader.ts","app/assets/modules/github/behaviors/batch-deferred-content.ts","app/assets/modules/github/behaviors/characters-remaining.ts","app/assets/modules/github/behaviors/confirm.ts","app/assets/modules/github/behaviors/document-dropzone.ts","app/assets/modules/github/behaviors/encrypt.ts","app/assets/modules/github/behaviors/responsive-underlinenav.ts","app/assets/modules/github/behaviors/session-resume.ts","app/assets/modules/github/behaviors/side-navigation.ts","app/assets/modules/github/behaviors/tag-input.ts","app/assets/modules/github/behaviors/user-select-contain-polyfill.ts","app/assets/modules/github/blob-anchor.ts","app/assets/modules/github/code-editor.ts","app/assets/modules/github/fuzzy-list-element.ts","app/assets/modules/github/hydro-tracking.ts","app/assets/modules/github/notifications/v2/notification-shelf-referrer-params.ts","app/assets/modules/github/notifications/v2/update-notification-states.ts","app/assets/modules/github/range.ts","app/assets/modules/github/session-resume-helpers.ts","app/assets/modules/github/sessions/github-mobile-two-factor.ts","app/assets/modules/github/sessions/two-factor.ts","app/assets/modules/github/throttled-input.ts","ui/packages/alive-socket-channel/updatable-content-batcher.ts","ui/packages/alive-socket-channel/alive-socket-channel.ts","ui/packages/alive/alive.ts","ui/packages/alive/session.ts","ui/packages/allow-user-content-scrolling/allow-user-content-scrolling.ts","ui/packages/code-mirror/emit-to-codemirror.ts","ui/packages/document-metadata/document-metadata.ts","ui/packages/eventloop-tasks/eventloop-tasks.ts","ui/packages/favicon/favicon.ts","ui/packages/filter-sort/filter-sort.ts","ui/packages/filter-sort/filter-map.ts","ui/packages/fuzzy-filter/fuzzy-filter.ts","ui/packages/get-os/get-os.ts","ui/packages/hotkey/keyboard-shortcuts-helper.ts","ui/packages/hydro-analytics/hydro-analytics.ts","ui/packages/is-hash-navigation/is-hash-navigation.ts","ui/packages/markdown-editor/pngScanner.ts","ui/packages/markdown-editor/utils.ts","ui/packages/sudo/sudo.ts","ui/packages/text/text.ts","ui/packages/turbo/utils.ts","ui/packages/webauthn-get-element/webauthn-get-element.ts","ui/packages/webauthn-support-level/webauthn-support-level.ts"],"sourcesContent":["// Autosearch form\n//\n// Automatically replaces the contents of a container against a search field\n// in the search form.\n//\n// Note: Using `data-throttled-autosubmit` means that the form will autosubmit\n// on input with a bit of throttle so that we don't send unnessesary requests\n// to the server. See `app/assets/modules/github/behaviors/autosubmit.js`.\n//\n// Markup:\n//\n// `data-autosearch-results-container` - The ID of the container to update with results\n//\n// <form action=\"/search\" data-autosearch-results-container=\"search-results\">\n//   <input type=\"search\" placeholder=\"Find something\" data-throttled-autosubmit>\n//   <div id=\"search-results\">\n//     This content will get replaced when the input changes\n//   </div>\n// </form>\n//\nimport {announceFromElement} from '@github-ui/aria-live'\nimport {combineGetFormSearchParams} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {replaceState} from '@github-ui/browser-history-state'\n\nlet previousController: AbortController | null = null\nlet resultsTimeout: ReturnType<typeof setTimeout> | undefined\nconst NO_DELAY = 0\nconst SCREEN_READER_DELAY = 500\non('submit', '[data-autosearch-results-container]', async function (event) {\n  const form = event.currentTarget\n  if (!(form instanceof HTMLFormElement)) return\n  event.preventDefault()\n\n  previousController?.abort()\n  form.classList.add('is-sending')\n  const url = new URL(form.action, window.location.origin)\n  const method = form.method\n  const formData = new FormData(form)\n  const serialized = combineGetFormSearchParams(url, formData)\n  let body = null\n  if (method === 'get') {\n    url.search = serialized\n  } else {\n    body = formData\n  }\n  const {signal} = (previousController = new AbortController())\n  const request = new Request(url.toString(), {\n    method,\n    body,\n    signal,\n    headers: {Accept: 'text/html', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  let response: Response | null = null\n  try {\n    response = await fetch(request)\n  } catch {\n    // Ignore network errors\n  }\n  form.classList.remove('is-sending')\n  if (!response || !response.ok || signal.aborted) return\n  const id = form.getAttribute('data-autosearch-results-container')\n  const resultsContainer = id ? document.getElementById(id) : null\n  if (resultsContainer) {\n    const oldHeight = resultsContainer.style.height\n    resultsContainer.style.height = getComputedStyle(resultsContainer).height\n    resultsContainer.textContent = ''\n    if (resultsTimeout !== undefined) clearTimeout(resultsTimeout)\n    const delayResults = resultsContainer.hasAttribute('data-delay-results')\n    const results = await response.text()\n\n    // The screenreader will try to find an element with [data-autosearch-results] attributes to read.\n    // Otherwise it will fallback to the first element from the response.\n    const resultsContent =\n      parseHTML(document, results).querySelector('[data-autosearch-results]') ||\n      parseHTML(document, results).firstElementChild\n\n    resultsTimeout = setTimeout(\n      () => {\n        resultsContainer.appendChild(parseHTML(document, results))\n        announceFromElement(resultsContent as HTMLElement)\n        requestAnimationFrame(() => {\n          resultsContainer.style.height = oldHeight\n        })\n      },\n      delayResults ? SCREEN_READER_DELAY : NO_DELAY,\n    )\n  }\n  replaceState(null, '', `?${serialized}`)\n})\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport memoize from '@github/memoize'\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {focusTrap} from '@primer/behaviors'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {trackView} from '../hydro-tracking'\n\ntype Position = {\n  containerTop: number\n  containerLeft: number\n  contentClassSuffix: string\n}\nlet hovercardsEnabledForUser: boolean | undefined = undefined\nlet hovercardAnnouncementEnabledForUser: boolean | undefined = undefined\nconst isHovercardEnabledForUser = () => {\n  if (hovercardsEnabledForUser !== undefined) return hovercardsEnabledForUser\n  const hovercardsPreference = document.querySelector<HTMLMetaElement>('meta[name=hovercards-preference]')\n  if (hovercardsPreference) {\n    hovercardsEnabledForUser = hovercardsPreference.content === 'true' ? true : false\n    return hovercardsEnabledForUser\n  }\n  return true\n}\nconst isHovercardHintEnabledForUser = () => {\n  if (hovercardAnnouncementEnabledForUser !== undefined) return hovercardAnnouncementEnabledForUser\n  if (!isHovercardEnabledForUser()) return false\n  const hovercardHintPreference = document.querySelector<HTMLMetaElement>(\n    'meta[name=announcement-preference-hovercard]',\n  )\n  if (hovercardHintPreference) {\n    hovercardAnnouncementEnabledForUser = hovercardHintPreference.content === 'true' ? true : false\n    return hovercardAnnouncementEnabledForUser\n  }\n  return true\n}\nconst isHovercardAccessibilityEnabled = isFeatureEnabled('hovercard_accessibility')\nconst isHovercardAccessibilityHintEnabled = isFeatureEnabled('announcement_preference_hovercard')\nlet hovercardFocusTrapAbortController: AbortController | undefined = undefined\n\n// The card content. Moved around the page to where the current hover is\nlet cardContentContainer = document.querySelector('.js-hovercard-content')\nobserve('.js-hovercard-content', el => {\n  cardContentContainer = el\n})\n\nconst cachedFetchSafeDocumentFragment = memoize(fetchSafeDocumentFragment)\n\nlet currentTarget: Element | null | undefined\n\nlet activatingElement: Element | null = null\nlet hovercardTrigger: HTMLElement | null = null\n\nlet deactivateTimer: number | null\n\nlet focusIn = false\nlet mouseOver = false\n\n// Mouse position for when links wrap lines\nlet mouseX = 0\n\nconst caretDistanceFromTarget = 12\n\n// For calculating position of the card when it hangs to the left\n// NOTE: These need to stay in sync with certain CSS rules in order to keep the\n// caret pointing at the target.\n//\n// caret distance from edge of card\nconst caretPaddingX = 24\nconst caretMarginY = 7\nconst caretPaddingY = caretPaddingX - caretMarginY\n\nconst caretHeight = 16\n\n// The amount of extra time given to move into the content\nconst deactivateTimeout = 100\n\n// The minimum time before opening the hovercard via mouseover\nconst activateTimeout = 500\n\n// Get the content class of a given selector.\n// (Prefixes the selector with `Popover-message--`).\nfunction contentClass(suffix: string): string {\n  const contentClassPrefix = 'Popover-message--'\n  return contentClassPrefix + suffix\n}\n\n// Track a load of the hovercard in octolytics if it stays for > 500ms.\nfunction trackLoad(cardContentBody: HTMLElement) {\n  setTimeout(() => {\n    if (document.body && document.body.contains(cardContentBody)) {\n      const trackingElement = cardContentBody.querySelector('[data-hydro-view]')\n      if (trackingElement instanceof HTMLElement) {\n        trackView(trackingElement)\n      }\n    }\n  }, 500)\n}\n\nfunction hideCard() {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n  cardContentContainer.style.display = 'none'\n  cardContentContainer.removeAttribute('data-hovercard-target-url')\n  const cardContent = cardContentContainer.querySelector('.Popover-message')\n  if (cardContent instanceof HTMLElement) {\n    cardContent.textContent = ''\n  }\n  activatingElement = null\n  currentTarget = null\n  if (hovercardFocusTrapAbortController) {\n    hovercardFocusTrapAbortController.abort()\n  }\n}\n\nfunction selectRectNearestMouse(target: Element): DOMRect {\n  const rects = target.getClientRects()\n  let foundRect = rects[0] || target.getBoundingClientRect() || {top: 0, left: 0, height: 0, width: 0}\n\n  if (rects.length > 0) {\n    for (const rect of rects) {\n      if (rect.left < mouseX && rect.right > mouseX) {\n        foundRect = rect\n        break\n      }\n    }\n  }\n\n  return foundRect\n}\n\nfunction calculatePositions(target: Element): Position {\n  const {width: contentWidth, height: contentHeight} = cardContentContainer!.getBoundingClientRect()\n  const {left: targetX, top: targetY, height: targetHeight, width: targetWidth} = selectRectNearestMouse(target)\n\n  const roomBelowTarget = window.innerHeight - targetY\n\n  const roomAbove = targetY > contentHeight\n  const roomBelow = roomBelowTarget > contentHeight\n  const moreRoomAbove = targetY >= roomBelowTarget\n\n  const hangLeft = target.classList.contains('js-hovercard-left')\n\n  if (hangLeft) {\n    // If there is room, show hovercard above hover position. Else, show it below\n    const left = targetX - contentWidth - caretDistanceFromTarget\n    const targetCenterY = targetY + targetHeight / 2\n\n    let top\n\n    // If there is no room above or below, show the hovercard on the top or bottom (whichever has the most room)\n    if (!roomAbove && !roomBelow) {\n      if (moreRoomAbove) {\n        top = targetCenterY - contentHeight + caretPaddingY + caretHeight / 2\n      } else {\n        top = targetCenterY - caretPaddingY - caretHeight / 2\n      }\n    } else {\n      top = roomAbove\n        ? targetCenterY - contentHeight + caretPaddingY + caretHeight / 2\n        : targetCenterY - caretPaddingY - caretHeight / 2\n    }\n\n    return {\n      containerTop: top,\n      containerLeft: left,\n      contentClassSuffix: roomAbove ? 'right-bottom' : 'right-top',\n    }\n  } else {\n    const roomRight = window.innerWidth - targetX > contentWidth\n    const targetCenterX = targetX + targetWidth / 2\n    const left = roomRight ? targetCenterX - caretPaddingX : targetCenterX - contentWidth + caretPaddingX\n\n    let top\n\n    // If there is no room above, below, or to the right, show the hovercard on the top or bottom (whichever has the most room)\n    if (!roomAbove && !roomBelow && !roomRight) {\n      if (moreRoomAbove) {\n        top = targetY - contentHeight - caretDistanceFromTarget\n      } else {\n        top = targetY + targetHeight + caretDistanceFromTarget\n      }\n    } else {\n      top = roomAbove\n        ? targetY - contentHeight - caretDistanceFromTarget\n        : targetY + targetHeight + caretDistanceFromTarget\n    }\n\n    const contentClassSuffix = roomAbove\n      ? roomRight\n        ? 'bottom-left'\n        : 'bottom-right'\n      : roomRight\n        ? 'top-left'\n        : 'top-right'\n    return {containerTop: top, containerLeft: left, contentClassSuffix}\n  }\n}\n\nfunction positionCard(target: Element, cardContent: Element) {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n\n  // Hide container, reset popover styles\n  cardContentContainer.style.visibility = 'hidden'\n  cardContentContainer.style.display = 'block'\n  cardContent.classList.remove(\n    contentClass('bottom-left'),\n    contentClass('bottom-right'),\n    contentClass('right-top'),\n    contentClass('right-bottom'),\n    contentClass('top-left'),\n    contentClass('top-right'),\n  )\n\n  const {containerTop, containerLeft, contentClassSuffix} = calculatePositions(target)\n\n  // Add the class for correct caret location\n  cardContent.classList.add(contentClass(contentClassSuffix))\n\n  // Position the popover & inner message correctly\n  if (isHovercardAccessibilityEnabled) {\n    cardContentContainer.style.setProperty('top', `${containerTop + window.pageYOffset}px`, 'important')\n    cardContentContainer.style.setProperty('bottom', 'auto', 'important')\n  } else {\n    cardContentContainer.style.top = `${containerTop + window.pageYOffset}px`\n  }\n  cardContentContainer.style.left = `${containerLeft + window.pageXOffset}px`\n\n  // Set z-index override\n  setZIndexOverride(target, cardContentContainer)\n\n  // After positioning correctly, show the popover again\n  cardContentContainer.style.visibility = ''\n}\n\nfunction showCard(fragment: DocumentFragment, target: Element): AbortController | undefined {\n  if (!(cardContentContainer instanceof HTMLElement)) return\n  const cardContent = cardContentContainer.querySelector('.Popover-message')\n  if (!(cardContent instanceof HTMLElement)) return\n\n  cardContent.textContent = ''\n\n  const cardContentBody = document.createElement('div')\n  for (const child of fragment.children) {\n    cardContentBody.appendChild(child.cloneNode(true))\n  }\n\n  cardContent.appendChild(cardContentBody)\n\n  positionCard(target, cardContent)\n  trackLoad(cardContentBody)\n  if (!isHovercardAccessibilityEnabled) {\n    announceFromElement(cardContentBody)\n  }\n\n  cardContentContainer.style.display = 'block'\n  cardContentContainer.setAttribute('data-hovercard-target-url', target.getAttribute('data-hovercard-url') || '')\n  cardContentContainer.setAttribute('aria-label', hovercardAriaLabelForType(target))\n  cardContentContainer.setAttribute('role', 'region')\n  if (mouseOver || !isHovercardAccessibilityEnabled) return undefined\n  return focusTrap(cardContentContainer)\n}\n\nfunction determineEnclosingSubject(target: Element): string | null {\n  const tag = target.closest('[data-hovercard-subject-tag]')\n  if (tag) return tag.getAttribute('data-hovercard-subject-tag')\n  // Fall back to page context\n  const meta = document.head && document.head.querySelector('meta[name=\"hovercard-subject-tag\"]')\n  if (meta) return meta.getAttribute('content')\n  return null\n}\n\nfunction hovercardUrlFromTarget(target: Element): string {\n  const baseHovercardUrl = target.getAttribute('data-hovercard-url')\n\n  if (baseHovercardUrl) {\n    const subjectTag = determineEnclosingSubject(target)\n    if (subjectTag) {\n      const url = new URL(baseHovercardUrl, window.location.origin)\n      const params = new URLSearchParams(url.search.slice(1))\n      params.append('subject', subjectTag)\n      params.append('current_path', window.location.pathname + window.location.search)\n      url.search = params.toString()\n      return url.toString()\n    }\n\n    return baseHovercardUrl\n  }\n\n  return ''\n}\n\nfunction hovercardAriaLabelForType(target: Element): string {\n  const hovercardType = target.getAttribute('data-hovercard-type')\n  if (!hovercardType) return 'Hovercard'\n  let hovercardPrefix\n  switch (hovercardType) {\n    case 'copilot':\n      hovercardPrefix = 'Copilot'\n      break\n    case 'user':\n      hovercardPrefix = 'User'\n      break\n    case 'organization':\n      hovercardPrefix = 'Organization'\n      break\n    case 'pull_request':\n      // eslint-disable-next-line i18n-text/no-en\n      hovercardPrefix = 'Pull Request'\n      break\n    case 'issue':\n      hovercardPrefix = 'Issue'\n      break\n    case 'team':\n      hovercardPrefix = 'Team'\n      break\n    case 'repository':\n      hovercardPrefix = 'Repository'\n      break\n    case 'commit':\n      hovercardPrefix = 'Commit'\n      break\n    case 'project':\n      hovercardPrefix = 'Project'\n      break\n    case 'discussion':\n      hovercardPrefix = 'Discussion'\n      break\n    case 'sponsors_listing':\n      hovercardPrefix = 'Sponsors'\n      break\n    case 'acv_badge':\n      // Weird to have two nouns in an `aria-label` so we'll just use \"badge\" for this case\n      // eslint-disable-next-line i18n-text/no-en\n      return 'Arctic Code Vault Badge'\n  }\n  return hovercardPrefix ? `${hovercardPrefix} Hovercard` : 'Hovercard'\n}\n\n// Determine if a hovercard is enabled for this type of element.\n//\n// Return boolean will be `true` if this link element has hovercard\n// attributes and the link's particular kind of hovercard is enabled for the\n// viewer and that part of the page.\nfunction hovercardsAreEnabledForType(target: Element): boolean {\n  const hovercardType = target.getAttribute('data-hovercard-type')\n\n  if (hovercardType === 'pull_request' || hovercardType === 'issue') {\n    return !!target.closest('[data-issue-and-pr-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'team') {\n    return !!target.closest('[data-team-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'repository') {\n    return !!target.closest('[data-repository-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'commit') {\n    return !!target.closest('[data-commit-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'project') {\n    return !!target.closest('[data-project-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'discussion') {\n    return !!target.closest('[data-discussion-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'acv_badge') {\n    return !!target.closest('[data-acv-badge-hovercards-enabled]')\n  }\n\n  if (hovercardType === 'sponsors_listing') {\n    return !!target.closest('[data-sponsors-listing-hovercards-enabled]')\n  }\n\n  // User and organization hovercards are enabled everywhere\n  return true\n}\n\n// When mousing over a hovercard target, load the data and show the card.\nasync function activateFn(event: Event, minimumTimeout?: number): Promise<void> {\n  // Don't show hovercards on touch devices. Prevents mobile Safari users\n  // from needing to double tap links with hovercards.\n  // https://humanwhocodes.com/blog/2012/07/05/ios-has-a-hover-problem/\n  const touchDevice = 'ontouchstart' in document\n  if (touchDevice) return\n\n  const target = event.currentTarget\n\n  if (event instanceof MouseEvent) {\n    mouseX = event.clientX\n  }\n\n  if (!(target instanceof Element)) return\n  if (currentTarget === target) return\n  if (target.closest('.js-hovercard-content')) return\n\n  // Don't actually show issue or PR hovercards unless the link has an ancestor\n  // element with data-issue-and-pr-hovercards-enabled\n  if (!hovercardsAreEnabledForType(target)) return\n\n  hideCard()\n\n  // Set the current target as the one we're currently hovering on\n  currentTarget = target\n  activatingElement = document.activeElement\n\n  const hovercardUrl = hovercardUrlFromTarget(target)\n\n  let fragment: DocumentFragment | null | undefined\n  try {\n    const forcedDelay = new Promise(r => window.setTimeout(r, minimumTimeout, 0))\n    await forcedDelay\n\n    // for some reason, currentTarget gets set to null when\n    // we call the setTimeout and we are focused on the button\n    if (!currentTarget && event.type === 'focusin') {\n      currentTarget = event.target as Element\n    }\n    if (target === currentTarget) {\n      fragment = await cachedFetchSafeDocumentFragment(document, hovercardUrl)\n    }\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const response: Response = err.response\n    if (response && response.status === 404) {\n      // eslint-disable-next-line i18n-text/no-en\n      const notAvailableMessage = 'Hovercard is unavailable'\n      target.setAttribute('aria-label', notAvailableMessage)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    } else if (response && response.status === 410) {\n      const data: {[key: string]: string} = await response.clone().json()\n      target.setAttribute('aria-label', data.message!)\n      target.classList.add('tooltipped', 'tooltipped-ne')\n    }\n    return\n  }\n\n  // Ensure that the target is still the active one\n  if (target === currentTarget && fragment) {\n    hovercardFocusTrapAbortController = showCard(fragment, target)\n  }\n}\n\n// Load the data but don't show until at least `activateTimeout` Only used when\n// loading via mouseover.\nfunction activateWithTimeoutFn(event: Event) {\n  activateFn(event, activateTimeout)\n}\n\n// When leaving a hovercard, deactivate unless we're moving to another child.\n// This allows the user to hover into the content area without dismissing.\nfunction deactivateFn(event: Event) {\n  if (!currentTarget) return\n  if (event instanceof MouseEvent && event.relatedTarget instanceof HTMLElement) {\n    const relatedTarget = event.relatedTarget\n    if (relatedTarget.closest('.js-hovercard-content') || relatedTarget.closest('[data-hovercard-url]')) {\n      return\n    }\n  } else if (event instanceof KeyboardEvent && activatingElement instanceof HTMLElement) {\n    // Return focus to where it was before the card was opened\n    activatingElement.focus()\n  }\n  hideCard()\n}\n\n// Deactivate after 250 ms unless the deactivate timer is canceled as a result\n// of the user entering the hovercard content area.\nfunction deactivateWithTimeoutFn(event: Event) {\n  const targetWas = currentTarget\n\n  deactivateTimer = window.setTimeout(() => {\n    if (currentTarget === targetWas) {\n      deactivateFn(event)\n    }\n  }, deactivateTimeout)\n}\n\nfunction preventScrolling(event: Event) {\n  // This is specifically to prevent default browser behavior, not changing keyboard shortcuts.\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!(event instanceof KeyboardEvent)) return\n  if (event.altKey && event.key === 'ArrowUp') {\n    // Don't scroll while moving focus (this occurs on non-Firefox browsers)\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n// Triggered when a link which has a hovercard is focused.\nfunction keyupFn(event: Event) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!(event instanceof KeyboardEvent)) return\n  switch (event.key) {\n    case 'ArrowUp':\n      if (isHovercardAccessibilityEnabled && event.altKey) {\n        hovercardTrigger = document.activeElement as HTMLElement\n        activateFn(event, 0)\n      }\n      break\n    case 'Escape':\n      deactivateFn(event)\n      break\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n\n// Cancel the deactivation timer since the user is inside the content now\nfunction cancelDeactivation() {\n  if (deactivateTimer) clearTimeout(deactivateTimer)\n}\n\nif (cardContentContainer && isHovercardEnabledForUser()) {\n  // show if focused or moused over, only hide when both are false.\n  observe('[data-hovercard-url]', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onMouseOver),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(el, 'keyup', keyupFn),\n        fromEvent(el, 'keydown', preventScrolling),\n      ),\n  })\n\n  if (isHovercardAccessibilityEnabled && isHovercardAccessibilityHintEnabled && isHovercardHintEnabledForUser()) {\n    observe('[data-hovercard-url]', {\n      add(el) {\n        el.setAttribute('aria-keyshortcuts', 'Alt+ArrowUp')\n      },\n    })\n  }\n\n  observe('[data-hovercard-url]', {\n    remove(el) {\n      // Hide the card if we're removing the element that triggered it\n      if (currentTarget === el) hideCard()\n    },\n  })\n\n  if (!isHovercardAccessibilityEnabled) {\n    observe('[data-hovercard-url]', {\n      subscribe: el => compose(fromEvent(el, 'focusin', onFocusIn), fromEvent(el, 'focusout', onFocusOut)),\n    })\n  }\n\n  observe('.js-hovercard-content', {\n    subscribe: el =>\n      compose(\n        fromEvent(el, 'mouseover', onContentsMouseOver),\n        fromEvent(el, 'focusin', onContentsFocusIn),\n        fromEvent(el, 'mouseleave', onMouseLeave),\n        fromEvent(\n          el,\n          isHovercardAccessibilityEnabled ? 'keydown' : 'keyup',\n          isHovercardAccessibilityEnabled ? onContentsKeyDown : keyupFn,\n        ),\n      ),\n  })\n\n  if (!isHovercardAccessibilityEnabled) {\n    observe('.js-hovercard-content', {\n      subscribe: el => compose(fromEvent(el, 'focusout', onFocusOut)),\n    })\n  }\n\n  // eslint-disable-next-line delegated-events/global-on\n  on('menu:activated', 'details', hideCard)\n\n  // hide the card when a turbo completes a new visit\n  window.addEventListener('turbo:load', hideCard)\n\n  window.addEventListener('statechange', hideCard)\n\n  // FF bug where the target can get focus, then be removed from the DOM\n  // and this doesn't trigger a focusOut event. In this case, focus moved to the window\n  // so we can handle it here.\n  if (!isHovercardAccessibilityEnabled) {\n    window.addEventListener('focusin', onFocusOut)\n  }\n}\n\n/**\n * Refocus the hovercard trigger when the user keyboard-escapes out of the content.\n */\nfunction onContentsKeyDown(event: Event) {\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event instanceof KeyboardEvent) {\n    if (event.key === 'Escape') {\n      deactivateFn(event)\n      hovercardTrigger?.focus()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n\nfunction onFocusIn(event: Event) {\n  focusIn = true\n  activateFn(event, 0)\n}\n\nfunction onFocusOut(event: Event) {\n  focusIn = false\n  if (!mouseOver) {\n    deactivateFn(event)\n  }\n}\n\nfunction onMouseLeave(event: Event) {\n  mouseOver = false\n  if (isHovercardAccessibilityEnabled || !focusIn) {\n    deactivateWithTimeoutFn(event)\n  }\n}\n\nfunction onMouseOver(event: Event) {\n  mouseOver = true\n  activateWithTimeoutFn(event)\n}\n\nfunction onContentsMouseOver() {\n  mouseOver = true\n  cancelDeactivation()\n}\n\nfunction onContentsFocusIn() {\n  focusIn = true\n  cancelDeactivation()\n}\n\nfunction setZIndexOverride(target: Element, container: HTMLElement) {\n  const zIndex = target.getAttribute('data-hovercard-z-index-override')\n  if (zIndex) {\n    container.style.zIndex = zIndex\n  } else {\n    // Reset to initial z-index from Popover\n    container.style.zIndex = '100'\n  }\n}\n","import {MarkdownQuote, Quote} from '@github/quote-selection'\nimport {debounce} from '@github/mini-throttle'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport visible from '@github-ui/visible'\n\nlet activeSelection: SelectionContext | null\n\n// Hide the \"Quote reply\" button on threads where there is no textarea to quote\n// text into. This prevents it from showing up on locked threads.\nobserve('.js-comment-quote-reply', function (button) {\n  ;(button as HTMLElement).hidden =\n    button\n      .closest('.js-quote-selection-container')\n      ?.querySelector(\n        '.js-inline-comment-form-container textarea, .js-new-comment-form textarea, .js-discussions-previewable-comment-form',\n      ) == null\n})\n\nfunction isHighlightContainer(el: Element): boolean {\n  return el.nodeName === 'DIV' && el.classList.contains('highlight')\n}\n\nfunction hasContent(node: Node): boolean {\n  return node.nodeName === 'IMG' || node.firstChild != null\n}\n\nconst filters: {[key: string]: (arg0: HTMLElement) => string | HTMLElement} = {\n  PRE(el) {\n    const parent = el.parentElement\n    if (parent && isHighlightContainer(parent)) {\n      const match = parent.className.match(/highlight-source-(\\S+)/)\n      const flavor = match ? match[1] : ''\n      const text = (el.textContent || '').replace(/\\n+$/, '')\n      el.textContent = `\\`\\`\\`${flavor}\\n${text}\\n\\`\\`\\``\n      el.append('\\n\\n')\n    }\n    return el\n  },\n  A(el) {\n    const text = el.textContent || ''\n    if (el.classList.contains('user-mention') || el.classList.contains('team-mention')) {\n      return text\n    } else if (el.classList.contains('issue-link') && /^#\\d+$/.test(text)) {\n      return text\n    } else {\n      return el\n    }\n  },\n  IMG(el) {\n    const alt = el.getAttribute('alt')\n    if (alt && el.classList.contains('emoji')) {\n      return alt\n    } else {\n      return el\n    }\n  },\n  DIV(el) {\n    if (el.classList.contains('js-suggested-changes-blob')) {\n      // skip quoting suggested changes widget\n      el.remove()\n    } else if (el.classList.contains('blob-wrapper-embedded')) {\n      // handle embedded blob snippets\n      const container = el.parentElement!\n      const link = container.querySelector<HTMLAnchorElement>('a[href]')!\n      const p = document.createElement('p')\n      p.textContent = link.href\n      container.replaceWith(p)\n    } else if (el.classList.contains('js-render-enrichment-target')) {\n      // handle embedded special rendering like mermaid charts\n      const container = el.closest('.js-render-needs-enrichment')!\n      const blockType = container.getAttribute('data-type')\n      const blockContent = el.getAttribute('data-plain')!\n\n      // set the codeblock markdown representation as the content of a pre block so that newlines\n      // are correctly interpreted. Then replace the current element with the pre-wrapped codeblock\n      const pre = document.createElement('pre')\n      pre.textContent = `\\`\\`\\`${blockType}\\n${blockContent}\\`\\`\\``\n      return pre\n    }\n    return el\n  },\n}\n\nfunction insertMarkdownSyntax(root: DocumentFragment): void {\n  const nodeIterator = document.createNodeIterator(root, NodeFilter.SHOW_ELEMENT, {\n    acceptNode(node) {\n      if (node.nodeName in filters && hasContent(node)) {\n        return NodeFilter.FILTER_ACCEPT\n      } else {\n        return NodeFilter.FILTER_SKIP\n      }\n    },\n  })\n  const results: HTMLElement[] = []\n  let node = nodeIterator.nextNode()\n\n  while (node) {\n    if (node instanceof HTMLElement) {\n      results.push(node)\n    }\n    node = nodeIterator.nextNode()\n  }\n\n  // process deepest matches first\n  results.reverse()\n\n  for (const el of results) {\n    el.replaceWith(filters[el.nodeName]!(el))\n  }\n}\n\non('click', '.js-comment-quote-reply', function ({isTrusted, currentTarget}) {\n  let target = currentTarget as Element\n  let quote = new Quote()\n\n  if (!isTrusted) {\n    // User pressed `r`\n    if (quote.range.collapsed) {\n      // Nothing is selected\n      return\n    }\n    if (quote.range.startContainer.parentElement === null) {\n      // No reasonable place to insert the quote\n      return\n    }\n    target = quote.range.startContainer.parentElement\n  }\n\n  const container = target.closest<HTMLElement>('.js-comment')!\n  const commentBody = container.querySelector<HTMLElement>('.js-comment-body')!\n  const commentBodyClone = container.querySelector<HTMLElement>('.js-comment-body')!.cloneNode(true)\n  const quoteSelectionContainer = container.closest('.js-quote-selection-container')!\n\n  // Remove elements that contain meta info and should not be present in the quoted text\n  const ignorableElements = commentBody.querySelectorAll('button.js-convert-to-issue-button, span.js-clear')\n  for (const el of ignorableElements) {\n    el.remove()\n  }\n\n  if (quoteSelectionContainer.hasAttribute('data-quote-markdown')) {\n    quote = new MarkdownQuote(\n      quoteSelectionContainer.getAttribute('data-quote-markdown') || '',\n      (fragment: DocumentFragment) => {\n        const parent = quote.range.startContainer.parentElement\n        const codeBlock = parent && parent.closest('pre')\n        if (codeBlock instanceof HTMLElement) {\n          const pp = codeBlock.parentElement\n          if (pp && isHighlightContainer(pp)) {\n            const div = document.createElement('div')\n            div.className = pp.className\n            div.appendChild(fragment)\n            fragment.appendChild(div)\n          }\n        }\n        insertMarkdownSyntax(fragment)\n      },\n    )\n  }\n\n  // If the user has selected text before clicking the dropdown, use that as the quote.\n  // (Workaround for Safari clearing the selection just before <details> is opened).\n  if (\n    activeSelection &&\n    commentBody.contains(activeSelection.anchorNode) &&\n    !activeSelection.range.collapsed &&\n    activeSelection.range.toString().trim() !== '' // remove whitespace only selections\n  ) {\n    quote.range = activeSelection.range\n  } else if (quote.range.collapsed || quote.range.toString().trim() === '') {\n    quote.select(commentBody)\n  }\n\n  if (quote.closest('.js-quote-selection-container') !== quoteSelectionContainer) return\n\n  // Capture the current range incase elements switch focus\n  const range = quote.range\n\n  quoteSelectionContainer.dispatchEvent(\n    new CustomEvent('quote-selection', {\n      bubbles: true,\n      detail: quote,\n    }),\n  )\n\n  // Replace the range for elements that changed focus\n  quote.range = range\n\n  for (const textarea of Array.from(quoteSelectionContainer.querySelectorAll('textarea')).reverse()) {\n    if (visible(textarea) && !textarea.closest('tracking-block')) {\n      quote.insert(textarea)\n      break\n    }\n  }\n\n  // Restore the HTML to it's initial form. The ignorable elements had to be removed\n  // So that the quote lib would not include then into the selection\n  container.querySelector<HTMLElement>('.js-comment-body')!.replaceWith(commentBodyClone)\n})\n\ntype SelectionContext = {\n  anchorNode: Node | null\n  range: Range\n}\n\n// Workaround for Safari clearing the selection just before a <details> element\n// was activated: persist the previous selection and use its range when quoting.\nlet previousSelection: SelectionContext | null\n\ndocument.addEventListener(\n  'selectionchange',\n  debounce(function () {\n    const selection = window.getSelection()!\n    let range\n    try {\n      range = selection.getRangeAt(0)\n    } catch {\n      previousSelection = null\n      return\n    }\n    previousSelection = {\n      anchorNode: selection.anchorNode,\n      range,\n    }\n  }, 100),\n)\ndocument.addEventListener(\n  'toggle',\n  () => {\n    activeSelection = previousSelection\n  },\n  {capture: true},\n)\n","import {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {Subscription} from '@github-ui/subscription'\n\ntype IdleListener = (isIdle: boolean) => unknown\n\nconst idleListeners: IdleListener[] = []\nconst DEBOUNCE_UNTIL_IDLE = 30000\nconst DEBOUNCE_UNTIL_ACTIVE = 0 // If active, we want to send immediately\nlet idle = ssrSafeDocument?.hidden || false // if the page is hidden on load, consider it idle immediately\nlet visibilityDebounceTimeout: ReturnType<typeof setTimeout> | undefined\n\nexport function addIdleStateListener(listener: IdleListener) {\n  listener(idle)\n  idleListeners.push(listener)\n\n  return new Subscription(() => {\n    const index = idleListeners.indexOf(listener)\n    if (index !== -1) {\n      idleListeners.splice(index, 1)\n    }\n  })\n}\n\n;(() => {\n  // listen for visibility change events, which trigger the wait period for idle changes\n  ssrSafeDocument?.addEventListener('visibilitychange', () => {\n    const pageIsHidden = ssrSafeDocument?.hidden || false\n\n    if (visibilityDebounceTimeout !== undefined) {\n      // we were waiting to send an idle change, cancel the previous timeout and queue a new one\n      clearTimeout(visibilityDebounceTimeout)\n    }\n\n    // When page visibility changes, wait a little bit before marking as idle in case visibility comes back\n    const debouncePeriod = pageIsHidden ? DEBOUNCE_UNTIL_IDLE : DEBOUNCE_UNTIL_ACTIVE\n\n    visibilityDebounceTimeout = setTimeout(() => {\n      if (pageIsHidden === idle) {\n        // idle hasn't changed, don't call any listeners\n        return\n      }\n\n      idle = pageIsHidden\n      visibilityDebounceTimeout = undefined\n\n      // send current idle state to all listeners\n      for (const idleListener of idleListeners) {\n        idleListener(idle)\n      }\n    }, debouncePeriod)\n  })\n})()\n","import type {TurboFrameClickEvent} from '@github/turbo'\nimport {getCachedNode, setCachedNode} from './cache'\nimport {\n  addNewScripts,\n  addNewStylesheets,\n  getTurboCacheNodes,\n  getChangedTrackedKeys,\n  replaceElements,\n  waitForStylesheets,\n  dispatchTurboReload,\n  isTurboFrame,\n  isSameRepo,\n  isSameProfile,\n  dispatchTurboRestored,\n} from './utils'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {setTitle} from '@github-ui/document-metadata'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {startSoftNav, updateFrame} from '@github-ui/soft-nav/state'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\ninterface FetchResponse {\n  response: Response\n  responseHTML: Promise<string>\n  location: Location\n}\n\nlet frameNavigation = false\nlet fetchResponse: FetchResponse | null\n\nconst navigatingBetweenDifferentEntities = (event: TurboFrameClickEvent) => {\n  if (!(event.target instanceof HTMLElement)) return\n\n  const frameContainer = event.target.closest('[data-turbo-frame]')\n  const repoContainer = event.target.closest('#js-repo-pjax-container')\n  const url = new URL(event.detail.url, window.location.origin)\n  const userProfileContainer = event.target.closest('#user-profile-frame')\n\n  return (\n    // Don't frame navigate if going to a different repo, since the frame will not\n    // load the new repo's header.\n    (repoContainer && frameContainer && !isSameRepo(url.pathname, location.pathname)) ||\n    // Don't frame navigate if going to a different user profile, since the frame\n    // will not load the new user's side panel information.\n    (userProfileContainer && !isSameProfile(url.pathname, location.pathname))\n  )\n}\n\nssrSafeDocument?.addEventListener('turbo:frame-click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    return\n  }\n\n  if (navigatingBetweenDifferentEntities(event)) {\n    dispatchTurboReload('repo_mismatch')\n    event.target.removeAttribute('data-turbo-frame')\n    event.preventDefault()\n  }\n\n  // Here is where Turbo frame navigation starts.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo.frame')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', event => {\n  fetchResponse = (event as CustomEvent).detail.fetchResponse\n  if (isTurboFrame(event.target)) setCachedNode(window.location.href, getTurboCacheNodes(document))\n})\n\n// Before rendering the new page (frame), we need to make sure the body is ready with\n// all the classes necessary. We do that by replacing the current body's classes with\n// classes that come from the `turbo-body-classes` meta tag.\n// We also are ready to add new scripts and stylesheets to the head, since that won't be\n// modified by the frame render.\n// We don't update the title here because it will be overridden by the frame.\n// We also don't update transients because it will mess with the B/F cache.\nssrSafeDocument?.addEventListener('turbo:before-frame-render', async event => {\n  // preventDefault MUST be the first thing in this event, otherwise rendering will NOT be paused.\n  event.preventDefault()\n\n  const {resume, newFrame} = (event as CustomEvent).detail\n\n  frameNavigation = true\n\n  if (!fetchResponse) return\n\n  const responseHTML = await fetchResponse.responseHTML\n  const responseLocation = fetchResponse.location\n\n  const parsedHTML = new DOMParser().parseFromString(responseHTML, 'text/html')\n  fetchResponse = null\n\n  const sourceFrame = event.target as HTMLElement\n  const targetFrames = parsedHTML.querySelectorAll<HTMLElement>('turbo-frame')\n  const matchingFrame = [...targetFrames].find(frame => frame.id === sourceFrame?.id)\n  const changedKeys = getChangedTrackedKeys(parsedHTML)\n\n  // if the frames or tracked elements don't match, force a reload to the destination page otherwise\n  // the user will get an empty page or a page with the wrong assets.\n  if (!matchingFrame || changedKeys.length > 0) {\n    dispatchTurboReload(`tracked_element_mismatch-${changedKeys.join('-')}`)\n    window.location = responseLocation\n    return\n  }\n\n  setCachedNode(responseLocation.href, getTurboCacheNodes(parsedHTML))\n\n  addNewStylesheets(parsedHTML)\n  addNewScripts(parsedHTML)\n  replaceElements(parsedHTML)\n  replaceFrameClasses(sourceFrame, matchingFrame)\n\n  // We have to treat stylesheets as a blocking resource, so we wait for them to be loaded before continuing\n  // the frame render.\n  await waitForStylesheets()\n\n  resume()\n\n  if (shouldScrollToTop(newFrame)) {\n    window.scrollTo(0, 0)\n  }\n\n  replaceTransientTags()\n  // If we replace classes too early there may be some jitter when navigating to/from full-width pages.\n  replaceBodyClassesFromRequest(parsedHTML)\n})\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  // When going back/forward, we need to restore elements that were replaced by us outside of the frame.\n  // popstate runs before turbo actually restores the page, so we have to wait for the next load to guarantee\n  // that our restoration is done after turbo's.\n  document.addEventListener(\n    'turbo:load',\n    () => {\n      const elements = getCachedNode()?.replacedElements || []\n\n      replaceElements(document, elements)\n      dispatchTurboRestored()\n    },\n    {once: true},\n  )\n})\n\n// At this point, Turbo finished updating things from its snapshot, so we can manually\n// updates whatever is necessary from the navigation.\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n  // This is a safeguard for back/forwards navigation. If the user clicks those buttons.\n  // Turbo will NOT trigger `turbo:before-fetch-response`, which would make the `body` stale.\n  // Since we are restoring a page from the cache, `turboPageNodes` will be populated, so it\n  // will know what are the `body` classes to restore.\n  replaceBodyClassesFromCachedNodes()\n\n  if (!frameNavigation) return\n\n  frameNavigation = false\n  replaceTitle()\n  replaceTransientTags()\n  updateFrame()\n})\n\nconst replaceBodyClassesFromRequest = (html: Document) => {\n  const classes = html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceBodyClassesFromCachedNodes = () => {\n  // If the navigation is a full-page reload, `turboPageNodes` will be reset\n  // and this will be a noop.\n  const classes = getCachedNode()?.bodyClasses\n\n  if (!classes) return\n\n  document.body.setAttribute('class', classes)\n  document.querySelector('[data-turbo-body]')?.setAttribute('class', classes)\n}\n\nconst replaceTitle = () => {\n  const title = getCachedNode()?.title\n\n  if (title) {\n    setTitle(title)\n  }\n}\n\n// Replace all `data-turbo-transient` elements\nconst replaceTransientTags = () => {\n  const cached = getCachedNode()?.transients\n  if (!cached) return\n\n  for (const el of document.querySelectorAll('head [data-turbo-transient]')) {\n    el.remove()\n  }\n\n  for (const el of cached) {\n    // title, scripts and stylesheets have their own logic to be added\n    // so here we'll only deal with the rest of the transient elements\n    // This is just a safeguard in case someone adds `data-turbo-transient`\n    // to one of those elements.\n    if (!el.matches('title, script, link[rel=stylesheet]')) {\n      el.setAttribute('data-turbo-transient', '')\n      document.head.append(el)\n    }\n  }\n}\n\nconst replaceFrameClasses = (oldFrame: HTMLElement | undefined, newFrame: HTMLElement) => {\n  if (!oldFrame) return\n\n  oldFrame.className = newFrame.className\n}\n\nconst shouldScrollToTop = (frame: HTMLElement) =>\n  frame.getAttribute('data-turbo-skip-scroll') !== 'true' && frame.getAttribute('data-turbo-action') === 'advance'\n","import {sendEvent, stringifyObjectValues} from '@github-ui/hydro-analytics'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {loaded} from '@github-ui/document-ready'\nimport type {WebVitalMetric, MetricOrHPC} from './web-vitals'\nimport type {HPCTimingEvent} from './hpc-events'\nimport {getCPUBucket} from '@github-ui/cpu-bucket'\n\ninterface WebVitalInformation {\n  name: string\n  value: number\n  element?: string\n}\n\ninterface HPCInformation extends WebVitalInformation {\n  mechanism: HPCTimingEvent['mechanism']\n  soft: boolean\n}\n\ninterface HydroStat {\n  react?: boolean\n  reactApp?: string | null\n  reactPartials?: string[]\n  ssr?: boolean\n  hpc?: HPCInformation\n  ttfb?: WebVitalInformation\n  fcp?: WebVitalInformation\n  lcp?: WebVitalInformation\n  fid?: WebVitalInformation\n  inp?: WebVitalInformation\n  cls?: WebVitalInformation\n  controller?: string\n  action?: string\n  routePattern?: string\n  cpu?: string\n}\n\nlet queued: HydroStat | undefined\n\n/**\n * Batched report of vital to hydro\n */\nexport function sendStatToHydro(metric: MetricOrHPC, ssr: boolean) {\n  let hydroStat: HydroStat | undefined\n\n  if (isFeatureEnabled('report_hydro_web_vitals')) return\n\n  if (metric.value < 60_000) {\n    if (!hydroStat) {\n      const reactApp = document.querySelector('react-app')\n      hydroStat = queueStat()\n      hydroStat.react = !!reactApp\n      hydroStat.reactApp = reactApp?.getAttribute('app-name')\n      // Convert to Set and back to Array to remove duplicates.\n      hydroStat.reactPartials = [\n        ...new Set(\n          Array.from(document.querySelectorAll('react-partial')).map(\n            partial => partial.getAttribute('partial-name') || '',\n          ),\n        ),\n      ]\n      hydroStat.ssr = ssr\n      hydroStat.controller = document.querySelector<HTMLMetaElement>('meta[name=\"route-controller\"]')?.content\n      hydroStat.action = document.querySelector<HTMLMetaElement>('meta[name=\"route-action\"]')?.content\n      hydroStat.routePattern = document.querySelector<HTMLMetaElement>('meta[name=\"route-pattern\"]')?.content\n      hydroStat.cpu = getCPUBucket()\n    }\n\n    if (metric.name === 'HPC') {\n      hydroStat[metric.name.toLocaleLowerCase() as Lowercase<typeof metric.name>] = buildHPCInformation(metric)\n    } else {\n      hydroStat[metric.name.toLocaleLowerCase() as Lowercase<typeof metric.name>] = buildWebVitalInformation(metric)\n    }\n  }\n}\n\nfunction buildHPCInformation(metric: HPCTimingEvent): HPCInformation {\n  return {\n    name: metric.name,\n    value: metric.value,\n    element: metric.attribution?.element,\n    soft: !!metric.soft,\n    mechanism: metric.mechanism,\n  }\n}\n\nfunction buildWebVitalInformation(metric: WebVitalMetric): WebVitalInformation {\n  const vitalInformation: WebVitalInformation = {\n    name: metric.name,\n    value: metric.value,\n  }\n\n  switch (metric.name) {\n    case 'LCP':\n      vitalInformation.element = metric.attribution?.element\n      break\n    case 'FID':\n    case 'INP':\n      vitalInformation.element = metric.attribution?.eventTarget\n      break\n    case 'CLS':\n      vitalInformation.element = metric.attribution?.largestShiftTarget\n      break\n  }\n\n  return vitalInformation\n}\n\n/**\n * Create a new stat object and schedule it to be sent to hydro\n */\nfunction queueStat(): HydroStat {\n  if (!queued) {\n    queued = {}\n    scheduleSend()\n  }\n  return queued\n}\n\n/**\n * Schedule a send to hydro\n */\nasync function scheduleSend() {\n  await loaded\n  // eslint-disable-next-line compat/compat\n  window.requestIdleCallback(send)\n}\n\n/**\n * Send the queued event to hydro\n */\nfunction send() {\n  if (!queued) return\n\n  sendEvent('web-vital', stringifyObjectValues(queued))\n  queued = undefined\n}\n","import {areCharacterKeyShortcutsEnabled, isNonCharacterKeyShortcut} from './keyboard-shortcuts-helper'\nimport {install, splitHotkeyString, uninstall} from './hotkey'\nimport {observe} from '@github/selector-observer'\n\nexport function observeHotkey(selector: string) {\n  observe(selector, {\n    constructor: HTMLElement,\n    add(element) {\n      // Disable character key shortcuts based on user preference\n      if (areCharacterKeyShortcutsEnabled()) {\n        install(element)\n      } else {\n        const shortcut = element.getAttribute('data-hotkey')\n        if (shortcut) {\n          const validShortcuts = filterOutCharacterKeyShortcuts(shortcut)\n          if (validShortcuts.length > 0) {\n            element.setAttribute('data-hotkey', validShortcuts)\n            install(element)\n          } else {\n            element.removeAttribute('data-hotkey')\n            uninstall(element)\n          }\n        }\n      }\n    },\n    remove(element) {\n      uninstall(element)\n    },\n  })\n}\n\n// This function keeps non-character key shortcuts and filters out character key shortcuts.\n// See `isNonCharacterKeyShortcut` for more information.\nexport function filterOutCharacterKeyShortcuts(string: string) {\n  const shortcuts = splitHotkeyString(string)\n  return shortcuts\n    .filter((s: string) => {\n      return isNonCharacterKeyShortcut(s)\n    })\n    .join(',')\n}\n","// Global handler for AJAX loading indicators.\n//\n// Only enabled on new style `data-remote` requests.\n//\n// Examples\n//\n//   .loading-spinner { display: none; }\n//   form.loading .loading-spinner { display: block; }\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (event.defaultPrevented) {\n    return\n  }\n  event.currentTarget.classList.add('loading')\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxComplete', '[data-remote]', function (event) {\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  event.currentTarget.classList.remove('loading')\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\n// Dashboard event stream ajax pagination\nremoteForm('form.js-ajax-pagination, .js-ajax-pagination form', async function (form, wants) {\n  const container = form.closest<HTMLElement>('.js-ajax-pagination')!\n  let response\n  try {\n    response = await wants.html()\n  } catch (err) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (err.response && err.response.status === 404) {\n      container.remove()\n      return\n    } else {\n      throw err\n    }\n  }\n  container.replaceWith(response.html)\n  fire(form, 'page:loaded')\n})\n","import safeStorage from '@github-ui/safe-storage'\nconst {getItem} = safeStorage('localStorage')\n\nexport function debugHydroPayload(debugKey: string, payload: string): void {\n  if (process.env.NODE_ENV === 'development') {\n    if (getItem(debugKey) === 'true') {\n      /* eslint eslint-comments/no-use: off */\n      /* eslint-disable no-console */\n      try {\n        const parsed = JSON.parse(payload)\n        const eventName = parsed?.payload?.event_name ?? parsed?.event_type\n        console.group(`[${debugKey}] ${eventName}`)\n        console.table(parsed)\n        const keys = Object.keys(parsed?.payload || {})\n        for (const key of keys) {\n          const object = parsed.payload[key]\n          if (object instanceof Object && Object.keys(object).length > 0) {\n            console.group(key)\n            console.table(object)\n            console.groupEnd()\n          }\n        }\n        console.groupEnd()\n      } catch {\n        console.group(`[hydro ${debugKey}] - failed to parse payload`)\n        console.log(payload)\n        console.groupEnd()\n      }\n      /* eslint-enable no-console */\n    }\n  }\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {debugHydroPayload} from './console-debug'\nconst GENERIC_CLICK_EVENT_NAME = 'analytics.click'\n\non('click', '[data-analytics-event]', event => {\n  // marketing pages will use marketing/analytics-events.ts, instead of behaviors/analytics-events.ts\n  if (isMarketingPage()) {\n    return\n  }\n  const element = event.currentTarget\n\n  const analyticsEvent = element.getAttribute('data-analytics-event')\n  if (!analyticsEvent) return\n\n  const analyticsEventAttributes = JSON.parse(analyticsEvent)\n\n  debugHydroPayload('hydro-debug.click', `{\"event_type\": \"${GENERIC_CLICK_EVENT_NAME}\", \"payload\": ${analyticsEvent}}`)\n  sendEvent(GENERIC_CLICK_EVENT_NAME, analyticsEventAttributes)\n})\n\nfunction isMarketingPage(): boolean {\n  return !!ssrSafeDocument?.head?.querySelector<HTMLMetaElement>('meta[name=\"is_logged_out_page\"]')?.content\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {sendStats} from '@github-ui/stats'\n\nconst selector = ['system', 'disabled']\n  .map(state => `html[data-a11y-animated-images=\"${state}\"] img[data-animated-image]`)\n  .join(', ')\n\nobserve(selector, el => {\n  if (!(el instanceof HTMLImageElement)) return // Element is not an image\n  // Element has a parent link but is not the direct child\n  if (el.closest('a') && !(el.parentElement instanceof HTMLAnchorElement)) return\n\n  let parent = el.parentElement\n  let link = null\n  if (parent instanceof HTMLAnchorElement) {\n    if (parent.childElementCount > 1) return // Image is not the only child of link\n    link = parent\n    link.setAttribute('data-target', 'animated-image.originalLink')\n    parent = link.parentElement\n  }\n\n  el.removeAttribute('data-animated-image')\n  el.setAttribute('data-target', 'animated-image.originalImage')\n\n  const clone = link ? link.cloneNode(true) : el.cloneNode(true)\n\n  const container = document.createElement('animated-image')\n  container.appendChild(clone)\n  parent?.replaceChild(container, link ? link : el)\n\n  sendStats({incrementKey: 'ANIMATED_IMAGE_PLAYER_WRAPPED', requestUrl: window.location.href})\n})\n","// Common behaviors associated with <auto-check>\n\nimport {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {validate as htmlValidate} from '../behaviors/html-validation'\n\nconst notes = new WeakMap()\n\nobserve('auto-check', function (el) {\n  if (el.classList.contains('js-prevent-default-behavior')) return\n\n  const input = el.querySelector('input')\n  if (!input) return\n  if (input.classList.contains('js-prevent-default-behavior')) return\n\n  const container = input.closest('.form-group') || el\n  const form = input.form\n\n  let id: string | null\n  function generateId() {\n    if (!id) id = `input-check-${(Math.random() * 10000).toFixed(0)}`\n    return id\n  }\n  const ariaDescribedby = input.getAttribute('aria-describedby')\n\n  input.addEventListener('focusout:delay', () => {\n    input.setAttribute('aria-describedby', [id, ariaDescribedby].join(' '))\n  })\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    if (!note.id) note.id = generateId()\n    notes.set(note, note.innerHTML)\n  }\n\n  el.addEventListener('loadstart', () => {\n    reset(input, container)\n    container.classList.add('is-loading')\n    input.classList.add('is-autocheck-loading')\n\n    validate(form)\n  })\n\n  el.addEventListener('loadend', () => {\n    container.classList.remove('is-loading')\n    input.classList.remove('is-autocheck-loading')\n  })\n\n  input.addEventListener('auto-check-success', async event => {\n    input.classList.add('is-autocheck-successful')\n    container.classList.add('successed')\n\n    validate(form)\n\n    const {response} = event.detail\n    if (!response) return\n\n    const message = await response.text()\n    if (!message) return\n\n    if (note instanceof HTMLElement) {\n      note.innerHTML = message\n      announceFromElement(note)\n    } else {\n      const isOk = response.status === 200\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const element = document.createElement(tagName)\n      element.id = generateId()\n      element.classList.add(isOk ? 'success' : 'warning')\n      element.innerHTML = message\n      container.append(element)\n      container.classList.add(isOk ? 'successed' : 'warn')\n      announceFromElement(element)\n      if (isOk) element.hidden = document.activeElement !== input\n    }\n\n    fire(input, 'auto-check-message-updated')\n  })\n\n  input.addEventListener('auto-check-error', async event => {\n    input.classList.add('is-autocheck-errored')\n    container.classList.add('errored')\n\n    validate(form)\n\n    const {response} = event.detail\n    if (!response) return\n\n    const message = await response.text()\n\n    if (note instanceof HTMLElement) {\n      // eslint-disable-next-line i18n-text/no-en\n      note.innerHTML = message || 'Something went wrong'\n      announceFromElement(note)\n    } else {\n      const tagName = container.tagName === 'DL' ? 'dd' : 'div'\n      const error = document.createElement(tagName)\n      error.id = generateId()\n      error.classList.add('error')\n      // eslint-disable-next-line i18n-text/no-en\n      error.innerHTML = message || 'Something went wrong'\n      container.append(error)\n      announceFromElement(error)\n    }\n  })\n\n  input.addEventListener('input', () => {\n    input.removeAttribute('aria-describedby')\n    if (!input.value) reset(input, container)\n  })\n\n  input.addEventListener('blur', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = true\n  })\n\n  input.addEventListener('focus', () => {\n    const successMessage = container.querySelector<HTMLElement>('.success')\n    if (successMessage) successMessage.hidden = false\n  })\n\n  form?.addEventListener('reset', () => {\n    reset(input, container)\n  })\n})\n\n// Reset the autocheck state.\nfunction reset(input: HTMLInputElement, container: Element) {\n  container.classList.remove('is-loading', 'successed', 'errored', 'warn')\n  input.classList.remove('is-autocheck-loading', 'is-autocheck-successful', 'is-autocheck-errored')\n\n  const note = container.querySelector('p.note')\n  if (note) {\n    const content = notes.get(note)\n    if (content) note.innerHTML = content\n  }\n\n  if (container.tagName === 'DL') {\n    container.querySelector('dd.error')?.remove()\n    container.querySelector('dd.warning')?.remove()\n    container.querySelector('dd.success')?.remove()\n  } else {\n    container.querySelector('div.error')?.remove()\n    container.querySelector('div.warning')?.remove()\n    container.querySelector('div.success')?.remove()\n  }\n}\n\nfunction validate(form: HTMLFormElement | null) {\n  if (!form) return\n  htmlValidate(form)\n}\n","// Common behaviors associated with <auto-complete>\n\nimport AutocompleteElement from '@github/auto-complete-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Display spinner during query server fetch.\nobserve('auto-complete', function (el) {\n  el.addEventListener('loadstart', () => el.classList.add('is-auto-complete-loading'))\n  el.addEventListener('loadend', () => el.classList.remove('is-auto-complete-loading'))\n})\n\nobserve('auto-complete', {constructor: AutocompleteElement, initialize: toggleSubmitButton})\n\non('auto-complete-change', 'auto-complete', function (event) {\n  toggleSubmitButton(event.currentTarget as AutocompleteElement)\n})\n\n// TODO Upstream `required` attribute to <auto-complete> so it can\n// participate in data-disable-invalid form validation.\n//\n// Toggle the submit button disabled/enabled based on the completer.\nfunction toggleSubmitButton(completer: AutocompleteElement) {\n  const form = completer.closest('form')\n  if (!form) return\n  const button = form.querySelector('.js-auto-complete-button')\n  if (!(button instanceof HTMLButtonElement)) return\n  button.disabled = !completer.value\n}\n","// Click to select clone urls\n\nimport {microtask} from '@github-ui/eventloop-tasks'\nimport {onFocus} from '@github-ui/onfocus'\n\nonFocus('input[data-autoselect], textarea[data-autoselect]', async function (input) {\n  await microtask()\n  ;(input as HTMLInputElement | HTMLTextAreaElement).select()\n})\n","// Form AutoSubmit Behavior\n//\n// Automatically submits form when one of its fields change.\n//\n// Examples\n//\n//   <form action=\"/subscribe\" data-autosubmit>\n//     <input type=radio name=state value=1> Subscribe\n//     <input type=radio name=state value=0> Unsubscribe\n//   </form>\n\nimport {debounce} from '@github/mini-throttle'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\n\non('change', 'form[data-autosubmit]', function (event) {\n  const target = event.currentTarget\n  requestSubmit(target as HTMLFormElement)\n})\n\non('change', 'input[data-autosubmit], select[data-autosubmit]', submit)\n\n// Submit a form from a change event.\nfunction submit(event: Event) {\n  const input = event.target\n  if (!(input instanceof HTMLInputElement) && !(input instanceof HTMLSelectElement)) return\n\n  const form = input.form\n  requestSubmit(form!)\n}\n\nconst debouncedSubmit = debounce(submit, 300)\n\nobserve('input[data-throttled-autosubmit]', {\n  subscribe: el => fromEvent(el, 'input', debouncedSubmit),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Sets the text of the avatar reset button depending on whether or not the\n// user has a gravatar associated with their GitHub account.\nasync function detectGravatar(el: Element) {\n  const gravitarUrl = el.getAttribute('data-url') || ''\n  const hasGravitar = await fetchGravatarInfo(gravitarUrl)\n\n  if (hasGravitar) {\n    const gravatarText = el.getAttribute('data-gravatar-text')\n    if (gravatarText != null) {\n      el.textContent = gravatarText\n    }\n  }\n}\n\nobserve('.js-detect-gravatar', function (el) {\n  detectGravatar(el)\n})\n\n// Fetch the gravitarUrl, and check the `has_gravatar` property from the returning JSON.\nasync function fetchGravatarInfo(gravitarUrl: string): Promise<boolean> {\n  const url = gravitarUrl\n  if (!url) return false\n\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const data = (await response.json()) as {has_gravatar: boolean}\n    return data.has_gravatar\n  } catch {\n    return false\n  }\n}\n","import {addThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '@github-ui/browser-history-state'\nimport visible from '@github-ui/visible'\nimport {softNavigate} from '@github-ui/soft-navigate'\n\nconst priceSelectors = ['.unstyled-additional-seats-price-obj', '.unstyled-base-price-obj', '.unstyled-final-price-obj']\n\ninterface PriceStruct {\n  default_currency: string\n  local_currency: string\n}\n\ntype SelectorValue = PriceStruct | string | number\n\nfunction isAPriceStruct(obj: SelectorValue): obj is PriceStruct {\n  if (typeof obj === 'string') return false\n  if (typeof obj === 'number') return false\n  return 'default_currency' in obj && 'local_currency' in obj\n}\n\ninterface UserPlan {\n  free: boolean\n  is_enterprise_cloud_trial: boolean\n  seats: number\n  no_additional_seats: boolean\n  selectors: Record<string, SelectorValue>\n  url: string\n}\n\nlet previousController: AbortController | null = null\non('click', '.js-org-signup-duration-change', event => {\n  event.preventDefault()\n  const el = event.currentTarget\n  const newDuration = el.getAttribute('data-plan-duration')!\n\n  updateDurationFields(newDuration)\n  updateSeatFieldURLs(newDuration)\n  for (const seatsField of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    updateTotals(seatsField)\n  }\n  toggleDurationUnitPrices()\n})\n\non('change', '.js-org-signup-duration-toggle', function ({currentTarget}) {\n  const url = new URL(currentTarget.getAttribute('data-url')!, window.location.origin)\n\n  softNavigate(url.toString())\n})\n\nasync function updateTotals(el: HTMLInputElement | HTMLSelectElement) {\n  const itemKey = el.getAttribute('data-item-name') || 'items'\n  const itemRawCount = el.value\n  const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const itemMinimum = parseInt(el.getAttribute('data-item-minimum')!) || 0\n  const itemMaximum = parseInt(el.getAttribute('data-item-maximum')!) || 1_000 // Matches the maximum default seats limit in configurable/seat_limit_for_upgrade\n  const itemCount = parseInt(el.getAttribute('data-item-count')!) || 0\n  const itemDelta = Math.max(itemMinimum, parseInt(itemRawCount) || 0)\n  const contactUs = itemDelta > itemMaximum\n\n  const downgradeButton = document.querySelector('.js-downgrade-button')\n  const downgradeDisabledMessage = document.getElementById('downgrade-disabled-message')\n  if (downgradeButton instanceof HTMLButtonElement) {\n    downgradeButton.disabled = itemDelta === itemCount\n  }\n\n  if (downgradeDisabledMessage instanceof HTMLElement && downgradeButton instanceof HTMLButtonElement) {\n    downgradeDisabledMessage.hidden = !downgradeButton.disabled\n  }\n\n  params.append(itemKey, itemDelta.toString())\n\n  const transformInput = document.querySelector('.js-transform-user')\n  if (transformInput) params.append('transform_user', '1')\n\n  url.search = params.toString()\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let data: UserPlan | null = null\n  try {\n    const response = await fetch(url.toString(), {signal, headers: {Accept: 'application/json'}})\n    if (!response.ok) return\n    data = (await response.json()) as UserPlan\n  } catch {\n    // ignore network errors\n  }\n  if (signal.aborted) return\n  if (!data) return\n\n  const contact = document.querySelector('.js-contact-us')\n  /* eslint-disable-next-line github/no-d-none */\n  if (contact) contact.classList.toggle('d-none', !contactUs)\n\n  const planCost = document.querySelector('.js-cost-info') as HTMLElement\n  if (planCost) planCost.hidden = contactUs\n\n  const paymentSummary = document.querySelector('.js-payment-summary')\n  /* eslint-disable-next-line github/no-d-none */\n  if (paymentSummary) paymentSummary.classList.toggle('d-none', contactUs)\n\n  const submit = document.querySelector('.js-submit-billing')\n  if (submit instanceof HTMLElement) submit.hidden = contactUs\n\n  // On the signup billing page, displaying the payment form is handled by Orgs::CreationView.\n  if (!data.url.includes('organizations/signup_billing')) {\n    const billing = document.querySelector('.js-billing-section')\n    if (billing) billing.classList.toggle('has-removed-contents', data.free || data.is_enterprise_cloud_trial)\n  }\n\n  const upgrade = document.querySelector('.js-upgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (upgrade) upgrade.classList.toggle('d-none', itemDelta <= 0)\n\n  const downgrade = document.querySelector('.js-downgrade-info')\n  /* eslint-disable-next-line github/no-d-none */\n  if (downgrade) downgrade.classList.toggle('d-none', itemDelta >= 0)\n\n  const extraSeats = document.querySelector('.js-extra-seats-line-item')\n  /* eslint-disable-next-line github/no-d-none */\n  if (extraSeats) extraSeats.classList.toggle('d-none', data.no_additional_seats)\n\n  const seatField = document.querySelector('.js-seat-field')\n  if (seatField) updateSeatFields(itemRawCount)\n\n  const minimumSeatsTooltip = document.querySelector('.js-minimum-seats-disclaimer')\n  if (minimumSeatsTooltip) {\n    minimumSeatsTooltip.classList.toggle('tooltipped', data.seats === 5)\n    minimumSeatsTooltip.classList.toggle('tooltipped-nw', data.seats === 5)\n  }\n\n  const ref = data.selectors\n  for (const selector in ref) {\n    for (const element of document.querySelectorAll(selector)) {\n      if (isPriceSelector(selector) && isAPriceStruct(ref[selector]!)) {\n        element.textContent = ''\n        element.appendChild(priceCurrencyTag('default-currency', ref[selector].default_currency))\n        element.appendChild(priceCurrencyTag('local-currency', ref[selector].local_currency))\n      } else {\n        element.textContent = ref[selector] as string\n      }\n    }\n  }\n\n  replaceState(history.state, '', data.url)\n}\n\nfunction isPriceSelector(selector: string): boolean {\n  return priceSelectors.includes(selector)\n}\n\nfunction priceCurrencyTag(className: string, price: string): HTMLSpanElement {\n  const span = document.createElement('span')\n  span.classList.add(className)\n  span.textContent = price\n  return span\n}\n\nfunction toggleDurationUnitPrices() {\n  for (const unitPrice of document.querySelectorAll<HTMLElement>('.js-unit-price')) {\n    unitPrice.hidden = !unitPrice.hidden\n  }\n}\n\nfunction updateDurationFields(newDuration: string) {\n  const oldDuration = newDuration === 'year' ? 'month' : 'year'\n  for (const planDurationText of document.querySelectorAll('.js-plan-duration-text')) {\n    planDurationText.textContent = newDuration\n  }\n\n  for (const planDurationAdjective of document.querySelectorAll('.unstyled-available-plan-duration-adjective')) {\n    planDurationAdjective.textContent = `${newDuration}ly`\n  }\n\n  for (const durationLink of document.querySelectorAll('.js-org-signup-duration-change')) {\n    durationLink.setAttribute('data-plan-duration', oldDuration)\n  }\n  const planDurationInput = document.getElementById('signup-plan-duration') as HTMLInputElement\n  if (planDurationInput) {\n    planDurationInput.value = newDuration\n  }\n}\n\nfunction updateSeatFields(numberOfSeats: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const maxSeatForPlan = el.getAttribute('data-item-maximum')!\n    const popover = el?.parentNode?.querySelector<HTMLElement>('.Popover')\n\n    if (maxSeatForPlan && maxSeatForPlan.length) {\n      if (parseInt(numberOfSeats, 10) > parseInt(maxSeatForPlan, 10)) {\n        el.classList.add('color-border-danger-emphasis')\n        popover?.removeAttribute('hidden')\n      } else {\n        el.classList.remove('color-border-danger-emphasis')\n        popover?.setAttribute('hidden', 'true')\n      }\n    }\n  }\n}\n\nfunction updateSeatFieldURLs(newDuration: string) {\n  for (const el of document.querySelectorAll<HTMLInputElement>('.js-seat-field')) {\n    const url = new URL(el.getAttribute('data-url')!, window.location.origin)\n    const params = new URLSearchParams(url.search.slice(1))\n    params.delete('plan_duration')\n    params.append('plan_duration', newDuration)\n    url.search = params.toString()\n    el.setAttribute('data-url', url.toString())\n  }\n}\n\nobserve('.js-addon-purchase-field', {\n  constructor: HTMLInputElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    addThrottledInputEventListener(el, function () {\n      updateTotals(el)\n    })\n  },\n})\n\nobserve('.js-addon-downgrade-field', {\n  constructor: HTMLSelectElement,\n  add(el) {\n    if (visible(el)) updateTotals(el)\n\n    el.addEventListener('change', function () {\n      updateTotals(el)\n    })\n  },\n})\n\nfunction handleOrgChange(event: Event) {\n  const addonField = document.querySelector('.js-addon-purchase-field')\n  const selectedRadio = (event.target as Element).querySelector('input:checked')\n\n  if (addonField instanceof HTMLInputElement && selectedRadio instanceof HTMLInputElement) {\n    const newUrl = selectedRadio.getAttribute('data-upgrade-url')\n\n    if (newUrl) {\n      addonField.setAttribute('data-url', newUrl)\n      addonField.value = '0'\n      updateTotals(addonField)\n    }\n  }\n}\n\non('details-menu-selected', '.js-organization-container', handleOrgChange, {capture: true})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\n// Flip tooltip direction of child elements if an item gets .is-stuck\n// so tooltips are still visible when the user scrolls down a blob and\n// the button bar sticks to the top\nobserve('.js-blob-header.is-stuck', {\n  add(el) {\n    flipTooltip(el)\n  },\n  remove(el) {\n    flipTooltip(el, true)\n  },\n})\n\nfunction flipTooltip(element: Element, inverse = false) {\n  const pairs = {\n    'tooltipped-nw': 'tooltipped-sw',\n    'tooltipped-n': 'tooltipped-s',\n    'tooltipped-ne': 'tooltipped-se',\n  }\n\n  for (const [key, value] of Object.entries(pairs)) {\n    const from = inverse ? value : key\n    const to = inverse ? key : value\n    for (const el of element.querySelectorAll(`.${from}`)) {\n      el.classList.replace(from, to)\n    }\n  }\n}\n\non('click', '.js-blob-dropdown-click', event => {\n  const trackingData = event.currentTarget.getAttribute('data-dropdown-tracking')\n\n  if (!trackingData) return\n\n  const parsedTrackingData = JSON.parse(trackingData)\n  sendEvent(parsedTrackingData.type, parsedTrackingData.context)\n})\n","import {onInput} from '@github-ui/onfocus'\n\nonInput('.js-csv-filter-field', function (event) {\n  const query = (event.target as HTMLInputElement).value.toLowerCase()\n  for (const row of document.querySelectorAll('.js-csv-data tbody tr')) {\n    if (!(row instanceof HTMLElement)) continue\n    if (!row.textContent) continue\n    row.hidden = !!query && !row.textContent.toLowerCase().includes(query)\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction changeSelection(event: Event) {\n  const input = event.target as HTMLElement\n  const container = input?.closest<HTMLDetailsElement>('.js-branch-protection-integration-select')\n  const currentSelection = container?.querySelector<HTMLElement>('.js-branch-protection-integration-select-current')\n  const item = input?.closest<HTMLElement>('.js-branch-protection-integration-select-item')\n  const label = item?.querySelector<HTMLElement>('.js-branch-protection-integration-select-label')\n  if (currentSelection && label && container) {\n    currentSelection.innerHTML = label.innerHTML\n    container.open = false\n  }\n}\n\non('change', '.js-branch-protection-integration-select-input', changeSelection)\n","// Bulk actions\n//\n// Provides a way to update bulk actions buttons/menus from a fetched url\n// when check boxes are updated.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\" data-bulk-actions-parameter=\"member_ids\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <div class=\"js-bulk-actions-item\" data-bulk-actions-id=\"1\">\n//         <input type=\"checkbox\" class=\"js-bulk-actions-toggle\">\n//       </div>\n//     </div>\n//\n// If [data-bulk-actions-parameter] is not assigned, `input.js-bulk-actions-toggle`'s name and value will be used instead.\n//\n//     <div class=\"js-bulk-actions-container\" data-bulk-actions-url=\"/bulk/actions/url\">\n//       <div class=\"js-bulk-actions\">\n//         <!-- buttons/menus to be updated -->\n//       </div>\n//\n//       <input type=\"checkbox\" name=\"member_ids[]\" value=\"1\" class=\"js-bulk-actions-toggle\">\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\n\n// Get the bulk-actions-url from the container.\nfunction bulkUrl(container: Element): string {\n  const url = new URL(container.getAttribute('data-bulk-actions-url')!, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  const name = container.getAttribute('data-bulk-actions-parameter')\n  const checkedItems = Array.from(container.querySelectorAll<HTMLInputElement>('.js-bulk-actions-toggle:checked'))\n  if (name) {\n    const ids = checkedItems\n      .map(el => el.closest<HTMLElement>('.js-bulk-actions-item')!.getAttribute('data-bulk-actions-id')!)\n      .sort()\n    for (const id of ids) {\n      params.append(`${name}[]`, id)\n    }\n  } else {\n    for (const input of checkedItems.sort((a, b) => (a.value > b.value ? 1 : -1))) {\n      params.append(input.name, input.value)\n    }\n  }\n\n  url.search = params.toString()\n  return url.toString()\n}\n\nlet previousController: AbortController | null = null\n// Update the bulk actions container with new HTML fetched from the server.\nasync function updateBulkActions(event: Event) {\n  const container = event.target\n  if (!(container instanceof HTMLElement)) return\n  const actionsContainer = container.querySelector<HTMLElement>('.js-bulk-actions')!\n  const isItemSelected = !!container.querySelector('.js-bulk-actions-toggle:checked')\n\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  let html = ''\n  try {\n    // TODO: Drop `X-Requested-With` header once controllers are cleaned up of `request.xhr?`\n    const response = await fetch(bulkUrl(container), {signal, headers: {'X-Requested-With': 'XMLHttpRequest'}})\n    if (!response.ok) return\n    html = await response.text()\n  } catch {\n    // Ignore network errors\n  }\n  if (signal.aborted) return\n  if (!html) return\n\n  if (!isItemSelected) {\n    actionsContainer.innerHTML = html\n    toggleMembershipTabs(container)\n  } else {\n    toggleMembershipTabs(container)\n    actionsContainer.innerHTML = html\n  }\n\n  fire(container, 'bulk-actions:updated')\n}\n\n// Toggle the membership tabs based on the amount of checked bulk-actions.\nfunction toggleMembershipTabs(container: HTMLElement) {\n  const membershipTabs = document.querySelector('.js-membership-tabs')\n  if (membershipTabs) {\n    const checked = container.querySelectorAll('.js-bulk-actions-toggle:checked')\n    /* eslint-disable-next-line github/no-d-none */\n    membershipTabs.classList.toggle('d-none', checked.length > 0)\n  }\n}\n\non('change', '.js-bulk-actions-toggle', function (event) {\n  const toggle = event.currentTarget\n  const container = toggle.closest<HTMLElement>('.js-bulk-actions-container')!\n  fire(container, 'bulk-actions:update')\n})\n\non('bulk-actions:update', '.js-bulk-actions-container', debounce(updateBulkActions, 100))\n","import {loaded} from '@github-ui/document-ready'\nimport {sendStats} from '@github-ui/stats'\n\ntype Ok<T> = {kind: 'ok'; value: T | null}\ntype Err<E> = {kind: 'err'; value: E}\ntype Result<T, E> = Ok<T> | Err<E>\n\nfunction getLocalJSON<T>(key: string): Result<T, Error> {\n  try {\n    const text = window.localStorage.getItem(key)\n    return {kind: 'ok', value: text ? JSON.parse(text) : null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction setLocalJSON<T>(key: string, value: T): Result<null, Error> {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value))\n    return {kind: 'ok', value: null}\n  } catch (e) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    return {kind: 'err', value: e}\n  }\n}\n\nfunction gatherBundleURLs() {\n  const urls: {[key: string]: string} = {}\n  for (const script of document.getElementsByTagName('script')) {\n    const match = script.src.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.js$/)\n    if (match) urls[`${match[1]}.js`] = script.src\n  }\n  for (const link of document.getElementsByTagName('link')) {\n    const match = link.href.match(/\\/([\\w-]+)-[0-9a-f]{8,}\\.css$/)\n    if (match) urls[`${match[1]}.css`] = link.href\n  }\n  return urls\n}\n\ntype Bundles = Record<string, string>\n\nfunction report() {\n  const urls = gatherBundleURLs()\n  const read = getLocalJSON<Bundles>('bundle-urls')\n  if (read.kind === 'err') {\n    setLocalJSON('bundle-urls', urls)\n    return\n  }\n  const previousURLs = read.value || {}\n  const downloadedBundles = Object.keys(urls).filter(bundle => previousURLs[bundle] !== urls[bundle])\n  if (downloadedBundles.length) {\n    const write = setLocalJSON('bundle-urls', {...previousURLs, ...urls})\n    if (write.kind === 'ok') {\n      sendStats({downloadedBundles})\n    }\n  }\n}\n\n;(async () => {\n  await loaded\n  // eslint-disable-next-line compat/compat\n  window.requestIdleCallback(report)\n})()\n","// Behaviors complementing buttons or minibuttons\n//\n// See also\n//   primer/buttons.scss\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction cancelEvent(event: Event) {\n  event.preventDefault()\n  event.stopPropagation()\n}\n\n// Prevent minibutton click if target is disabled\nobserve('a.btn.disabled', {\n  subscribe: el => fromEvent(el, 'click', cancelEvent),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport subscribe from '@github/check-all'\n\nobserve('.js-check-all-container', {\n  constructor: HTMLElement,\n  subscribe,\n})\n","import {deleteCookie, getCookies} from '@github-ui/cookies'\n\n// This module detects a logout that has just occurred and clears browser data\n// for the origin that might contain sensitive things such as localstorage.\n\n// Set by lib/github/authentication/logout_result.rb on logout\nexport const JustLoggedOutCookieName = 'logout-was-successful'\n\nfunction clearData() {\n  for (const storage of [sessionStorage, localStorage]) {\n    try {\n      storage.clear()\n    } catch {\n      // ignore failure to clear\n    }\n  }\n}\n\nexport function clearDataIfJustLoggedOut() {\n  if (getCookies(JustLoggedOutCookieName).length > 0) {\n    clearData()\n    deleteCookie(JustLoggedOutCookieName)\n  }\n}\n\nclearDataIfJustLoggedOut()\n","import {announceFromElement, type ElementWithAriaNotify} from '@github-ui/aria-live'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst duration = 2000\n\non('clipboard-copy', '[data-copy-feedback]', event => {\n  const clipboardCopyElement = event.currentTarget\n  const message = clipboardCopyElement.getAttribute('data-copy-feedback')!\n  const originalLabel = clipboardCopyElement.getAttribute('aria-label')\n  const direction = clipboardCopyElement.getAttribute('data-tooltip-direction') || 's'\n  const announceSelector = clipboardCopyElement.getAttribute('data-announce-selector') || undefined\n  const announceElement = announceSelector ? document.querySelector(announceSelector) : undefined\n  clipboardCopyElement.setAttribute('aria-label', message)\n  clipboardCopyElement.classList.add('tooltipped', `tooltipped-${direction}`)\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n  if (isFeatureEnabled('ariaNotify_partial_migration') && 'ariaNotify' in Element.prototype) {\n    ;(clipboardCopyElement as Element as ElementWithAriaNotify).ariaNotify(clipboardCopyElement.textContent || '', {\n      interrupt: 'all',\n      priority: 'important',\n    })\n  } else {\n    announceFromElement(clipboardCopyElement, {\n      element: (announceElement as HTMLElement) ?? undefined,\n    })\n  }\n\n  setTimeout(() => {\n    if (originalLabel) {\n      clipboardCopyElement.setAttribute('aria-label', originalLabel)\n    } else {\n      clipboardCopyElement.removeAttribute('aria-label')\n    }\n    clipboardCopyElement.classList.remove('tooltipped', `tooltipped-${direction}`)\n  }, duration)\n})\n\nfunction timerCallback(currentTarget: HTMLElement) {\n  clipboardCopyElementTimers.delete(currentTarget)\n  toggleCopyButton(currentTarget)\n}\n\n// Toggle a copy button.\nfunction toggleCopyButton(button: HTMLElement) {\n  const copyIcon = button.querySelector('.js-clipboard-copy-icon')\n  const checkIcon = button.querySelector('.js-clipboard-check-icon')\n\n  button.classList.toggle('ClipboardButton--success')\n\n  if (copyIcon) {\n    /* eslint-disable-next-line github/no-d-none */\n    copyIcon.classList.toggle('d-none')\n  }\n  if (checkIcon) {\n    if (checkIcon.classList.contains('d-sm-none')) {\n      checkIcon.classList.toggle('d-sm-none')\n    } else {\n      /* eslint-disable-next-line github/no-d-none */\n      checkIcon.classList.toggle('d-none')\n    }\n  }\n}\n\nconst clipboardCopyElementTimers = new WeakMap<HTMLElement, number>()\n\non('clipboard-copy', '.js-clipboard-copy:not([data-view-component])', function ({currentTarget}) {\n  if (!(currentTarget instanceof HTMLElement)) return\n\n  const currentTimeout = clipboardCopyElementTimers.get(currentTarget)\n  if (currentTimeout) {\n    clearTimeout(currentTimeout)\n  } else {\n    toggleCopyButton(currentTarget)\n  }\n\n  clipboardCopyElementTimers.set(currentTarget, window.setTimeout(timerCallback, duration, currentTarget))\n})\n","// Commenting: AJAX form submission\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-comment-form-error\" hidden>\n//       </div>\n//\n//       <textarea class=\"js-comment-field\"></textarea>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </form>\n//\n// Primer Validation example:\n// see: https://primer.style/css/components/forms#form-group-validation\n//\n//   <form class=\"js-new-comment-form\">\n//     <div class=\"form-group js-remove-error-state-on-click\">\n//       <textarea class=\"js-comment-field\" aria-describedby=\"body-input-validation\",\n//       </textarea>\n//\n//       <p class=\"note error js-comment-form-error\" id=\"body-input-validation\" hidden></p>\n//\n//       <button type=\"submit\">\n//         Comment\n//       </button>\n//     </div>\n//   </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {ErrorWithResponse} from '@github/remote-form'\nimport {changeValue} from '@github-ui/form-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '@github-ui/updatable-content'\n// eslint-disable-next-line no-restricted-imports\nimport {reportError} from '@github-ui/failbot'\n\n// Check if element is in viewport\nfunction isInViewport(el: HTMLElement) {\n  const rect = el.getBoundingClientRect()\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  )\n}\n\n// Hide any comment errors on retry.\nfunction clearFormError(form: Element) {\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.hidden = true\n  }\n}\n\n// Remove error state when Primer Form Validation enabled field is clicked on\non('click', '.errored.js-remove-error-state-on-click', function ({currentTarget}) {\n  currentTarget.classList.remove('errored')\n})\n\n// Reset form after AJAX request is successful\nremoteForm('.js-new-comment-form', async function (form, wants) {\n  let response\n  clearFormError(form)\n  try {\n    response = await wants.json()\n  } catch (error) {\n    reportError(error)\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    handleFormError(form, error)\n  }\n\n  if (!response) {\n    return\n  }\n\n  form.reset()\n  for (const field of form.querySelectorAll<HTMLInputElement>('.js-resettable-field')) {\n    changeValue(field, field.getAttribute('data-reset-value') || '')\n  }\n  const writeTab = form.querySelector('.js-write-tab')\n  if (writeTab instanceof HTMLElement) {\n    const inViewPort = isInViewport(writeTab)\n    if (inViewPort) {\n      writeTab.click()\n    }\n  }\n  const ref = response.json.updateContent\n\n  for (const selector in ref) {\n    const html = ref[selector]\n    const el = document.querySelector(selector)\n    if (el instanceof HTMLElement) {\n      replaceContent(el, html)\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(`couldn't find ${selector} for immediate update`)\n    }\n  }\n\n  fire(form, 'comment:success')\n})\n\n// Show comment error if ajax request fails.\nfunction handleFormError(form: Element, error: ErrorWithResponse) {\n  // eslint-disable-next-line i18n-text/no-en\n  let message = 'There was a problem saving your comment.'\n  // eslint-disable-next-line i18n-text/no-en\n  let messageSuffix = 'Please try again.'\n  if (error.response) {\n    if (error.response.status === 422) {\n      const data = error.response.json\n      if (data.errors) {\n        if (Array.isArray(data.errors)) {\n          message += ` Your comment ${data.errors.join(', ')}.`\n        } else {\n          message = data.errors\n        }\n      }\n    } else if (error.response.status === 200) {\n      // eslint-disable-next-line i18n-text/no-en\n      messageSuffix = 'Please reload the page and try again.'\n    }\n  }\n\n  message += ` ${messageSuffix}`\n\n  const formError = form.querySelector('.js-comment-form-error')\n  if (formError instanceof HTMLElement) {\n    formError.textContent = message\n    formError.hidden = false\n\n    const formGroupValidationFormWrapper = formError.closest('div.form-group.js-remove-error-state-on-click')\n\n    if (formGroupValidationFormWrapper) {\n      formGroupValidationFormWrapper.classList.add('errored')\n    }\n  }\n}\n","// Commenting: Close button\n//\n// When comment fields also have a \"Close\" button, update the copy of the\n// button when text is present to indicate that the form will both post a\n// comment and close the discussion.\n//\n// Markup\n//\n//     <form>\n//       <textarea class=\"js-comment-field\"></textarea>\n//       <div>\n//         <button type=\"submit\">Comment</button>\n//         <button type=\"submit\" class=\"js-comment-and-button\"\n//           data-comment-text=\"Close with comment\">\n//           Close\n//         </button>\n//       </div>\n//     </form>\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst setButtonText = (button: HTMLButtonElement, hasValue: boolean) => {\n  const spanText = button.querySelector('.js-form-action-text')\n  const textTarget = spanText ? spanText : button\n  textTarget.textContent = hasValue\n    ? button.getAttribute('data-comment-text')!\n    : textTarget.getAttribute('data-default-action-text')!\n}\n\nconst createInputHandler = (button: HTMLButtonElement): ((event: Event) => void) => {\n  let previousHasValue: string\n\n  // Handle input.\n  return (event: Event) => {\n    const target = event.currentTarget\n    const newValue = (target as HTMLInputElement).value.trim()\n\n    if (newValue !== previousHasValue) {\n      previousHasValue = newValue\n      setButtonText(button, Boolean(newValue))\n    }\n  }\n}\n\nobserve('.js-comment-and-button', {\n  constructor: HTMLButtonElement,\n  initialize(button) {\n    const commentField = button.form!.querySelector<HTMLElement>('.js-comment-field')!\n    const handleInput = createInputHandler(button)\n\n    return {\n      add() {\n        commentField.addEventListener('input', handleInput)\n        commentField.addEventListener('change', handleInput)\n      },\n      remove() {\n        commentField.removeEventListener('input', handleInput)\n        commentField.removeEventListener('change', handleInput)\n      },\n    }\n  },\n})\n","// Commenting: Focus CSS hacks\n//\n// Bubbles js-comment-field focus state up to js-write-bucket.\n//\n// So we can have a focused ring around the drag and drop section.\n//\n// TODO: `focused` class should be `is-focused`\n\nimport {onFocus} from '@github-ui/onfocus'\n\n// Sync focused class.\nfunction toggleFocus(el: Element, focused: boolean) {\n  const container = el.closest('.js-write-bucket')\n  if (container) {\n    container.classList.toggle('focused', focused)\n  }\n}\n\n// Clean up focused class on blur.\nfunction blurred(event: Event) {\n  const el = event.currentTarget\n  if (el instanceof Element) {\n    toggleFocus(el, false)\n  }\n}\n\nonFocus('.js-comment-field', function (el) {\n  toggleFocus(el, true)\n  el.addEventListener('blur', blurred, {once: true})\n})\n","import type {CaretCoordinates} from '@koddsson/textarea-caret'\nimport getCaretCoordinates from '@koddsson/textarea-caret'\n\ntype CaretCache = Map<number, CaretPosition>\nconst inputCache = new WeakMap<HTMLElement, CaretCache>()\n\n/**\n * Bundles together the caret coordinates and the caret's\n * index within a given textarea\n */\nclass CaretPosition {\n  index: number\n  coords: CaretCoordinates\n  textArea: HTMLTextAreaElement\n\n  constructor(index: number, coords: CaretCoordinates, textArea: HTMLTextAreaElement) {\n    this.index = index\n    this.coords = coords\n    this.textArea = textArea\n  }\n\n  get top() {\n    return this.coords.top\n  }\n\n  get left() {\n    return this.coords.left\n  }\n\n  get height() {\n    return this.coords.height\n  }\n\n  currentChar(lookBack = 1) {\n    return this.textArea.value.substring(this.index - lookBack, this.index)\n  }\n  /**\n   * Compare the line of the y coordinates to the caret.\n   * Returns -1 if y is on a previous line\n   * Returns 1 if y is on a subsequent line\n   * Returns 0 if y is on the same line\n   */\n  checkLine(y: number): -1 | 0 | 1 {\n    if (y < this.coords.top) {\n      return -1\n    }\n\n    if (y > this.coords.top + this.coords.height) {\n      return 1\n    }\n\n    return 0\n  }\n\n  /**\n   * The absolute horizontal distance between the x position and the\n   * caret's x position.\n   */\n  xDistance(x: number): number {\n    return Math.abs(this.left - x)\n  }\n}\n\n/**\n * Get the cached x/y coordinates for the given caret index and textarea.\n */\nfunction fetchCaretCoords(textArea: HTMLTextAreaElement, caretIndex: number): CaretPosition {\n  let caretCache\n  if (inputCache.has(textArea)) {\n    caretCache = inputCache.get(textArea)!\n  } else {\n    caretCache = new Map()\n    inputCache.set(textArea, caretCache)\n  }\n\n  if (caretCache.has(caretIndex)) {\n    return caretCache.get(caretIndex)\n  } else {\n    // calling getCaretCoordinates(textArea, caretIndex, {debug: true})\n    // will append a div to the document showing you where `textarea-caret` thinks the caret is\n    const coords = new CaretPosition(caretIndex, getCaretCoordinates(textArea, caretIndex), textArea)\n    caretCache.set(caretIndex, coords)\n    return coords\n  }\n}\n\n/**\n * This function recursively searches for the caret index that corresponds to the given coordinates.\n * We keep track of the number of iterations purely for logging to the console during\n * this PR.\n */\nconst binaryCursorSearch = (\n  textArea: HTMLTextAreaElement,\n  lower: number,\n  upper: number,\n  mouseX: number,\n  mouseY: number,\n  iterations: number,\n): number => {\n  if (upper === lower) {\n    return upper\n  }\n\n  /**\n   * Out of our final candidates, eliminate any that aren't on the same line as the mouse position.\n   * Pick the one that's closest in the x direction.\n   *\n   * If _none_ of the candidates are on the same line, bail and arbitrarily return the upper bound\n   */\n  const bestPosition = (candidates: CaretPosition[]): number => {\n    const sameLineCandidates = candidates\n      .filter(c => c.checkLine(mouseY) === 0)\n      .sort((a, b) => (a.xDistance(mouseX) > b.xDistance(mouseX) ? 1 : -1))\n    if (sameLineCandidates.length === 0) {\n      return upper\n    } else {\n      return sameLineCandidates[0]!.index\n    }\n  }\n  // if we're down to two or three positions check them all\n  if (upper - lower === 1) {\n    const l = fetchCaretCoords(textArea, lower)\n    const u = fetchCaretCoords(textArea, upper)\n    return bestPosition([l, u])\n  }\n\n  if (upper - lower === 2) {\n    const l = fetchCaretCoords(textArea, lower)\n    const m = fetchCaretCoords(textArea, upper - 1)\n    const u = fetchCaretCoords(textArea, upper)\n\n    return bestPosition([l, m, u])\n  }\n\n  // The new midpoint is halfway between the upper and lower bounds\n  // If that ends up being the same as the upper or lower, it means we've descended\n  // all the way to the bottom of our search tree. We don't backtrack.\n  const mid = Math.floor((upper + lower) / 2)\n  if (mid === lower || mid === upper) {\n    return mid\n  }\n  const midCoords = fetchCaretCoords(textArea, mid)\n\n  // If the midpoint caret position is below the mouse coordinates, we need to search\n  // farther along in the textarea\n  if (mouseY > midCoords.top + midCoords.height) {\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  // If the midpoint caret position is above the mouse coordinates, we need to search\n  // behind the current midpoint in the textarea\n  if (mouseY < midCoords.top) {\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  // if we're within a few pixels, avoid further searching\n  const ETA = 3\n  if (midCoords.xDistance(mouseX) < ETA) {\n    return mid\n  }\n\n  // if mid is on the same line as the cursor, we need to check the x position\n  if (midCoords.left < mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid + 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n    return binaryCursorSearch(textArea, mid + 1, upper, mouseX, mouseY, iterations + 1)\n  }\n\n  if (midCoords.left > mouseX) {\n    // if iterating further will cause us to change lines, stop here\n    if (fetchCaretCoords(textArea, mid - 1).checkLine(mouseY) !== 0) {\n      return mid\n    }\n\n    return binaryCursorSearch(textArea, lower, mid - 1, mouseX, mouseY, iterations + 1)\n  }\n\n  return mid\n}\n\n/**\n * The driver function for the binary search.\n */\nconst findCursorPosition = (textArea: HTMLTextAreaElement, x: number, y: number): number => {\n  const startIndex = 0\n  const endIndex = textArea.value.length\n  const iterations = 0\n  return binaryCursorSearch(textArea, startIndex, endIndex, x, y, iterations)\n}\n\n/**\n * Assigns the final cursor position after finding it\n */\nfunction setCursorPosition(textarea: HTMLTextAreaElement, x: number, y: number) {\n  const newPosition = findCursorPosition(textarea, x, y)\n\n  textarea.setSelectionRange(newPosition, newPosition)\n}\n\n/**\n * Sets the caret in a textarea based on a DragEvent within that textarea.\n * Unfortunately there's no html api to do that directly (x/y -> caret). This function uses an iterative\n * approach to find the caret position from the x/y coordinates of the drag event.\n *\n * Under the hood we use the [textarea-caret npm package](https://www.npmjs.com/package/textarea-caret)\n * to find the x/y coordinates of the caret based on the caret index, and feed those results into a binary search.\n *\n * We use a cache to speed up the search, which is reinitialized when the user drags over the textarea for the first time.\n */\nexport function updateCaret(textArea: HTMLTextAreaElement, dragEvent: DragEvent) {\n  const rect = textArea.getBoundingClientRect()\n  // We want to clear the cache when the user first drags an attachment into the textarea.\n  // It's better to have to recalculate too much than to have a stale cache with wrong results.\n  if (dragEvent.type === 'dragenter') {\n    inputCache.delete(textArea)\n  }\n\n  const x = dragEvent.clientX - rect.left\n  const y = dragEvent.clientY - rect.top + textArea.scrollTop\n  setCursorPosition(textArea, x, y)\n}\n","import {insertText, replaceSelection, replaceText} from '@github-ui/text'\nimport {subscribe} from '@github/paste-markdown'\nimport type {Attachment} from '@github/file-attachment-element'\nimport {getCodeEditor} from '../../code-editor'\nimport {getImageSizeFromFile, markdownImageTag} from '@github-ui/markdown-editor/utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {updateCaret} from './caret-placement'\nimport {emitToCodeMirror} from '@github-ui/code-mirror/emit-to-codemirror'\n\n// This is a map of all the attachments (and their placeholders) that have been succesfully uploaded\nconst uploadedItems: Map<string, string> = new Map()\n\n// In paste-markdown the subscribe function listens for all of paste event handlers and\n// returns an unsubscribe function to remove them from the element.\nobserve('.js-paste-markdown', {\n  initialize(el) {\n    let unsubscribe: () => void\n    const pasteUrlLinksAsPlainText = el.hasAttribute('data-paste-url-links-as-plain-text')\n    return {\n      add() {\n        unsubscribe = subscribe(el as HTMLElement, {\n          defaultPlainTextPaste: {urlLinks: pasteUrlLinksAsPlainText},\n        }).unsubscribe\n      },\n      remove() {\n        unsubscribe()\n      },\n    }\n  },\n})\n\nconst attachmentPlaceholders = new WeakMap<Attachment, string>()\n\n/**\n * Caches the attachment's placeholder text as it was inserted into the `<textarea>` element.\n * This is intended to make removing the placeholder later easier. The sole reason we're doing all\n * of this is because `insertText` sometimes adds a `\\n` before the inserted text, and sometimes doesn't.\n * Rather than adding more logic to figure out what happened, we memoize the result.\n *\n * This is exported so we can use it in testing\n */\nexport function cachePlaceholder(attachment: Attachment, placeholder: string) {\n  attachmentPlaceholders.set(attachment, placeholder)\n}\n\n/**\n *  Gets the cached placeholder for the attachment. Falls back to calculating the replacement text\n *  if there is no entry. The worst case outcome here is that we leave an extra newline character\n *  in the textarea.\n *\n *  This function is only exported for testing purposes\n */\nexport function getPlaceholder(attachment: Attachment): string {\n  return attachmentPlaceholders.get(attachment) || replacementText(attachment)\n}\n\n// Based off `isImage` from @github/file-attachment-element\n// Eventually, we should upstream this\nfunction isVideo(attachment: Attachment): boolean {\n  return ['video/mp4', 'video/quicktime'].includes(attachment.file.type)\n}\n\nfunction parameterizeName(name: string): string {\n  return name\n    .replace(/[[\\]\\\\\"<>&]/g, '.') // Convert unwanted chars to separator\n    .replace(/\\.{2,}/g, '.') // No more than 1 separator in a row\n    .replace(/^\\.|\\.$/gi, '') // Remove leading/trailing separator\n}\n\n// Returns an uploading status message while the file is uploading. The\n// placeholder will be replaced with a URL to the image once the upload\n// is complete.\nfunction placeholderText(attachment: Attachment): string {\n  // Video uploads do not include braces around the text\n  if (isVideo(attachment)) return `\\nUploading ${attachment.file.name}\\n`\n\n  const prefix = attachment.isImage() ? '!' : ''\n  return `${prefix}[Uploading ${attachment.file.name}]()`\n}\n\n// Strips non-word characters from a file name so it's safe to use in a\n// markdown image alt tag without needing to be escaped.\nfunction altText(name: string): string {\n  return parameterizeName(name)\n    .replace(/\\.[^.]+$/, '') // Strip file extension\n    .replace(/\\./g, ' ') // Bring back some white space\n}\n\nfunction disableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n    if (submitButton) {\n      submitButton.disabled = true\n    }\n  }\n}\n\nfunction enableSubmit(event: CustomEvent & {currentTarget: Element}) {\n  const closestForm = (event.target as HTMLElement).closest('form')\n\n  if (closestForm) {\n    const submitButton = closestForm.querySelector<HTMLButtonElement>('.btn-primary')\n\n    if (submitButton) submitButton.disabled = false\n  }\n}\n\ntype CustomEventPayload = CustomEvent & {currentTarget: Element}\n\n/**\n * This function is only exported to make async testing easier\n */\nexport async function onUploadCompleted(event: CustomEventPayload) {\n  const {attachment} = event.detail\n  const target = event.currentTarget\n  let tagText\n  if (attachment.isImage()) {\n    tagText = await imageTag(attachment)\n  } else if (isVideo(attachment)) {\n    tagText = videoMarkdown(attachment)\n  } else {\n    tagText = mdLink(attachment)\n  }\n  // note at this point event.currentTarget is possibly null\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n  setValidityAndLinkText('', tagText, event, target)\n\n  // Checking if there are any pending replacements to be made\n  if (uploadedItems.size > 0) {\n    findAndReplacePlaceholders()\n  }\n}\n\nfunction mdLink(attachment: Attachment): string {\n  return `[${attachment.file.name}](${attachment.href})`\n}\n\nfunction videoMarkdown(attachment: Attachment): string {\n  return `\\n${attachment.href!}\\n`\n}\n\nasync function imageTag(attachment: Attachment): Promise<string> {\n  const dimensions = await imageSize(attachment.file)\n  const alt = altText(attachment.file.name)\n  const src = attachment.href || ''\n  return markdownImageTag(dimensions, src, alt)\n}\n\nasync function imageSize(file: File): Promise<{width: number; height: number; ppi: number}> {\n  let size: {width: number; height: number; ppi: number} | null = null\n  try {\n    size = await getImageSizeFromFile(file)\n  } catch {\n    return {width: 0, height: 0, ppi: 0}\n  }\n  return size || {width: 0, height: 0, ppi: 0}\n}\n\n/**\n * When swapping out the placeholder for an image or video, we need\n * to remember to get the extra leading newline for video uploads\n */\nfunction replacementText(attachment: Attachment) {\n  const placeholder = placeholderText(attachment)\n  if (isVideo(attachment)) {\n    return `\\n${placeholder}\\n`\n  } else {\n    return `${placeholder}\\n`\n  }\n}\n\n/**\n * Make the textarea valid and remove the placeholder. The submit button will\n * get enabled outside this function.\n */\nfunction removeFailedUpload(event: CustomEventPayload) {\n  const field = event.currentTarget.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  const textToRemove = getPlaceholder(event.detail.attachment)\n  if (field) {\n    // Regular editor\n    field.setCustomValidity('')\n    replaceText(field, textToRemove, '')\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(event.currentTarget)\n\n    if (!editor) {\n      emitToCodeMirror('upload:editor:change', event.currentTarget, {\n        state: 'failed',\n        placeholder: textToRemove,\n        replacementText: '',\n      })\n\n      return\n    }\n\n    const cursor = editor.getSearchCursor(textToRemove)\n    cursor.findNext()\n    cursor.replace('')\n  }\n}\n\n/**\n *  Updates text inserted in editor for dropped assets, be it a regular editor\n *  (textarea) or a code editor (CodeMirror) editing a Markdown file\n *\n *  If validity is 'uploading', inserts \"[Uploading asset-name](...)\" at cursor,\n *  otherwise replace that placeholder with href\n *\n *  target is only required if event.currentTarget is lost (e.g., after await)\n */\n\nfunction setValidityAndLinkText(\n  validity: 'uploading' | '',\n  tagText: string,\n  event: CustomEventPayload,\n  target?: EventTarget & Element,\n) {\n  const field = (target || event.currentTarget).querySelector<HTMLTextAreaElement>('.js-comment-field')!\n  const fileUploadLoadingText = (target || event.currentTarget).querySelector<HTMLSpanElement>(\n    '.js-file-upload-loading-text',\n  )!\n  const placeholder = placeholderText(event.detail.attachment)\n  const {batch} = event.detail\n\n  if (field) {\n    const selectedText = field.value.substring(field.selectionStart, field.selectionEnd)\n    // Regular text editor\n    if (validity === 'uploading') {\n      let insertedPlaceholder\n      if (selectedText.length) {\n        insertedPlaceholder = replaceSelection(field, selectedText, placeholder)\n      } else {\n        insertedPlaceholder = insertText(field, placeholder, {appendNewline: true})\n      }\n      // If things go wrong, the most reliable way we can remove the placeholder\n      // for an attachment is to cache it.  This is mostly so we don't have to\n      // try to figure out if `insertText` added a leading newline into the\n      // textarea\n      attachmentPlaceholders.set(event.detail.attachment, insertedPlaceholder)\n    } else {\n      if (!field.value.includes(placeholder)) {\n        // Adding a mapping from the attachement's placeholder test to the generated tag\n        // Only doing this if the placeholder isn't already in the textarea, because then\n        // it will be replaced with the tag in the normal flow\n        uploadedItems.set(placeholder, tagText)\n      }\n\n      replaceText(field, placeholder, tagText, document.activeElement === field)\n    }\n    if (batch.isFinished()) {\n      enableSubmit(event)\n    } else {\n      disableSubmit(event)\n    }\n  } else {\n    // CodeMirror (code editor)\n    const editor = getEditor(target || event.currentTarget)\n\n    if (editor) {\n      if (validity === 'uploading') {\n        if (editor.getSelection().length) {\n          // replace selected text with placeholder\n          editor.replaceSelection(placeholder)\n        } else {\n          // insert placeholder at cursor\n          const cursor = editor.getCursor()\n          const toReplace = replacementText(event.detail.attachment)\n          editor.replaceRange(toReplace, cursor)\n        }\n      } else {\n        const cursor = editor.getSearchCursor(placeholder)\n        cursor.findNext()\n        cursor.replace(tagText)\n      }\n    } else {\n      emitToCodeMirror('upload:editor:change', target || event.currentTarget, {\n        state: validity === '' ? 'uploaded' : 'uploading',\n        placeholder,\n        replacementText: validity === '' ? tagText : replacementText(event.detail.attachment),\n      })\n    }\n\n    if (batch.isFinished()) {\n      enableSubmit(event)\n    } else {\n      disableSubmit(event)\n    }\n  }\n  if (fileUploadLoadingText) {\n    const fileUploadMessage = fileUploadLoadingText.getAttribute('data-file-upload-message')\n    fileUploadLoadingText.textContent = `${fileUploadMessage} (${batch.uploaded() + 1}/${batch.size})`\n  }\n}\n\nfunction getEditor(target: Element) {\n  const codeEditorElement = target.querySelector<HTMLTextAreaElement>('.js-code-editor')\n\n  if (!codeEditorElement) return\n\n  const codeEditor = getCodeEditor(codeEditorElement)\n\n  if (!codeEditor) return\n\n  return codeEditor.editor\n}\n\non('upload:setup', '.js-upload-markdown-image', function (event) {\n  setValidityAndLinkText('uploading', '', event)\n})\n\non('upload:complete', '.js-upload-markdown-image', onUploadCompleted)\n\non('upload:error', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  if (batch.isFinished()) {\n    enableSubmit(event)\n  } else {\n    disableSubmit(event)\n  }\n})\n\nfunction updateCursor(event: DragEvent) {\n  // The file-attachment-element bubbles up dragover and dragenter events after preventing their default\n  // behavior. We want to manually position the cursor in the textarea so that it reflects where the user\n  // will drop the file.\n  event.stopPropagation()\n\n  const attachmentElement = event.currentTarget as HTMLElement\n\n  if (!attachmentElement) return\n\n  const textArea = attachmentElement.querySelector<HTMLTextAreaElement>('.js-comment-field')\n  if (textArea) {\n    updateCaret(textArea, event)\n  } else {\n    const editor = getEditor(attachmentElement)\n\n    emitToCodeMirror('upload:editor:cursor', attachmentElement, {left: event.clientX, top: event.clientY})\n\n    if (editor) {\n      const c = editor.coordsChar({left: event.pageX, top: event.pageY})\n      editor.setCursor(c)\n      editor.focus()\n    }\n  }\n}\n\n/**\n * This function isn't used in production, it's only for keeping a fast feedback looop in dev/troubleshooting.\n * To use in dev mode, add\n * ```\n * on('click', 'textarea', debugUpdateCaret)\n * ```\n * to this file and uncomment the `console.log`\n */\n// eslint-disable-next-line unused-imports/no-unused-vars\nconst debugUpdateCaret = (event: MouseEvent) => {\n  const textArea = event.currentTarget as HTMLTextAreaElement\n  const rect = textArea.getBoundingClientRect()\n  const x = event.clientX - rect.left\n  const y = event.clientY - rect.top + textArea.scrollTop\n  // eslint-disable-next-line no-console\n  console.log({\n    x,\n    y,\n    cursor: textArea.selectionStart,\n    t: textArea.value.substring(textArea.selectionStart - 10, textArea.selectionStart),\n  })\n  const d = new DragEvent('dragenter', {clientX: event.clientX, clientY: event.clientY})\n  updateCaret(textArea, d)\n}\n\non('dragenter', 'file-attachment', updateCursor)\n\non('dragover', 'file-attachment', updateCursor)\n\non('upload:invalid', '.js-upload-markdown-image', function (event) {\n  removeFailedUpload(event)\n  const {batch} = event.detail\n  if (batch.isFinished()) {\n    enableSubmit(event)\n  } else {\n    disableSubmit(event)\n  }\n})\n\n// Checks all of the issue form textareas for placeholders that need to be replaced with tags\nfunction findAndReplacePlaceholders() {\n  const textAreas = document.querySelectorAll<HTMLTextAreaElement>('.issue-form-textarea')\n  for (const textArea of textAreas) {\n    for (const [placeholder, tagText] of uploadedItems) {\n      if (!textArea.value.includes(placeholder)) continue\n      replaceText(textArea, placeholder, tagText, document.activeElement === textArea)\n      uploadedItems.delete(placeholder)\n    }\n  }\n}\n","// Commenting: Write and Preview tabs\n//\n// Markup\n//\n//     <form class=\"js-new-comment-form\">\n//       <div class=\"js-previewable-comment-form write-selected\"\n//           data-preview-url=\"/preview\">\n//\n//         <ul>\n//           <li><a href=\"#\" class=\"js-write-tab selected\">Write</a></li>\n//           <li><a href=\"#\" class=\"js-preview-tab\">Preview</a></li>\n//         </ul>\n//\n//         <textarea class=\"js-comment-field\"></textarea>\n//\n//       </div>\n//     </form>\n//\n// TODO: Everything should be using js- prefixed classes\n// TODO: Remove all static copy\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport TabContainerElement from '@github/tab-container-element'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '@github-ui/onfocus'\n\n// Finds the CSRF token value in a `js-data-preview-url-csrf` hidden input\n// element in the preview div. If we don't find a token for the preview\n// div, find the CSRF token value in the hidden `authenticity_token` form\n// input to be used in the parent form submission (i.e. the form that this is\n// previewing).\n//\n// Returns the CSRF token String.\nfunction token(container: Element): string {\n  const dataToken = container.querySelector('.js-data-preview-url-csrf')\n  // eslint-disable-next-line github/authenticity-token\n  const formTokenRef = container.closest<HTMLFormElement>('form')!.elements.namedItem('authenticity_token')\n  if (dataToken instanceof HTMLInputElement) {\n    return dataToken.value\n  } else if (formTokenRef instanceof HTMLInputElement) {\n    return formTokenRef.value\n  } else {\n    throw new Error('Comment preview authenticity token not found')\n  }\n}\n\n// Bidirectionally switches between \"Write\" and \"Preview\" tabs.\nfunction activateTab(tab: Element): HTMLElement {\n  const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n  const isPreview = tab.classList.contains('js-preview-tab')\n  if (isPreview) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    if (writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n  }\n  container.classList.toggle('preview-selected', isPreview)\n  container.classList.toggle('write-selected', !isPreview)\n  const currentSelectedTabs = container.querySelector<HTMLElement>(\n    '.tabnav-tab.selected, .tabnav-tab[aria-selected=\"true\"]',\n  )!\n  currentSelectedTabs.setAttribute('aria-selected', 'false')\n  currentSelectedTabs.classList.remove('selected')\n  tab.classList.add('selected')\n  tab.setAttribute('aria-selected', 'true')\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n  if (isPreview) {\n    writeTab.setAttribute('data-hotkey', 'Mod+Shift+P')\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n  }\n  return container\n}\n\non('click', '.js-write-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) {\n    setTimeout(() => {\n      commentForm.querySelector<HTMLElement>('.js-comment-field')!.focus()\n    })\n    return\n  }\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:off')\n  const pollForm = commentForm.querySelector('.js-discussion-poll-form-component')\n  if (pollForm) {\n    fire(pollForm, 'poll-preview:toggle:off')\n  }\n  setTimeout(() => {\n    container.querySelector<HTMLElement>('.js-comment-field')!.focus()\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = false\n  }\n})\n\non('click', '.js-preview-tab', function (event) {\n  const target = event.currentTarget\n  const commentForm = target.closest<HTMLElement>('.js-previewable-comment-form')!\n  // <tab-container> changes are handled in the `tab-container-change` event handler\n  if (commentForm instanceof TabContainerElement) return\n\n  const container = activateTab(target)\n  fire(commentForm, 'preview:toggle:on')\n\n  setTimeout(() => {\n    renderPreview(container)\n  })\n  const toolbar = commentForm.querySelector('markdown-toolbar')\n  if (toolbar instanceof HTMLElement) {\n    toolbar.hidden = true\n  }\n  event.stopPropagation()\n  event.preventDefault()\n})\n\non('tab-container-change', '.js-previewable-comment-form', function (event) {\n  const relatedTarget = event.detail.relatedTarget\n  const isPreviewPanel = relatedTarget && relatedTarget.classList.contains('js-preview-panel')\n  const container = event.currentTarget\n  const writeTab = container.querySelector<HTMLElement>('.js-write-tab')!\n\n  if (isPreviewPanel) {\n    const writeContent = container.querySelector<HTMLElement>('.js-write-bucket')!\n    const previewBody = container.querySelector<HTMLElement>('.js-preview-body')!\n    const skipSizing = previewBody.hasAttribute('data-skip-sizing')\n\n    if (!skipSizing && writeContent.clientHeight > 0) {\n      previewBody.style.minHeight = `${writeContent.clientHeight}px`\n    }\n\n    writeTab.setAttribute('data-hotkey', 'Mod+Shift+P')\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  } else {\n    writeTab.removeAttribute('data-hotkey')\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = false\n    }\n\n    const pollForm = document.querySelector('.js-discussion-poll-form-component')\n    if (pollForm) {\n      fire(pollForm, 'poll-preview:toggle:off')\n    }\n  }\n\n  container.classList.toggle('preview-selected', Boolean(isPreviewPanel))\n  container.classList.toggle('write-selected', !isPreviewPanel)\n})\n\n// Allow triggering preview rendering from outside code\n// TODO Replace event with exported module function.\non('preview:render', '.js-previewable-comment-form', function (event) {\n  const previewTab = (event.target as Element).querySelector<HTMLElement>('.js-preview-tab')!\n  const container = activateTab(previewTab)\n  setTimeout(() => {\n    renderPreview(container)\n    const toolbar = container.querySelector('markdown-toolbar')\n    if (toolbar instanceof HTMLElement) {\n      toolbar.hidden = true\n    }\n  })\n})\n\nfunction previewForm(container: Element): FormData {\n  const text = container.querySelector<HTMLTextAreaElement>('.js-comment-field')!.value\n  const path = container.querySelector<HTMLInputElement>('.js-path')?.value\n  const lineNumber = container.querySelector<HTMLInputElement>('.js-line-number')?.value\n  const startLineNumber = container.querySelector<HTMLInputElement>('.js-start-line-number')?.value\n  const side = container.querySelector<HTMLInputElement>('.js-side')?.value\n  const startSide = container.querySelector<HTMLInputElement>('.js-start-side')?.value\n  const startCommitOid = container.querySelector<HTMLInputElement>('.js-start-commit-oid')?.value\n  const endCommitOid = container.querySelector<HTMLInputElement>('.js-end-commit-oid')?.value\n  const baseCommitOid = container.querySelector<HTMLInputElement>('.js-base-commit-oid')?.value\n  const commentId = container.querySelector<HTMLInputElement>('.js-comment-id')?.value\n\n  const form = new FormData()\n  form.append('text', text)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token(container))\n  if (path) form.append('path', path)\n  if (lineNumber) form.append('line_number', lineNumber)\n  if (startLineNumber) form.append('start_line_number', startLineNumber)\n  if (side) form.append('side', side)\n  if (startSide) form.append('start_side', startSide)\n  if (startCommitOid) form.append('start_commit_oid', startCommitOid)\n  if (endCommitOid) form.append('end_commit_oid', endCommitOid)\n  if (baseCommitOid) form.append('base_commit_oid', baseCommitOid)\n  if (commentId) form.append('comment_id', commentId)\n  return form\n}\n\nfunction fetchPreview(container: Element): Promise<string> {\n  const url = container.getAttribute('data-preview-url')!\n  const data = previewForm(container)\n  fire(container, 'preview:setup', {data})\n  return cachedFetch(url, data)\n}\n\nconst cachedFetch = memoize(uncachedFetch, {hash})\nlet previousController: AbortController | null = null\nasync function uncachedFetch(url: string, body: FormData): Promise<string> {\n  previousController?.abort()\n  const {signal} = (previousController = new AbortController())\n  const response = await fetch(url, {method: 'post', body, signal})\n  if (!response.ok) throw new Error('something went wrong')\n  return response.text()\n}\n\nfunction hash(url: string, body: FormData): string {\n  const params = [...body.entries()].toString()\n  return `${url}:${params}`\n}\n\nasync function renderPreview(container: Element) {\n  const commentBody = container.querySelector<HTMLElement>('.comment-body')!\n\n  // eslint-disable-next-line github/unescaped-html-literal\n  commentBody.innerHTML = '<p>Loading preview&hellip;</p>'\n  try {\n    const html = await fetchPreview(container)\n    // eslint-disable-next-line github/unescaped-html-literal\n    commentBody.innerHTML = html || '<p>Nothing to preview</p>'\n    // Alert listeners that content has been fetched and written to the dom\n    fire(container, 'preview:rendered')\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name !== 'AbortError') {\n      // eslint-disable-next-line github/unescaped-html-literal\n      commentBody.innerHTML = '<p>Error rendering preview</p>'\n    }\n  }\n}\n\nobserve('.js-preview-tab', function (tab) {\n  tab.addEventListener('mouseenter', async () => {\n    const container = tab.closest<HTMLElement>('.js-previewable-comment-form')!\n    try {\n      await fetchPreview(container)\n    } catch {\n      // Ignore fetch errors on silent prefetch\n    }\n  })\n})\n\nonKey('keydown', '.js-comment-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement\n\n  // On Apple devices, the Meta (Cmd)+Shift plane is in lower case. So\n  // normalising the key toUpperCase is necessary\n  if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key.toUpperCase() === 'P') {\n    const container = field.closest<HTMLElement>('.js-previewable-comment-form')!\n    if (container.classList.contains('write-selected')) {\n      if (container instanceof TabContainerElement) {\n        container.querySelector<HTMLElement>('.js-preview-tab')!.click()\n      } else {\n        // eslint-disable-next-line github/no-blur\n        field.blur()\n        container.dispatchEvent(\n          new CustomEvent('preview:render', {\n            bubbles: true,\n            cancelable: false,\n          }),\n        )\n      }\n      event.preventDefault()\n      event.stopImmediatePropagation()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '@github-ui/onfocus'\n\n// This regex matches a comment containing only \"-1\", \"+1\", \":-\", \":-1\", \":+\", or \":+1\"\nconst plusOneMarker = /^(\\+1|-1|:\\+1?|:-1?)$/\n\n// Checks to see if a comment is a reaction like comment.\nconst isReactionLikeComment = (text: string): boolean => {\n  let matched = false\n  for (const line of text.split('\\n')) {\n    const l = line.trim()\n    if (!l || l.startsWith('>')) continue\n    // If a line has matched previously, but this one doesnt,\n    // it means the line has more than just a reaction - so return false\n    if (matched && plusOneMarker.test(l) === false) {\n      return false\n    }\n    if (!matched && plusOneMarker.test(l)) {\n      matched = true\n    }\n  }\n  return matched\n}\n\non('focusout', '#new_comment_field', function (event) {\n  const newCommentTextField = event.currentTarget\n\n  const suggestion = newCommentTextField.closest('.js-reaction-suggestion')\n  if (suggestion) {\n    clearReactionSuggestion(suggestion)\n  }\n})\n\non('focusin', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\nonKey('keyup', '#new_comment_field', function (event) {\n  toggleReactionSuggestion(event)\n})\n\n// Toggle reaction suggestion.\nfunction toggleReactionSuggestion(event: Event) {\n  const eventTarget = event.target as HTMLTextAreaElement\n\n  const text = eventTarget.value\n  const reactionSuggestion = eventTarget.closest('.js-reaction-suggestion')\n\n  if (!reactionSuggestion) {\n    return\n  }\n\n  if (isReactionLikeComment(text)) {\n    reactionSuggestion.classList.remove('hide-reaction-suggestion')\n    reactionSuggestion.classList.add('reaction-suggestion')\n    const suggestionText = reactionSuggestion.getAttribute('data-reaction-markup')!\n    reactionSuggestion.setAttribute('data-reaction-suggestion-message', suggestionText)\n  } else {\n    clearReactionSuggestion(reactionSuggestion)\n  }\n}\n\n// Clear reaction suggestion.\nfunction clearReactionSuggestion(reactionSuggestion: Element) {\n  reactionSuggestion.classList.remove('reaction-suggestion')\n  reactionSuggestion.classList.add('hide-reaction-suggestion')\n  reactionSuggestion.removeAttribute('data-reaction-suggestion-message')\n}\n","import {isShortcutAllowed} from '@github-ui/hotkey/keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Support 'c' key to open commits too\non('navigation:keydown', '.js-commits-list-item', function (event) {\n  if (!isShortcutAllowed(event.detail.originalEvent)) return\n\n  if (!(event.target instanceof Element)) return\n  if (event.detail.hotkey === 'c') {\n    event.target.querySelector<HTMLElement>('.js-navigation-open')!.click()\n  }\n})\n","import {onInput} from '@github-ui/onfocus'\n\nonInput('.js-company-name-input', function (event) {\n  const field = event.target as HTMLInputElement\n\n  const form = field.form!\n\n  const corpTOSLink = form.querySelector('.js-corp-tos-link')\n  const regTOSLink = form.querySelector('.js-tos-link')\n\n  if (regTOSLink) {\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.add('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (corpTOSLink) {\n      // TODO Replace with hidden attribute so aria-hidden is not required.\n      /* eslint-disable-next-line github/no-d-none */\n      corpTOSLink.classList.remove('d-none')\n      corpTOSLink.setAttribute('aria-hidden', 'false')\n    }\n  }\n\n  const hints = form.querySelectorAll('.js-company-name-text')\n  if (hints.length === 0) {\n    return\n  }\n\n  for (const hint of hints) {\n    if (field.value) {\n      const hasWording = hint.hasAttribute('data-wording')\n\n      if (hasWording) {\n        const wording = hint.getAttribute('data-wording')!\n        hint.textContent = ` ${wording} ${field.value}`\n      } else {\n        hint.textContent = field.value\n      }\n    } else {\n      hint.textContent = ''\n    }\n  }\n})\n","import {changeValue} from '@github-ui/form-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Update the TOS statement with company name\n//   e.g. By clicking on \"Create an organization\" below, you are agreeing to the Terms of Service and the Privacy Policy on behalf of your company, GitHub, Inc.\nobserve('.js-company-owned:not(:checked)', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector<HTMLInputElement>('.js-company-name-input')!\n    const hint = document.querySelector<HTMLElement>('.js-company-name-text')!\n    const corpTOSLink = document.querySelector<HTMLElement>('.js-corp-tos-link')!\n    const regTOSLink = document.querySelector<HTMLElement>('.js-tos-link')!\n\n    if (input) {\n      if (el.getAttribute('data-optional')) {\n        input.removeAttribute('required')\n      }\n      changeValue(input, '')\n    }\n\n    // TODO Replace with hidden attribute so aria-hidden is not required.\n    /* eslint-disable-next-line github/no-d-none */\n    regTOSLink.classList.remove('d-none')\n    regTOSLink.setAttribute('aria-hidden', 'false')\n    /* eslint-disable-next-line github/no-d-none */\n    corpTOSLink.classList.add('d-none')\n    corpTOSLink.setAttribute('aria-hidden', 'true')\n\n    if (hint) {\n      hint.textContent = ''\n    }\n  },\n})\n\nobserve('.js-company-owned:checked', {\n  constructor: HTMLInputElement,\n  add(el) {\n    const form = el.form!\n    const input = form.querySelector('.js-company-name-input')\n\n    if (input) {\n      input.setAttribute('required', '')\n      fire(input, 'focus')\n      fire(input, 'input')\n    }\n  },\n})\n\n// Make the CorpTOS the default on the \"Business Plus\" AKA Business plan\n// TODO Replace with delegated-events\nobserve('.js-company-owned-autoselect', {\n  constructor: HTMLInputElement,\n  add(field) {\n    const planChoice = field\n\n    function autoselect() {\n      if (planChoice.checked && planChoice.form) {\n        const corpTos = planChoice.form.querySelector<HTMLInputElement>('.js-company-owned')!\n        changeValue(corpTos, true)\n      }\n    }\n\n    planChoice.addEventListener('change', autoselect)\n    autoselect()\n  },\n})\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {IncludeFragmentElement} from '@github/include-fragment-element'\nimport hashChange from './hash-change'\nimport {loadDeferredContentByEvent} from './include-fragment'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet currentlyOpenedDetailsDropdown: HTMLElement | null = null\n\ndocument.addEventListener('keydown', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!event.defaultPrevented && event.key === 'Escape' && currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown.removeAttribute('open')\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// Dismiss open <details> when activating <details> with keyboard.\nobserve('.js-dropdown-details', {\n  subscribe: el => {\n    return compose(fromEvent(el, 'toggle', closeCurrentDetailsDropdown), fromEvent(el, 'toggle', autofocus))\n  },\n})\n\nfunction autofocus({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    const element = target.querySelector<HTMLElement>('[autofocus]')\n    if (element) element.focus()\n  } else {\n    const summary = target.querySelector<HTMLElement>('summary')\n    if (summary) summary.focus()\n  }\n}\n\nfunction closeCurrentDetailsDropdown({currentTarget}: Event) {\n  const target = currentTarget as HTMLElement\n  if (target.hasAttribute('open')) {\n    if (currentlyOpenedDetailsDropdown && currentlyOpenedDetailsDropdown !== target) {\n      currentlyOpenedDetailsDropdown.removeAttribute('open')\n    }\n\n    currentlyOpenedDetailsDropdown = target\n  } else if (target === currentlyOpenedDetailsDropdown) {\n    currentlyOpenedDetailsDropdown = null\n  }\n}\n\nobserve('[data-deferred-details-content-url]:not([data-details-no-preload-on-hover])', {\n  subscribe: el => {\n    const summary = el.querySelector<HTMLElement>('summary')!\n    return fromEvent(summary, 'mouseenter', loadDeferredContentByEvent)\n  },\n})\n\nobserve('[data-deferred-details-content-url]', {\n  subscribe: el => {\n    return fromEvent(el, 'toggle', loadDeferredContentByEvent)\n  },\n})\n\nexport function toggleDetails(details: HTMLElement) {\n  if (details.hasAttribute('open')) {\n    details.removeAttribute('open')\n  } else {\n    details.setAttribute('open', 'open')\n  }\n}\n\n// Additonal button trigger for <details id>\non('click', '[data-toggle-for]', function (event) {\n  const id = event.currentTarget.getAttribute('data-toggle-for') || ''\n  const details = document.getElementById(id)\n  if (!details) return\n  toggleDetails(details)\n})\n\n// Expand collapsed outdated diff if anchor points to it\n//   /github/github/pull/123#discussion-diff-456\n//   /github/github/pull/123#discussion-r345\nhashChange(function ({target}) {\n  if (!target || target.closest('summary')) return\n\n  let node = target.parentElement\n  while (node) {\n    node = node.closest('details')\n    if (node) {\n      if (!node.hasAttribute('open')) {\n        node.setAttribute('open', '')\n      }\n      node = node.parentElement\n    }\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {IncludeFragmentElement} from '@github/include-fragment-element'\nimport RemoteInputElement from '@github/remote-input-element'\nimport {fromEvent} from '@github-ui/subscription'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {onKey} from '@github-ui/onfocus'\n\n// Match deprecated .js-select-menu state classes.\nobserve('details.select-menu details-menu include-fragment', function (el) {\n  const details = el.closest('details')\n  if (!details) return\n  el.addEventListener('loadstart', function () {\n    details.classList.add('is-loading')\n    details.classList.remove('has-error')\n  })\n  el.addEventListener('error', function () {\n    details.classList.add('has-error')\n  })\n  el.addEventListener('loadend', function () {\n    details.classList.remove('is-loading')\n    const filter = details.querySelector('.js-filterable-field')\n    if (filter) fire(filter, 'filterable:change')\n  })\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu .js-filterable-field', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n        fire(filter, 'filterable:change')\n      }\n    })\n  },\n})\n\n// Temporary fix for role=menu containing input\nobserve('details-menu[role=menu] [role=menu]', el => {\n  const menu = el.closest('details-menu[role]')\n  if (menu && menu !== el) menu.removeAttribute('role')\n})\n\n// Clear filter when menu closes.\nobserve('details details-menu remote-input input', {\n  constructor: HTMLInputElement,\n  add(filter) {\n    const details = filter.closest<HTMLElement>('details')!\n    details.addEventListener('toggle', function () {\n      if (!details.hasAttribute('open')) {\n        filter.value = ''\n      }\n    })\n  },\n})\n\n// On form reset fire change on input so details-menu can apply state changes.\nobserve('form details-menu', menu => {\n  const form = menu.closest<HTMLElement>('form')!\n  form.addEventListener('reset', () => {\n    setTimeout(() => resetMenus(form), 0)\n  })\n})\n\n// Re-fires the `change` event for checked radios in a details-menu form.\nfunction resetMenus(form: Element) {\n  const inputs = form.querySelectorAll('details-menu [role=menuitemradio] input[type=radio]:checked')\n  for (const input of inputs) {\n    fire(input, 'change')\n  }\n}\n\n/**\n * Auto trigger the first item on Enter when filterable field is focused.\n */\nonKey('keypress', 'details-menu .js-filterable-field, details-menu filter-input input', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key === 'Enter') {\n    const input = event.currentTarget\n    const menu = (input as HTMLInputElement).closest<HTMLElement>('details-menu')!\n    const firstItem = menu.querySelector('[role^=\"menuitem\"]:not([hidden])')\n    if (firstItem instanceof HTMLElement && !firstItem.classList.contains('select-menu-clear-item')) firstItem.click()\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n// Focus filterable field after selecting an item\non(\n  'details-menu-selected',\n  'details-menu',\n  event => {\n    const menu = event.currentTarget\n\n    const filterableField = (menu as HTMLElement).querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement && filterableField.value) filterableField.focus()\n  },\n  {capture: true},\n)\n\nconst syncInputValue = (event: Event) => {\n  if (!(event.target instanceof Element)) return\n  const id = event.target.getAttribute('data-menu-input')!\n  const el = document.getElementById(id)\n  if (!(el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) return\n  const button =\n    ((event as CustomEvent).detail.relatedTarget as HTMLButtonElement) ||\n    ((event as CustomEvent).detail.item.querySelector('button') as HTMLButtonElement)\n  el.value = button.value\n}\n\n// On selection, sync selectedItem.value to input[id=data-menu-input]\non('itemActivated', '[data-menu-input]', syncInputValue, {capture: true})\n// Delete this line when data-menu-input attributes aren't on details-menu elements anymore\n// app/components/github/menu_component.html.erb\n// app/views/businesses/pre_receive_hook_targets/_environments.html.erb\n// app/views/businesses/pre_receive_hook_targets/_files.html.erb\non('details-menu-selected', '[data-menu-input]', syncInputValue, {capture: true})\n\n// Restore focus on the previously focused element after results have been updated\n// Otherwise return focus to input\nobserve('details-menu remote-input', {\n  constructor: RemoteInputElement,\n  initialize(el) {\n    const resultsContainer = document.getElementById(el.getAttribute('aria-owns') || '')\n    if (!resultsContainer) return\n\n    let activeElementId: string | null = null\n    el.addEventListener('load', () => {\n      if (document.activeElement && resultsContainer.contains(document.activeElement) && document.activeElement.id) {\n        activeElementId = document.activeElement.id\n      } else {\n        activeElementId = null\n      }\n    })\n\n    el.addEventListener('loadend', () => {\n      if (activeElementId) {\n        const focusEl =\n          resultsContainer.querySelector(`#${activeElementId}`) || resultsContainer.querySelector('[role^=\"menu\"]')\n        if (focusEl instanceof HTMLElement) {\n          focusEl.focus()\n        } else if (el.input) {\n          el.input.focus()\n        }\n      }\n    })\n  },\n})\n\non(\n  'details-menu-selected',\n  'details-menu[data-menu-max-options]',\n  event => {\n    const max = +event.currentTarget.getAttribute('data-menu-max-options')!\n    const checkedItems = event.currentTarget.querySelectorAll('[role=\"menuitemcheckbox\"][aria-checked=\"true\"]')\n    const atLimit = max === checkedItems.length\n    event.currentTarget.querySelector<HTMLElement>('[data-menu-max-options-warning]')!.hidden = !atLimit\n    for (const item of event.currentTarget.querySelectorAll<HTMLInputElement>('[role=\"menuitemcheckbox\"] input')) {\n      item.disabled = atLimit && !item.checked\n    }\n  },\n  {capture: true},\n)\n\n// Make js-select-menu & navigation behaviors work with detail select menus\nobserve('details > details-menu', {\n  subscribe(el) {\n    const details = el.closest<HTMLElement>('details')!\n    return fromEvent(details, 'toggle', fireMenuToggleEvent)\n  },\n})\n\n// Fire a menu:[de]activate[d] event depending on the state of the menu.\nasync function fireMenuToggleEvent({currentTarget}: Event) {\n  const details = currentTarget as HTMLElement\n  const isOpen = details.hasAttribute('open')\n\n  if (isOpen) {\n    const filterableField = details.querySelector('.js-filterable-field')\n    if (filterableField instanceof HTMLInputElement) filterableField.focus()\n  }\n\n  fire(details, isOpen ? 'menu:activate' : 'menu:deactivate')\n  await microtask()\n  fire(details, isOpen ? 'menu:activated' : 'menu:deactivated')\n}\n\nobserve('details > details-menu[preload]:not([src])', {\n  subscribe(el) {\n    return fromEvent(el.parentElement!, 'mouseover', function (event) {\n      const menu = event.currentTarget as HTMLElement\n      const loader = menu.querySelector<IncludeFragmentElement>('include-fragment[src]')\n      loader?.load()\n    })\n  },\n})\n","// Behaviors complementing dialogs\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Eagerly load an <include-fragment> inside a <dialog>/<modal-dialog> when a user hovers on the button to click it\nobserve('button[data-show-dialog-id]', button => {\n  button?.addEventListener('mouseenter', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    const dialog = button.ownerDocument.getElementById(id!)\n    dialog?.querySelector('include-fragment[loading=lazy]')?.setAttribute('loading', 'eager')\n  })\n})\n\nobserve('summary[data-show-dialog-id]', button => {\n  button?.addEventListener('click', () => {\n    const id = button.getAttribute('data-show-dialog-id')\n    if (!id) return\n    const dialog = button.ownerDocument.getElementById(id) as HTMLDialogElement\n    dialog?.show()\n  })\n})\n","// Disable\n//\n// Disables clicked buttons with text in `data-disable-with`.\n//\n// `<input type=submit>` or `<button type=submit>`\n//\n// `data-disable-with` - Message to set `<input>` value or `<button>` innerHTML to.\n//\n//     <input type=\"submit\" data-disable-with=\"Submitting...\">\n\nimport {afterRemote} from '@github/remote-form'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst originalText = new WeakMap()\n\n// Get button text.\nfunction getButtonText(el: Element) {\n  if (el instanceof HTMLInputElement) {\n    return el.value || 'Submit'\n  } else {\n    return el.innerHTML || ''\n  }\n}\n\nfunction getButtons(form: HTMLFormElement): Array<HTMLInputElement | HTMLButtonElement> {\n  return [\n    Array.from(form.querySelectorAll('input[type=submit][data-disable-with], button[data-disable-with]')),\n    Array.from(document.querySelectorAll(`button[data-disable-with][form=\"${form.id}\"]`)),\n  ].flat() as Array<HTMLInputElement | HTMLButtonElement>\n}\n\n// Sets a button text.\nfunction setButtonText(el: Element, text: string) {\n  if (el instanceof HTMLInputElement) {\n    el.value = text\n  } else {\n    el.innerHTML = text\n  }\n}\n\non(\n  'submit',\n  'form',\n  function (event) {\n    const form = event.currentTarget as HTMLFormElement\n    for (const button of getButtons(form)) {\n      originalText.set(button, getButtonText(button))\n      const disabledText = button.getAttribute('data-disable-with')\n      if (disabledText) {\n        setButtonText(button, disabledText)\n      }\n      button.disabled = true\n    }\n  },\n  {capture: true},\n)\n\n// Revert a form to it's previous state.\nfunction revert(form: HTMLFormElement) {\n  for (const button of getButtons(form)) {\n    const text = originalText.get(button)\n    if (text != null) {\n      setButtonText(button, text)\n      // Button doesn't have a `data-disable-invalid` property or form is valid\n      if (!button.hasAttribute('data-disable-invalid') || form.checkValidity()) {\n        // Enable the button\n        button.disabled = false\n      }\n      originalText.delete(button)\n    }\n  }\n}\n\n// Enable controls when AJAX request finishes\non('deprecatedAjaxComplete', 'form', function ({currentTarget, target}) {\n  if (currentTarget === target) {\n    revert(currentTarget as HTMLFormElement)\n  }\n})\n\nafterRemote(revert)\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-feature-preview-indicator-container', container => {\n  fetchFeaturePreviewIndicator(container)\n})\n\ntype FeatureResponse = {\n  show_indicator: boolean\n}\n\n// Load the indicator status and update any indicators on the page.\nasync function fetchFeaturePreviewIndicator(container: Element) {\n  const url = container.getAttribute('data-feature-preview-indicator-src')!\n  const show = await fetchIndicator(url)\n  const indicators = container.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = !show\n  }\n}\n\nasync function fetchIndicator(url: string): Promise<boolean> {\n  try {\n    const response = await fetch(url, {headers: {Accept: 'application/json'}})\n    if (!response.ok) return false\n    const json = (await response.json()) as FeatureResponse\n    return json.show_indicator\n  } catch {\n    return false\n  }\n}\n","// Favicon manager\n//\n// Manages light and dark favicon variations, and handles status,\n// showing a , check, or pending dot over depending on the page status\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {resetFavicon, syncFaviconToTheme, updateFaviconByHref} from '@github-ui/favicon'\n\nobserve('[data-favicon-override]', {\n  add(el) {\n    const href = el.getAttribute('data-favicon-override')!\n\n    // allow `remove` for the old element to fire first\n    setTimeout(() => updateFaviconByHref(href))\n  },\n  remove() {\n    resetFavicon()\n  },\n})\n\nsyncFaviconToTheme()\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, syncFaviconToTheme)\n\nwindow.matchMedia('(prefers-color-scheme: dark)').addListener(() => {\n  syncFaviconToTheme()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {remoteForm} from '@github/remote-form'\nimport {sendStats} from '@github-ui/stats'\n\n/*\n  Opens the feature preview dialog to a given feature specified by it's slug\n\n  <button data-feature-preview-trigger-url=\"<%= feature_previews_path(user_id: login, selected_slug: \"my_feature\") %>\">\n    Opt in to the feature preview for My Feature\n  </button>\n\n  You can react to a feature being enrolled/unenrolled by the user with these events:\n\n  - `feature-preview-enroll:my_feature`\n  - `feature-preview-unenroll:my_feature`\n\n  e.g.\n\n  document.addEventListener('feature-preview-enroll:my_feature', () => {\n    optInButton.hidden = true\n    optOutButton.hidden = false\n  })\n\n  document.addEventListener('feature-preview-unenroll:my_feature', () => {\n    optInButton.hidden = false\n    optOutButton.hidden = true\n  })\n*/\n\non('click', '[data-feature-preview-trigger-url]', async event => {\n  const trigger = event.currentTarget\n  const url = trigger.getAttribute('data-feature-preview-trigger-url')!\n\n  const newDialog = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    dialogClass: 'feature-preview-dialog',\n  })\n\n  const closeDetails = trigger.getAttribute('data-feature-preview-close-details')!\n  const closeHmac = trigger.getAttribute('data-feature-preview-close-hmac')!\n\n  newDialog.addEventListener('dialog:remove', () => {\n    sendStats({hydroEventPayload: closeDetails, hydroEventHmac: closeHmac}, true)\n  })\n\n  const indicators = document.querySelectorAll<HTMLElement>('.js-feature-preview-indicator')\n  for (const indicator of indicators) {\n    indicator.hidden = true\n  }\n})\n\nremoteForm('.js-feature-preview-unenroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-unenroll:${feature}`)\n})\n\nremoteForm('.js-feature-preview-enroll', async (form, wants) => {\n  await wants.text()\n  const feature = form.querySelector<HTMLInputElement>('.js-feature-preview-slug')!.value\n  fire(form, `feature-preview-enroll:${feature}`)\n})\n","import type {Attachment} from '@github/file-attachment-element'\nimport {sendStats} from '@github-ui/stats'\n\nexport type UploadError = {\n  status: number\n  body: string\n}\n\n// 204 No Content\ntype S3ResponseData = Record<string, unknown>\n\n// 201 Created\ntype EnterpriseResponseData = {\n  id: number\n  href: string\n}\n\ntype UploadResponseData = EnterpriseResponseData | S3ResponseData\n\ntype S3UploadPolicy = {\n  asset_upload_url: string\n  asset_upload_authenticity_token: string\n  upload_authenticity_token: string\n  upload_url: string\n  form: Record<string, string>\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    id: number\n    href: string\n    name: string\n  }\n}\n\ntype EnterpriseUploadPolicy = {\n  upload_authenticity_token: string\n  upload_url: string\n  form: {[key: string]: string}\n  header: Record<string, string>\n  same_origin: boolean\n  asset: {\n    name: string\n  }\n}\n\nexport type UploadPolicyData = S3UploadPolicy | EnterpriseUploadPolicy\n\nexport type AttachmentUploadDelegate = {\n  attachmentUploadDidStart(attachment: Attachment, policy: UploadPolicyData): void\n  attachmentUploadDidProgress(attachment: Attachment, percent: number): void\n  attachmentUploadDidComplete(attachment: Attachment, policy: UploadPolicyData, data: UploadResponseData): void\n  attachmentUploadDidError(attachment: Attachment, error: UploadError): void\n}\n\nexport default class AttachmentUpload {\n  attachment: Attachment\n  policy: UploadPolicyData\n\n  constructor(attachment: Attachment, policy: UploadPolicyData) {\n    this.attachment = attachment\n    this.policy = policy\n  }\n\n  async process(delegate: AttachmentUploadDelegate): Promise<void> {\n    const startTime = window.performance.now()\n    const headers = new Headers(this.policy.header || {})\n\n    const xhr = new XMLHttpRequest()\n    xhr.open('POST', this.policy.upload_url, true)\n\n    for (const [key, value] of headers) {\n      xhr.setRequestHeader(key, value)\n    }\n\n    xhr.onloadstart = () => {\n      delegate.attachmentUploadDidStart(this.attachment, this.policy)\n    }\n\n    xhr.upload.onprogress = e => {\n      if (e.lengthComputable) {\n        const percent = Math.round((e.loaded / e.total) * 100)\n        delegate.attachmentUploadDidProgress(this.attachment, percent)\n      }\n    }\n\n    await send(xhr, uploadForm(this.attachment, this.policy))\n\n    if (xhr.status === 204) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, {})\n    } else if (xhr.status === 201) {\n      markComplete(this.policy)\n      delegate.attachmentUploadDidComplete(this.attachment, this.policy, JSON.parse(xhr.responseText))\n    } else {\n      delegate.attachmentUploadDidError(this.attachment, {status: xhr.status, body: xhr.responseText})\n    }\n\n    const endTime = window.performance.now()\n    const timeDiff = endTime - startTime\n    const uploadTiming: PlatformBrowserPerformanceUploadTiming = {\n      duration: timeDiff,\n      size: this.attachment?.file?.size,\n      fileType: this.attachment?.file?.type,\n      success: xhr.status === 204 || xhr.status === 201,\n    }\n    sendStats({uploadTiming}, true)\n  }\n}\n\nfunction send(xhr: XMLHttpRequest, body: FormData): Promise<XMLHttpRequest> {\n  return new Promise((resolve, reject) => {\n    xhr.onload = () => resolve(xhr)\n    xhr.onerror = reject\n    xhr.send(body)\n  })\n}\n\nfunction uploadForm(attachment: Attachment, policy: UploadPolicyData): FormData {\n  const form = new FormData()\n  if (policy.same_origin) {\n    // eslint-disable-next-line github/authenticity-token\n    form.append('authenticity_token', policy.upload_authenticity_token)\n  }\n  for (const key in policy.form) {\n    form.append(key, policy.form[key]!)\n  }\n  form.append('file', attachment.file)\n  return form\n}\n\nfunction markComplete(policy: UploadPolicyData) {\n  // @ts-expect-error `asset_upload_url` is not defined on policy type\n  const url = typeof policy.asset_upload_url === 'string' ? policy.asset_upload_url : null\n  const token =\n    // @ts-expect-error `asset_upload_authenticity_token` is not defined on policy type\n    typeof policy.asset_upload_authenticity_token == 'string' ? policy.asset_upload_authenticity_token : null\n\n  if (!(url && token)) return\n\n  const form = new FormData()\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n\n  fetch(url, {\n    method: 'PUT',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n","import type {Attachment, default as FileAttachmentElement} from '@github/file-attachment-element'\nimport type {AttachmentUploadDelegate, UploadError, UploadPolicyData} from './attachment-upload'\n\nimport AttachmentUpload from './attachment-upload'\nimport type Batch from './batch'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nexport async function upload(batch: Batch, container: FileAttachmentElement) {\n  const delegate = createDelegate(batch, container)\n  for (const attachment of batch.attachments) {\n    const policy = await validate(batch, attachment, container)\n    if (!policy) return\n    try {\n      const uploader = new AttachmentUpload(attachment, policy)\n      await uploader.process(delegate)\n    } catch {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      resetState(container, 'is-failed')\n      return\n    }\n  }\n}\n\nasync function validate(batch: Batch, attachment: Attachment, container: Element): Promise<UploadPolicyData | null> {\n  const form = policyForm(attachment, container)\n  const preprocess: Array<Promise<unknown>> = []\n  fire(container, 'upload:setup', {batch, attachment, form, preprocess})\n\n  try {\n    await Promise.all(preprocess)\n    const response = await fetch(policyRequest(form, container))\n    if (response.ok) {\n      return await response.json()\n    }\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    const body = await response.text()\n    const status = response.status\n    const {state, messaging} = policyErrorState({status, body}, attachment.file)\n    resetState(container, state, messaging)\n  } catch {\n    batch.setAttachmentAsFailed(attachment)\n    fire(container, 'upload:invalid', {batch, attachment})\n    resetState(container, 'is-failed')\n  }\n  return null\n}\n\nfunction policyForm(attachment: Attachment, container: Element): FormData {\n  const token = container.querySelector<HTMLInputElement>('.js-data-upload-policy-url-csrf')!.value\n  const repoId = container.getAttribute('data-upload-repository-id')\n  const subjectType = container.getAttribute('data-subject-type')\n  const subject = container.getAttribute('data-subject-param')\n  const container_type = container.getAttribute('data-upload-container-type')\n  const container_id = container.getAttribute('data-upload-container-id')\n  const file = attachment.file\n\n  const form = new FormData()\n  form.append('name', file.name)\n  form.append('size', String(file.size))\n  form.append('content_type', file.type)\n  // eslint-disable-next-line github/authenticity-token\n  form.append('authenticity_token', token)\n  if (subjectType) form.append('subject_type', subjectType)\n  if (subject) form.append('subject', subject)\n  if (repoId) {\n    form.append('repository_id', repoId)\n  }\n  if (attachment.directory) {\n    form.append('directory', attachment.directory)\n  }\n\n  if (container_type) {\n    form.append('upload_container_type', container_type)\n  }\n\n  if (container_type && container_id) {\n    form.append('upload_container_id', container_id)\n  }\n\n  return form\n}\n\nfunction policyRequest(form: FormData, container: Element): Request {\n  return new Request(container.getAttribute('data-upload-policy-url')!, {\n    method: 'POST',\n    body: form,\n    credentials: 'same-origin',\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n}\n\nfunction createDelegate(batch: Batch, container: Element): AttachmentUploadDelegate {\n  return {\n    attachmentUploadDidStart(attachment, policy) {\n      attachment.saving(0)\n      resetState(container, 'is-uploading')\n      fire(container, 'upload:start', {batch, attachment, policy})\n    },\n    attachmentUploadDidProgress(attachment, percent) {\n      attachment.saving(percent)\n      fire(container, 'upload:progress', {batch, attachment})\n    },\n    attachmentUploadDidComplete(attachment, policy, result) {\n      attachment.saved(savedAttributes(result, policy))\n      fire(container, 'upload:complete', {batch, attachment})\n      if (batch.isFinished()) {\n        resetState(container, 'is-default')\n      }\n    },\n    attachmentUploadDidError(attachment, response) {\n      batch.setAttachmentAsFailed(attachment)\n      fire(container, 'upload:error', {batch, attachment})\n      const {state} = policyErrorState(response)\n      resetState(container, state)\n    },\n  }\n}\n\n// Extracts the uploaded attachment's attributes that reference the stored\n// file on the server. These can come from the upload response in the case of\n// our Enterprise Alambic file server or from the initial policy creation,\n// prior to file upload, in the case of Amazon S3 used by github.com.\nfunction savedAttributes(\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  result: any,\n  policy: UploadPolicyData,\n): {id: string | null; href: string | null; name: string | null} {\n  const id =\n    // @ts-expect-error id is not defined on asset type\n    (result.id == null ? null : String(result.id)) || (policy.asset.id == null ? null : String(policy.asset.id))\n  const href =\n    (typeof result.href === 'string' ? result.href : null) ||\n    // @ts-expect-error href is not defined on asset type\n    (typeof policy.asset.href === 'string' ? policy.asset.href : null)\n  return {id, href, name: policy.asset.name}\n}\n\ntype PolicyErrorMessaging = {\n  message: string\n  target: string\n}\n\ntype PolicyErrorState = {\n  state: string\n  messaging?: PolicyErrorMessaging\n}\n\n// Create a CSS class name that matches the errors coming from the policy\n// POST. The /upload/policies/* resource returns a 422 response with a JSON\n// body describing why the policy is invalid.\nfunction policyErrorState(response: UploadError, file?: File): PolicyErrorState {\n  // Amazon S3 error.\n  if (response.status === 400) {\n    return {state: 'is-bad-file'}\n  }\n\n  if (response.status !== 422) {\n    return {state: 'is-failed'}\n  }\n\n  const hash = JSON.parse(response.body)\n\n  // If we have the expected JSON response with errors key, try to find the right\n  // error message. If there's a server-side error or user got logged out, we\n  // won't have hash.errors, so skip this and return generic failure message.\n  if (!hash || !hash.errors) {\n    return {state: 'is-failed'}\n  }\n\n  for (const error of hash.errors) {\n    switch (error.field) {\n      case 'size': {\n        const size = file ? file.size : null\n        if (size != null && size === 0) {\n          return {state: 'is-empty'}\n        }\n        return {\n          state: 'is-too-big',\n          messaging: {\n            message: trimSizeErrorMessage(error.message),\n            target: '.js-upload-too-big',\n          },\n        }\n      }\n      case 'file_count':\n        return {state: 'is-too-many'}\n      case 'width':\n      case 'height':\n        return {state: 'is-bad-dimensions'}\n      case 'name':\n        if (error.code === 'already_exists') {\n          return {state: 'is-duplicate-filename'}\n        }\n        return {state: 'is-bad-file'}\n      case 'content_type':\n        return {state: 'is-bad-file'}\n      case 'uploader_id':\n        return {state: 'is-bad-permissions'}\n      case 'repository_id':\n        return {state: 'is-repository-required'}\n      case 'format':\n        return {state: 'is-bad-format'}\n    }\n  }\n  return {state: 'is-failed'}\n}\n\n/**\nDue to limitations on the server, size errors may be returned with the string\n'size ' prepended on the error message we want from the server. If the message\nstarts with `size` then chop it off with its leading space and return the error\nwe want from the server.\n\nExamples:\n\n'size Yowza that's a big file' => 'Yowza that's a big file'\n'Yowza that's a big file' => 'Yowza that's a big file'\n */\nconst trimSizeErrorMessage = (message: string) => {\n  return message.startsWith('size') ? message.substring(5) : message\n}\n\nconst possibleStates = [\n  'is-default',\n  'is-uploading',\n  'is-bad-file',\n  'is-duplicate-filename',\n  'is-too-big',\n  'is-too-many',\n  'is-hidden-file',\n  'is-failed',\n  'is-bad-dimensions',\n  'is-empty',\n  'is-bad-permissions',\n  'is-repository-required',\n  'is-bad-format',\n]\n\nexport function resetState(container: Element, state: string, messaging?: PolicyErrorMessaging) {\n  if (messaging) {\n    const {message, target} = messaging\n    const el = container.querySelector(target)\n    if (el) el.innerHTML = message\n  }\n  container.classList.remove(...possibleStates)\n  container.classList.add(state)\n}\n","import type {Attachment} from '@github/file-attachment-element'\n\n// A collection of files to be uploaded together. A batch reports progress of\n// the collection rather than each individual file.\nexport default class Batch {\n  attachments: Attachment[]\n  size: number\n  total: number\n  failedAttachments: Attachment[]\n\n  constructor(attachments: Attachment[]) {\n    this.attachments = attachments\n    this.failedAttachments = []\n\n    // How many total files to upload.\n    this.size = this.attachments.length\n\n    // How many total bytes to upload.\n    this.total = sum(this.attachments, a => a.file.size)\n  }\n\n  // The completion percentage of the batch as a whole.\n  //\n  // Returns a Number between 0 and 100.\n  percent(): number {\n    const bytes = (a: Attachment) => (a.file.size * a.percent) / 100\n    const total = sum(this.attachments, bytes)\n    return Math.round((total / this.total) * 100)\n  }\n\n  uploaded(): number {\n    const value = (a: Attachment) => (a.isSaved() ? 1 : 0)\n    return sum(this.attachments, value)\n  }\n\n  // The completion state of the batch.\n  //\n  // Returns true when all files have been uploaded.\n  isFinished(): boolean {\n    return this.attachments.every(attachment => this.failedAttachments.includes(attachment) || attachment.isSaved())\n  }\n\n  // Mark an attachment as failed in this batch\n  setAttachmentAsFailed(attachment: Attachment) {\n    if (this.attachments.includes(attachment) && !this.failedAttachments.includes(attachment)) {\n      this.failedAttachments.push(attachment)\n    }\n  }\n}\n\nfunction sum<T>(items: T[], map: (item: T) => number): number {\n  return items.reduce((total, item) => total + map(item), 0)\n}\n","import {resetState, upload} from '../upload/batch-upload'\nimport Batch from '../upload/batch'\nimport type FileAttachmentElement from '@github/file-attachment-element'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Synchronize element state with primer styles. This should be replaced with CSS.\nobserve('file-attachment[hover]', {\n  add(el) {\n    el.classList.add('dragover')\n  },\n  remove(el) {\n    el.classList.remove('dragover')\n  },\n})\n\n// Cancel empty drops after filtering out hidden dot files.\non('file-attachment-accept', 'file-attachment', function (event) {\n  const {attachments} = event.detail\n  if (attachments.length === 0) {\n    resetState(event.currentTarget, 'is-hidden-file')\n    event.preventDefault()\n  }\n})\n\n// Upload batched files after passing validation.\non('file-attachment-accepted', 'file-attachment', function (event) {\n  // CodeEditor will hide this element if it wants to handle uploads\n  const dragAndDropLabel = event.currentTarget.querySelector<HTMLElement>('.drag-and-drop')\n  if (dragAndDropLabel && dragAndDropLabel.hidden) {\n    return\n  }\n\n  const {attachments} = event.detail\n  upload(new Batch(attachments), event.currentTarget as FileAttachmentElement)\n})\n\n// Transfer click on button to hidden file input.\non('click', 'button[data-file-attachment-for]', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const inputId = button.getAttribute('data-file-attachment-for')\n  const input = document.querySelector<HTMLInputElement>(`input[type=file]#${inputId}`)!\n  input.click()\n})\n\nlet count = 0\n\nobserve('file-attachment', {\n  add(el) {\n    if (count++ === 0) {\n      document.addEventListener('drop', onDocumentDrop)\n      document.addEventListener('dragover', onDocumentDragover)\n    }\n    const form = el.closest('form')\n    if (form) {\n      form.addEventListener('reset', onFormReset)\n    }\n  },\n  remove(el) {\n    if (--count === 0) {\n      document.removeEventListener('drop', onDocumentDrop)\n      document.removeEventListener('dragover', onDocumentDragover)\n    }\n\n    const form = el.closest('form')\n    if (form) {\n      form.removeEventListener('reset', onFormReset)\n    }\n  },\n})\n\nfunction hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\n// Ignores accidental drops that miss the textarea.\nfunction onDocumentDrop(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Prevent accidental drops until we're over a textarea.\nfunction onDocumentDragover(event: DragEvent) {\n  const transfer = event.dataTransfer\n  if (transfer && hasFile(transfer)) {\n    event.preventDefault()\n  }\n}\n\n// Parent form has been reset. Reset uploadable state back to default.\nfunction onFormReset({currentTarget}: Event) {\n  const container = (currentTarget as Element).querySelector<HTMLElement>('file-attachment')!\n  resetState(container, 'is-default')\n}\n","type Predicate = (el: Element, query: string) => boolean | null\ntype Options = {limit?: number | null}\n\nexport function filterList(list: Element, query: string, isVisible: Predicate, options: Options = {}): number {\n  const limit = options.limit ?? Infinity\n  let visible = 0\n  for (const item of list.children) {\n    const show = isVisible(item, query)\n    if (show == null) {\n      // ignore\n    } else if (show && visible < limit) {\n      visible++\n      toggle(item as HTMLElement, true)\n    } else {\n      toggle(item as HTMLElement, false)\n    }\n  }\n  return visible\n}\n\nfunction toggle(el: HTMLElement, show: boolean) {\n  el.style.display = show ? '' : 'none'\n  el.hidden = !show\n}\n","import FilterInputElement from '@github/filter-input-element'\nimport {announce} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Use data- attributes on the <filter-input> element to construct the options arguments to pass to\n// announce().\nfunction announceOptions(filterElement: FilterInputElement) {\n  const ariaLiveRegionId = filterElement.getAttribute('data-aria-live-element')\n  if (!ariaLiveRegionId) return {}\n\n  const ariaLiveRegion = document.getElementById(ariaLiveRegionId)\n  if (!ariaLiveRegion) return {}\n\n  return {element: ariaLiveRegion}\n}\n\non('filter-input-updated', 'filter-input', event => {\n  const filterElement = event.target as FilterInputElement\n  const input = filterElement.input\n  if (!(document.activeElement && document.activeElement === input)) return\n\n  const {count, total} = event.detail\n  const options = announceOptions(filterElement)\n\n  // eslint-disable-next-line i18n-text/no-en\n  announce(`Found ${count} out of ${total} ${total === 1 ? 'item' : 'items'}`, options)\n})\n\non(\n  'toggle',\n  'details',\n  event => {\n    // Wait for the next click to ensure that focus has left input\n    setTimeout(() => resetFilter(event.target as Element), 0)\n  },\n  {capture: true},\n)\n\non(\n  'tab-container-changed',\n  'tab-container',\n  event => {\n    if (!(event.target instanceof HTMLElement)) return\n    const {relatedTarget: panel} = event.detail\n    const filterInput = event.target.querySelector('filter-input')\n    if (panel && filterInput instanceof FilterInputElement) {\n      filterInput.setAttribute('aria-owns', panel.id)\n    }\n  },\n  {capture: true},\n)\n\nfunction resetFilter(target: Element) {\n  const filterInput = target.querySelector<FilterInputElement>('filter-input')\n  if (filterInput && !target.hasAttribute('open')) {\n    filterInput.reset()\n  }\n}\n","import type {TextScore} from '@github-ui/fuzzy-filter'\nimport {compare} from '@github-ui/fuzzy-filter'\nimport {filterSort} from '@github-ui/filter-sort'\n\nconst originalOrder = new WeakMap<Element, HTMLElement[]>()\n\ninterface FilterOptions {\n  limit?: number | null\n  sortKey: (item: HTMLElement) => TextScore | null | undefined\n}\n\n// Filters and sorts list element items against a text query. For use with lists that\n// are already in the DOM, not with lists of results that are changed dynamically\n// via ajax.\n//\n// Returns Number of visible items.\nexport function filterSortList(list: Element, string: string, options: FilterOptions): number {\n  const query = string.toLowerCase()\n  const limit = options.limit\n\n  let allItems = originalOrder.get(list)\n  const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n  const children = Array.from(list.children)\n  if (!allItems) {\n    allItems = Array.from(list.children) as HTMLElement[]\n    originalOrder.set(list, allItems)\n  } else if (list.classList.contains('filter-sort-list-refresh')) {\n    // if we get this class, it means the items in the list might have been changed\n    // in this case, we check if there are new items to be added to the cache\n    // this is the case when creating a new label from the label picker (see app/assets/modules/github/issues/labels.ts)\n    list.classList.remove('filter-sort-list-refresh')\n    const currentItems = Array.from(list.children) as HTMLElement[]\n    for (const currentItem of currentItems) {\n      if (!allItems.includes(currentItem)) {\n        allItems.push(currentItem)\n      }\n    }\n  }\n  for (const item of children) {\n    list.removeChild(item)\n    if (item instanceof HTMLElement) item.style.display = ''\n  }\n\n  const found = query ? filterSort(allItems, options.sortKey, compare) : allItems\n  const limited = limit == null ? found : found.slice(0, limit)\n  const visible = limited.length\n  const results = document.createDocumentFragment()\n  for (const item of limited) {\n    results.appendChild(item)\n  }\n\n  // This ensures that checked input before and after filtering is the same one\n  // See https://github.com/github/github/issues/88129#issuecomment-434839397\n  let inputStateReset = false\n  if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n    for (const checkedInput of results.querySelectorAll('input[type=\"radio\"]:checked')) {\n      if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n        checkedInput.checked = false\n        inputStateReset = true\n      }\n    }\n  }\n\n  list.appendChild(results)\n\n  // Dispatch a change event after render for details-menu or any other code reacting to the input state\n  if (checkedInputBeforeFilter && inputStateReset) {\n    checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n  }\n\n  return visible\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\n// Only login, name & selected are attributes required on both server side and payload rendered elements.\n// IE if we construct a user element from a .js-filterable-suggested-user HTMLElement.\ninterface User {\n  id?: string\n  type?: string\n  login: string\n  name: string\n  selected: boolean\n  disabled?: boolean\n  element?: HTMLElement\n  description?: string\n  avatar?: string\n  class?: string\n  suggestion?: boolean\n}\n\ninterface Data {\n  suggestions: User[]\n  users: User[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: User[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is user.id (as a string) to the rendered element\n  userResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\nasync function getData(list: Element, queryText: string, typeAhead: boolean): Promise<Data> {\n  if (typeAhead && !typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const data = await fetchQueryIfNeeded(list, queryText, typeAhead)\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n\n  if (hasPreRenderedData) {\n    data.suggestions = getPreRenderedUsers(list, typeAhead)\n  }\n\n  return data\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string, typeAhead: boolean): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    const trimmedText = queryText.trim()\n    if (typeAheadData.lastSearchText === trimmedText) return typeAheadData.lastSearchResult\n    const isInitialLoad = typeAheadData.lastSearchText === undefined\n    typeAheadData.lastSearchText = trimmedText\n\n    const inputId = list.getAttribute('data-filterable-for') || ''\n    const inputElement = document.getElementById(inputId)\n\n    // Abort any old requests (if any)\n    abortController.abort()\n    if (trimmedText === '') {\n      typeAheadData.lastSearchResult = {suggestions: [], users: []}\n    } else {\n      // Abort controller needs to be re-created, there exists one per abort.\n      abortController = new AbortController()\n      const requestHeaders = {\n        headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n        signal: abortController.signal,\n      }\n\n      const params = url.searchParams || new URLSearchParams()\n      params.set('q', queryText)\n      params.set('typeAhead', 'true')\n      url.search = params.toString()\n\n      if (!isInitialLoad) {\n        inputElement?.classList.add('is-loading')\n      }\n\n      const response = await fetch(url.toString(), requestHeaders)\n      typeAheadData.lastSearchResult = await response.json()\n    }\n\n    inputElement?.classList.remove('is-loading')\n    return typeAheadData.lastSearchResult\n  } else {\n    const requestHeaders = {headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'}}\n    const response = await fetch(url.toString(), requestHeaders)\n    return await response.json()\n  }\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-suggested-user`\n// If any are found, they will be added to the API returned data.\n// This users are distinct from the 'suggestions' currently returned through the reviewers API call.\nfunction getPreRenderedUsers(list: Element, typeAhead: boolean): User[] {\n  const data = []\n  // Add all server rendered users to the `suggestions` list (if any).\n  const suggestedUsers = list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (suggestedUsers.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const suggestedUser of list.querySelectorAll<HTMLElement>('.js-filterable-suggested-user')) {\n      suggestedUser.classList.remove('js-filterable-suggested-user')\n\n      // Deconstruct the element into a <User> object\n      data.push({\n        name: suggestedUser.querySelector('.js-description')!.textContent!,\n        login: suggestedUser.querySelector('.js-username')!.textContent!,\n        selected: suggestedUser.getAttribute('aria-checked') === 'true',\n        element: suggestedUser,\n        suggestion: true,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (typeAhead) {\n    const typeAheadData = typeAheadCache.get(list)!\n    if (suggestedUsers.length > 0) {\n      typeAheadData.cachedSuggestions = data\n      typeAheadData.userResultCache.clear()\n    }\n\n    return typeAheadData.cachedSuggestions\n  }\n\n  return data\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {suggestions: [], users: []},\n    cachedSuggestions: [],\n    userResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function substringMemoryFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  currentQueryForList.set(list, queryText)\n\n  await verifySsoSession()\n\n  const showSuggestionsHeaderOnLoad = list.hasAttribute('data-filterable-show-suggestion-header')\n  const typeAhead = list.hasAttribute('data-filterable-type-ahead')\n\n  let data = cache.get(list)\n\n  if (!data) {\n    try {\n      data = await getData(list, queryText, typeAhead)\n      if (!typeAhead) cache.set(list, data)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // This logic only exists when type-ahead is disabled\n  if (!typeAhead && currentQueryForList.get(list) !== queryText) {\n    return -1\n  }\n\n  const limit = options.limit\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // an index of items already rendered into DOM due to being preselected\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('input[type=hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (typeAhead || el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  let visible = 0\n\n  const queryTextEmpty = queryText.trim() === ''\n  const items = document.createDocumentFragment()\n  const suggestionsDivider = list.querySelector<HTMLElement>('.js-divider-suggestions')\n  const restDivider = list.querySelector<HTMLElement>('.js-divider-rest')\n  const typeAheadData = typeAheadCache.get(list)\n\n  function addItem(user: User) {\n    const containsQueryText = `${user.login} ${user.name}`.toLowerCase().trim().includes(queryText)\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || user.selected || user.suggestion\n    if (shouldGenerate) {\n      const item = createReviewerItem(user, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  let anyVisibleNonSelectedSuggestions = false\n\n  // We show suggestions header if we\n  // 1) Actually have suggestions, or\n  // 2) If we still want to show suggestions title (declared by the attribute), but don't ever have any suggestions\n  // (ie data.suggestions is undefined), the criteria simply becomes whether or not there is any query text.\n  if (suggestionsDivider && (data.suggestions?.length > 0 || (showSuggestionsHeaderOnLoad && data.users.length > 0))) {\n    const suggestions = data.suggestions ?? []\n    const selectedSuggestions = suggestions.filter(u => u.selected)\n    const nonSelectedSuggestions = suggestions.filter(u => !u.selected)\n\n    for (const u of selectedSuggestions) {\n      addItem(u)\n    }\n\n    // Put the suggestions after the already assigned users\n    items.appendChild(suggestionsDivider)\n    const preSuggestionsVisibleCount = visible\n    for (const u of nonSelectedSuggestions) {\n      addItem(u)\n    }\n    anyVisibleNonSelectedSuggestions = visible > preSuggestionsVisibleCount\n\n    suggestionsDivider.hidden = !anyVisibleNonSelectedSuggestions || (typeAhead && !queryTextEmpty)\n\n    // Special case where we want to force show the suggestions header even without suggestions in the payload.\n    if (showSuggestionsHeaderOnLoad && data.users.length > 0) {\n      suggestionsDivider.hidden = !queryTextEmpty\n    }\n  }\n\n  if (restDivider) {\n    items.appendChild(restDivider)\n  }\n\n  const preUsersVisibleCount = visible\n  for (const u of data.users) {\n    addItem(u)\n  }\n\n  if (restDivider) {\n    restDivider.hidden = preUsersVisibleCount === visible || !anyVisibleNonSelectedSuggestions\n  }\n\n  list.append(items)\n  return visible\n}\n\nfunction createReviewerItem(\n  user: User,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (user.element != null) {\n    return user.element\n  }\n\n  if (typeAheadData?.userResultCache.has(user.id!)) {\n    return typeAheadData.userResultCache.get(user.id!)!\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox], input[type=radio]')!\n\n  if (user.type) {\n    input.name = `reviewer_${user.type}_ids[]`\n  }\n  input.value = user.id!\n\n  const inputKey = `${input.name}${user.id}`\n  let selected = user.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey].remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  if (user.disabled) {\n    item.setAttribute('aria-disabled', 'true')\n  }\n\n  const login = li.querySelector('.js-username')\n  if (login) login.textContent = user.login\n  const fullName = li.querySelector('.js-description')\n  if (fullName) fullName.textContent = user.name\n  const description = li.querySelector('.js-extended-description')\n  if (description) {\n    if (user.description) {\n      description.textContent = user.description\n    } else {\n      description.remove()\n    }\n  }\n  const avatar = li.querySelector<HTMLImageElement>('.js-avatar')!\n  if (user.login === 'Copilot') {\n    const copilotAvatar = li.querySelector<HTMLImageElement>('.js-copilot-avatar')!\n    copilotAvatar.hidden = false\n    avatar.hidden = true\n  } else {\n    avatar.className = `${avatar.className} ${user.class}`\n    avatar.src = user.avatar!\n  }\n  user.element = item\n\n  typeAheadData?.userResultCache.set(user.id!, item)\n\n  return user.element\n}\n","import verifySsoSession from './sso'\n\ninterface FilterOptions {\n  limit?: number | null\n}\n\ninterface Label {\n  id: string\n  name: string\n  htmlName: string\n  color: string\n  selected: boolean\n  element?: HTMLElement\n  description?: string\n}\n\ninterface Data {\n  labels: Label[]\n}\n\ninterface TypeAheadData {\n  lastSearchResult: Data\n  lastSearchText?: string\n  cachedSuggestions: Label[]\n\n  // Used to cache a user ID to a pre-existing rendered element (if they exist in multiple search results).\n  // This is needed to persist their selected state across multiple searches.\n  // Key is label.id (as a string) to the rendered element\n  labelResultCache: Map<string, HTMLElement>\n}\n\n// Used to abort any previous type-ahead request if not needed\nlet abortController = new AbortController()\n\nconst typeAheadCache = new WeakMap<Element, TypeAheadData>()\nconst cache = new WeakMap<Element, Data>()\nconst currentQueryForList = new WeakMap<Element, string>()\n\n// This is like `substringFilterList`, but instead of filtering down direct\n// children of a DOM element, obtain most data from a JSON payload and search\n// within that instead, only generating actual DOM elements when they are\n// \"revealed\" by matching the search term. Similarly, remove elements from the\n// DOM when they don't match a search term and they're not selected.\n//\n// Also, because elements might already exist in the DOM because of their\n// pre-selected state, merge those elements with the data coming from JSON.\nexport async function labelsTypeaheadFilterList(\n  list: Element,\n  queryText: string,\n  options: FilterOptions,\n): Promise<number> {\n  await verifySsoSession()\n\n  currentQueryForList.set(list, queryText)\n  let data = cache.get(list)\n\n  // If we don't have data, fetch it\n  if (!data) {\n    try {\n      data = await getData(list, queryText)\n    } catch (error) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      if (error.name === 'AbortError') {\n        // A stale type-ahead request was aborted\n        return -1\n      } else {\n        throw error\n      }\n    }\n  }\n\n  // create an index of items already rendered into DOM - already selected items\n  const existingElements: {[key: string]: HTMLInputElement} = {}\n  for (const existing of list.querySelectorAll<HTMLInputElement>('label[aria-checked=true] > div > input[hidden]')) {\n    existingElements[`${existing.name}${existing.value}`] = existing\n  }\n\n  const template = list.querySelector<HTMLTemplateElement>('template')!\n\n  // remove all non-selected items after the template element\n  let cutoffPoint = template.nextElementSibling\n  while (cutoffPoint) {\n    const el = cutoffPoint\n    cutoffPoint = el.nextElementSibling\n    if (\n      el instanceof HTMLElement &&\n      (el.getAttribute('aria-checked') === 'true' || el.classList.contains('select-menu-divider'))\n    ) {\n      el.hidden = true\n    } else {\n      el.remove()\n    }\n  }\n\n  // create new list of items\n  const items = document.createDocumentFragment()\n  const typeAheadData = typeAheadCache.get(list)\n  const limit = options.limit\n  let visible = 0\n\n  function addItem(label: Label) {\n    const containsQueryText = `${label.name}`.toLowerCase().trim().includes(queryText.toLocaleLowerCase())\n    const matching = !(limit != null && visible >= limit) && containsQueryText\n    const shouldGenerate = matching || label.selected\n    if (shouldGenerate) {\n      const item = createLabelItem(label, template, existingElements, typeAheadData)\n      item.hidden = !matching\n      if (matching) visible++\n      items.appendChild(item)\n    }\n  }\n\n  for (const l of data.labels) {\n    addItem(l)\n  }\n\n  // add new items to DOM\n  list.append(items)\n  return visible\n}\n\nfunction initializeTypeAheadCache(list: Element) {\n  typeAheadCache.set(list, {\n    lastSearchResult: {labels: []},\n    cachedSuggestions: [],\n    labelResultCache: new Map<string, HTMLElement>(),\n  })\n}\n\nasync function getData(list: Element, queryText: string): Promise<Data> {\n  if (!typeAheadCache.has(list)) {\n    initializeTypeAheadCache(list)\n  }\n\n  const hasPreRenderedData = list.hasAttribute('data-filterable-data-pre-rendered')\n  if (hasPreRenderedData) {\n    return getPreRenderedLabels(list)\n  }\n\n  return await fetchQueryIfNeeded(list, queryText)\n}\n\n// This function will try to find any server side rendered users through the tag `.js-filterable-label`\n// If any are found, they will be added to the API returned data.\nfunction getPreRenderedLabels(list: Element): Data {\n  const data = []\n  // Add all server rendered labels to our data\n  const labels = list.querySelectorAll<HTMLElement>('.js-filterable-label')\n  list.removeAttribute('data-filterable-data-pre-rendered')\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  if (labels.length > 0) {\n    // Read the server-side rendered elements that need to be added to suggestions.\n    // This is a work-around to allow the server-side rendered elements to work with the filtering.\n    for (const renderedLabel of list.querySelectorAll<HTMLElement>('.js-filterable-label')) {\n      renderedLabel.classList.remove('js-filterable-label')\n\n      // Deconstruct the element into a <Label> object\n      data.push({\n        id: renderedLabel.querySelector('input[hidden]')!.getAttribute('value') || '',\n        name: renderedLabel.querySelector('input[hidden]')!.getAttribute('data-label-name') || '',\n        htmlName: renderedLabel.querySelector('.js-label-name-html')!.textContent!,\n        description: renderedLabel.querySelector('.js-label-description')?.textContent || '',\n        color: renderedLabel.querySelector('.js-label-color')!.getAttribute('label-color') || '',\n        selected: renderedLabel.getAttribute('aria-checked') === 'true',\n        element: renderedLabel,\n      })\n    }\n  }\n\n  // If the list has been refreshed, or first time loaded, this will be non-zero, and therefore we clear the array and re-add the new items\n  const typeAheadData = typeAheadCache.get(list)!\n  if (data.length > 0) {\n    typeAheadData.cachedSuggestions = data\n    typeAheadData.lastSearchText = ''\n    typeAheadData.lastSearchResult = {labels: data}\n  }\n\n  return typeAheadData.lastSearchResult\n}\n\nasync function fetchQueryIfNeeded(list: Element, queryText: string): Promise<Data> {\n  const url = new URL(list.getAttribute('data-filterable-src') || '', window.location.origin)\n  if (url.pathname === '/') throw new Error('could not get data-filterable-src')\n\n  const typeAheadData = typeAheadCache.get(list)!\n  const trimmedText = queryText.trim()\n  if (typeAheadData.lastSearchText === trimmedText) {\n    return typeAheadData.lastSearchResult\n  }\n\n  typeAheadData.lastSearchText = trimmedText\n\n  const inputId = list.getAttribute('data-filterable-for') || ''\n  const inputElement = document.getElementById(inputId)\n\n  // Abort any old requests (if any)\n  abortController.abort()\n  // Abort controller needs to be re-created, there exists one per abort.\n  abortController = new AbortController()\n  const requestHeaders = {\n    headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n    signal: abortController.signal,\n  }\n\n  const params = url.searchParams || new URLSearchParams()\n  params.set('q', queryText)\n  params.set('typeAhead', 'true')\n  url.search = params.toString()\n\n  inputElement?.classList.add('is-loading')\n\n  const response = await fetch(url.toString(), requestHeaders)\n  typeAheadData.lastSearchResult = await response.json()\n\n  inputElement?.classList.remove('is-loading')\n  return typeAheadData.lastSearchResult\n}\n\nfunction createLabelItem(\n  label: Label,\n  template: HTMLTemplateElement,\n  existingElements: Record<string, HTMLElement>,\n  typeAheadData: TypeAheadData | undefined,\n): HTMLElement {\n  if (label.element != null) {\n    return label.element\n  }\n\n  const resultCache = typeAheadData?.labelResultCache.get(label.id)\n  if (resultCache) {\n    return resultCache\n  }\n\n  const li = template.content.cloneNode(true) as HTMLElement\n  const input = li.querySelector<HTMLInputElement>('input[type=checkbox]')!\n\n  input.value = label.id!\n  input.setAttribute('data-label-name', label.name)\n\n  const inputKey = `${input.name}${label.id}`\n  let selected = label.selected\n  if (existingElements[inputKey]) {\n    selected = true\n    existingElements[inputKey].remove()\n    delete existingElements[inputKey]\n  }\n\n  const item = li.querySelector<HTMLElement>('[role^=menuitem]')!\n  if (selected) {\n    item.setAttribute('aria-checked', 'true')\n    input.checked = true\n  }\n\n  const id = li.querySelector('.js-label-id')\n  if (id) id.setAttribute('data-name', label.id)\n\n  const color = li.querySelector('.js-label-color')\n  if (color) {\n    const newStyle = color.getAttribute('style')?.replace('background-color:', `background-color:#${label.color};`)\n    color.setAttribute('style', newStyle!)\n  }\n\n  const htmlName = li.querySelector('.js-label-name-html')\n  if (htmlName) htmlName.innerHTML = label.htmlName!\n\n  const labelDescription = li.querySelector('.js-label-description')\n  if (labelDescription) {\n    if (label.description) {\n      labelDescription.textContent = label.description\n    } else {\n      labelDescription.remove()\n    }\n  }\n\n  label.element = item\n  typeAheadData?.labelResultCache.set(label.id, item)\n\n  return label.element\n}\n","// Filterable Behavior\n//\n// Automatically filters and sorts a list of items against a text field.\n//\n// Markup\n//\n// * js-filterable-field  - Set on field to enable filtering.\n// * data-filterable-for  - Set to ID of input field to bind too.\n// * data-filterable-type - Filtering type. Either \"prefix\", \"substring\", \"fuzzy\", or \"fuzzy-prio\". Defaults to \"prefix\"\n// The difference between \"fuzzy\" and \"fuzzy-prio\", is the latter supports an additional attribute `data-prio-filter-value`\n// to specify a custom priority value that will be weighted more heavily when determining the score.\n//\n// <input id=\"file-filter-field\" class=\"js-filterable-field\" autocomplete=\"off\">\n//\n// <ul data-filterable-for=\"file-filter-field\" data-filterable-type=\"fuzzy\">\n//   <li>Foo</li>\n//   <li>Bar</li>\n//   <li>Baz</li>\n// </ul>\n//\n//\n// Events\n//\n// filterable:change\n//\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** List container Element\n// * **Context info**\n//   * relatedTarget - Input field Element\n//\n// $('ul').on('filterable:change', function() {\n//   console.log('order changed')\n// })\n//\n\nimport {addThrottledInputEventListener, removeThrottledInputEventListener} from '../throttled-input'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {announce} from '@github-ui/aria-live'\nimport {filterList} from '../filter-list'\nimport {filterSortList} from '../filter-sort-list'\nimport {fuzzyScore} from '@github-ui/fuzzy-filter'\nimport {microtask} from '@github-ui/eventloop-tasks'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {substringMemoryFilterList} from '../substring-memory-filter-list'\nimport {labelsTypeaheadFilterList} from '../labels-typeahead-filter-list'\n\nobserve('.js-filterable-field', {\n  constructor: HTMLInputElement,\n  initialize(field) {\n    if (!field.autocomplete) {\n      field.autocomplete = 'off'\n    }\n\n    // A null value will default to whatever is specified within `throttled-input.ts`\n    const throttleWaitInMs = field.hasAttribute('type-ahead') ? 200 : null\n    let value = field.value\n\n    async function onInputChange(input: HTMLInputElement | HTMLTextAreaElement) {\n      if (value === input.value) return\n      value = input.value\n      await microtask()\n      fire(input, 'filterable:change')\n    }\n\n    async function onFocus() {\n      value = field.value\n      await microtask()\n      fire(field, 'filterable:change')\n    }\n\n    return {\n      add(el) {\n        el.addEventListener('focus', onFocus)\n        addThrottledInputEventListener(el, onInputChange, {wait: throttleWaitInMs})\n        if (document.activeElement === el) onFocus()\n      },\n      remove(el) {\n        el.removeEventListener('focus', onFocus)\n        removeThrottledInputEventListener(el, onInputChange)\n      },\n    }\n  },\n})\n\n// Trigger 'filterable:change' on an input after any\n// direct val() calls\non('filterable:change', '.js-filterable-field', async function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const queryString = target.value.trim().toLowerCase()\n  const filterable = document.querySelectorAll(`[data-filterable-for=\"${target.id}\"]`)\n  for (const list of filterable) {\n    const visible = await filter(list, queryString)\n    if (visible === -1) return\n    if (document.activeElement && target === document.activeElement) {\n      announce(`${visible} results found.`)\n    }\n\n    list.dispatchEvent(\n      new CustomEvent('filterable:change', {\n        bubbles: true,\n        cancelable: false,\n        detail: {\n          inputField: target,\n        },\n      }),\n    )\n  }\n})\n\nfunction defaultText(content: Element): string {\n  return content.hasAttribute('data-filter-value')\n    ? content.getAttribute('data-filter-value')!.toLowerCase().trim()\n    : content.textContent!.toLowerCase().trim()\n}\n\nasync function filter(list: Element, queryString: string): Promise<number> {\n  const limit = parseInt(list.getAttribute('data-filterable-limit')!, 10) || null\n\n  let visible = 0\n  switch (list.getAttribute('data-filterable-type')) {\n    case 'fuzzy-prio': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const prioText = item.getAttribute('data-prio-filter-value')!.toLowerCase().trim()\n        const text = item.textContent!.toLowerCase().trim()\n\n        // Increase the weighting of the score of the custom priority value\n        const prioScore = fuzzyScore(prioText, searchQuery, 0.01) * 2\n        let score = fuzzyScore(text, searchQuery, 0.01)\n        if (prioScore > score) score = prioScore\n\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'fuzzy': {\n      const searchQuery = queryString.toLowerCase()\n      const sortKey = (item: HTMLElement) => {\n        const text = defaultText(item)\n        const score = fuzzyScore(text, searchQuery)\n        return score > 0 ? {score, text} : null\n      }\n      visible = filterSortList(list, queryString, {limit, sortKey})\n      break\n    }\n    case 'substring':\n      visible = filterList(list, queryString.toLowerCase(), substring, {limit})\n      break\n    case 'substring-memory':\n      visible = await substringMemoryFilterList(list, queryString, {limit})\n      break\n    case 'labels-typeahead':\n      visible = await labelsTypeaheadFilterList(list, queryString, {limit})\n      break\n    default:\n      visible = filterList(list, queryString.toLowerCase(), prefix, {limit})\n      break\n  }\n\n  list.classList.toggle('filterable-active', queryString.length > 0)\n  list.classList.toggle('filterable-empty', visible === 0)\n\n  return visible\n}\n\nfunction prefix(el: Element, queryString: string): boolean {\n  return el.textContent!.toLowerCase().trim().startsWith(queryString)\n}\n\n// Does the text of the given element match the given query string?\n//\n// Note: you can add a `data-skip-substring-filter` attribute to exclude an\n// element from substring filtering.\n//\n// Returns Boolean or null, if element cannot be filtered\nfunction substring(el: Element, queryString: string): boolean | null {\n  if (el.hasAttribute('data-skip-substring-filter')) return null\n  if (el.classList.contains('select-menu-no-results')) return null\n  const target = el.querySelector('[data-filterable-item-text]') || el\n  return target.textContent!.toLowerCase().trim().includes(queryString)\n}\n\n// Toggle new create new item form when filter doesn't match any existing items\non('filterable:change', 'details-menu .select-menu-list', function (event) {\n  const list = event.currentTarget\n  const form = list.querySelector('.js-new-item-form')\n\n  if (form) {\n    toggleForm(list, form, event.detail.inputField.value)\n  }\n})\n\nfunction toggleForm(list: Element, form: Element, filterText: string) {\n  const show = filterText.length > 0 && !itemExists(list, filterText)\n  list.classList.toggle('is-showing-new-item-form', show)\n\n  if (!show) return\n\n  form.querySelector<HTMLElement>('.js-new-item-name')!.textContent = filterText\n\n  const item = form.querySelector('.js-new-item-value')\n  if (item instanceof HTMLInputElement || item instanceof HTMLButtonElement) {\n    item.value = filterText\n  }\n}\n\n// Detect if filtered item is already present in the list.\n//\n// container  - filterable list element\n// filterText - String value of filter field\n//\n// Returns true if item already exists, otherwise false.\nfunction itemExists(container: Element, filterText: string): boolean {\n  for (const item of container.querySelectorAll('[data-menu-button-text]')) {\n    const text = (item as HTMLElement).textContent!.toLowerCase().trim()\n    if (text === filterText.toLowerCase()) {\n      return true\n    }\n  }\n  return false\n}\n\n// Hoist empty class to parent for styling.\nobserve('tab-container .select-menu-list .filterable-empty, details-menu .select-menu-list .filterable-empty', {\n  add(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.add('filterable-empty')\n  },\n  remove(el) {\n    const list = el.closest<HTMLElement>('.select-menu-list')!\n    list.classList.remove('filterable-empty')\n  },\n})\n","// Installs observer to account for sticky/fixed overlay offsets when navigating\n// to a fragment.\nimport {computeFixedYOffset, scrollToFragmentTarget} from '../sticky-scroll-into-view'\nimport hashChange from './hash-change'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction scrollTargetIntoViewIfNeeded() {\n  const root = document.firstElementChild! as HTMLHtmlElement\n  if (root.classList.contains('js-skip-scroll-target-into-view')) return\n\n  if (computeFixedYOffset(document)) {\n    scrollToFragmentTarget(document)\n  }\n}\n\nhashChange(scrollTargetIntoViewIfNeeded)\n\non('click', 'a[href^=\"#\"]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  // this defers the execution of scrollTargetIntoViewIfNeeded until after all the click stuff happened, including after scroll\n  setTimeout(scrollTargetIntoViewIfNeeded, 0)\n})\n","import {loaded} from '@github-ui/document-ready'\n\n// Flash\n//\n// Fades out and removes flash element from the page on close.\n//\n// Markup\n//\n//     <div class=\"flash-messages\">\n//       <div class=\"flash\">\n//         <%= octicon('x', :class => 'flash-close js-flash-close') %>\n//         Flash Message\n//       </div>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Only headings and focusable elements are allowed to be passed in as targets,\n// otherwise they won't exist in the allFocusableElements array.\ntype FocusableElementsAndHeadings =\n  | HTMLButtonElement\n  | HTMLAnchorElement\n  | HTMLInputElement\n  | HTMLSelectElement\n  | HTMLTextAreaElement\n  | HTMLHeadingElement\n\n// Ensures that focus is not lost when a user dismisses a flash message.\n// Finds the closest, previous focusable element or <h1> that is not hidden or disabled and moves focus to that element.\n\nconst focusPreviousElementInDOM = (targetElement: FocusableElementsAndHeadings) => {\n  // Get all focusable elements and headings (h1-h3) in the DOM that are not disabled or hidden\n  const allFocusableElementsAndHeadings: FocusableElementsAndHeadings[] = Array.from(\n    document.querySelectorAll(\n      'h1:not([hidden]),h2:not([hidden]),h3:not([hidden]),button:not([disabled]):not([hidden]),a:not([hidden]),input:not([disabled]):not([hidden]), select:not([disabled]):not([hidden]), textarea:not([disabled]):not([hidden]), [tabindex]:not([tabindex=\"-1\"]):not([disabled]):not([hidden])',\n    ),\n  )\n\n  const visibleElements = Array.from(allFocusableElementsAndHeadings).filter(element => {\n    // Check if the element and it's parent element is visible and not disabled or hidden\n    if (\n      !element.getAttribute('aria-hidden') &&\n      !(element.offsetWidth <= 0 && element.offsetHeight <= 0) &&\n      (element?.offsetParent as HTMLElement)?.style.visibility !== 'hidden'\n    ) {\n      return true\n    }\n  })\n\n  const indexOfElement = visibleElements.indexOf(targetElement)\n\n  if (indexOfElement !== -1 && indexOfElement > 0) {\n    // Get the element right before the target element\n    const elementBefore = visibleElements[indexOfElement - 1]\n    // Forces the heading to have a tabindex of -1 so that it can be focused\n    if (\n      elementBefore &&\n      (elementBefore.tagName === 'H1' || elementBefore.tagName === 'H2' || elementBefore.tagName === 'H3')\n    ) {\n      elementBefore.setAttribute('tabindex', '-1')\n    }\n    elementBefore?.focus()\n  }\n}\n\non('click', '.js-flash-close', function (event) {\n  const container = event.currentTarget.closest('.flash-messages')\n\n  const dismissButton = event.target as HTMLButtonElement\n  focusPreviousElementInDOM(dismissButton)\n\n  const flash = event.currentTarget.closest('.flash')\n  flash!.remove()\n\n  if (container && !container.querySelector('.flash')) {\n    container.remove()\n  }\n})\n\n/**\n * Inserts an sr-only span with a non-breaking space into the flash content.\n * The sr-only ensures there are no visual changes.\n/** */\nexport function insertNonBreakingSpace(flashAlertContent: HTMLElement) {\n  const nonBreakingSpace = document.createTextNode('\\u00A0')\n  const span = document.createElement('span')\n  span.classList.add('sr-only')\n  span.appendChild(nonBreakingSpace)\n\n  flashAlertContent.appendChild(span)\n}\n\n/**\n * Contains accessibility logic for server-rendered flash.\n * This JS ensures that the flash content with '.js-flash-alert[role=\"alert\"]' is announced.\n * See: https://github.com/github/accessibility/issues/290\n * Please consult #accessibility if you have any questions.\n */\n;(async function () {\n  await loaded\n\n  const flashAlertContent: HTMLElement | null = document.querySelector('.js-flash-alert[role=\"alert\"]')\n  if (flashAlertContent) {\n    // Delay and non-breaking space to ensure that screen readers announce this alert.\n    setTimeout(() => {\n      insertNonBreakingSpace(flashAlertContent)\n    }, 200)\n  }\n})()\n","import {deleteCookie, getCookies} from '@github-ui/cookies'\nimport {TemplateInstance} from '@github/template-parts'\n\nconst ALLOWED_FLASH_COOKIES = ['flash-notice', 'flash-error', 'flash-message', 'flash-warn']\n\n// Find cookies named something like \"flash-notice\" and render the\n// .js-flash-template template for them.\nexport function displayFlash(el: HTMLTemplateElement) {\n  for (const {key, value} of ALLOWED_FLASH_COOKIES.flatMap(getCookies)) {\n    deleteCookie(key)\n    let message\n    try {\n      message = atob(decodeURIComponent(value))\n    } catch {\n      continue\n    }\n    el.after(new TemplateInstance(el, {className: key, message}))\n  }\n}\n","import {displayFlash} from '../flash'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('template.js-flash-template', {\n  constructor: HTMLTemplateElement,\n  add(el) {\n    displayFlash(el)\n  },\n})\n","// Delayed Focus Events\n//\n// Provides a family cancelable focus/blur that trigger slightly later.\n// This makes it easier to build menus that only display when you are\n// focused in on a field.\n//\n// Events\n//\n// `focusin:delay`\n//\n// Fired when field is being focused for the first time. Will not fire\n// if field is blurred, and refocused in less than 200ms.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** Yes\n// * **Target** Element that is receiving focus.\n//\n// `focusout:delay`\n//\n// Fired when field has been blurred for the first time. Won't fire if\n// the field is not refocused in under 200ms or the `focusout:delay` is\n// canceled.\n//\n// * **Synchronicity** Sync\n// * **Bubbles** Yes\n// * **Cancelable** No\n// * **Target** Element that is receiving focus.\n//\n// ```javascript\n// on('focusin:delay', function() {\n//   showAutocompletions()\n// })\n//\n// on('focusout:delay', function() {\n//   hideAutocompletions()\n// })\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n\nconst focused = new WeakMap()\n\n// We use the \"focus\" and \"blur\" event in the capture phase because Firefox\n// historically had a limitation with \"focusin\" and \"focusout\" not bubbling.\ndocument.addEventListener(\n  'focus',\n  function (event: Event) {\n    const target = event.target\n    if (target instanceof Element && !focused.get(target)) {\n      fire(target, 'focusin:delay')\n      focused.set(target, true)\n    }\n  },\n  {capture: true},\n)\n\ndocument.addEventListener(\n  'blur',\n  function (event: Event) {\n    setTimeout(function () {\n      const target = event.target\n      if (target instanceof Element && target !== document.activeElement) {\n        fire(target, 'focusout:delay')\n        focused.delete(target)\n      }\n    }, 200)\n  },\n  {capture: true},\n)\n","import {announce} from '@github-ui/aria-live'\nimport {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-form-toggle-target', async function (form, wants) {\n  try {\n    await wants.text()\n  } catch {\n    return\n  }\n\n  const container = form.closest<HTMLElement>('.js-form-toggle-container')!\n  const button = container.querySelector<HTMLElement>('.js-form-toggle-target[hidden]')\n  button!.hidden = false\n  form.hidden = true\n  const feedback = form.getAttribute('data-sr-feedback') || ''\n  if (feedback) {\n    announce(feedback)\n  }\n  button?.querySelector<HTMLInputElement>('input[type=submit], button[type=submit]')?.focus()\n})\n","import FuzzyListElement from '../fuzzy-list-element'\nimport {announce} from '@github-ui/aria-live'\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction noticeHandler(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n\n  const options = {} as {element?: HTMLElement}\n  if (event.target instanceof FuzzyListElement) {\n    options.element = event.target.ariaLiveElement\n  }\n  announce(`${event.detail} results found.`, options)\n}\n\nobserve('fuzzy-list', {\n  constructor: FuzzyListElement,\n  subscribe: fuzzyList => fromEvent(fuzzyList, 'fuzzy-list-sorted', noticeHandler),\n})\n","import {addThrottledInputEventListener} from '../throttled-input'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport type {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\n\n// Toggle verify SSL visibility for https web hook URLs\nobserve('.js-hook-url-field', {\n  constructor: HTMLInputElement,\n  add(input) {\n    function checkUrl() {\n      const form = input.form\n      if (!form) return\n      let url\n      try {\n        // eslint-disable-next-line no-restricted-syntax\n        url = new URL(input.value)\n      } catch {\n        // Do nothing.\n      }\n      const sslFields = form.querySelector('.js-ssl-hook-fields')\n      if (sslFields instanceof HTMLElement) {\n        sslFields.hidden = !(url && 'https:' === url.protocol)\n      }\n    }\n\n    addThrottledInputEventListener(input, checkUrl)\n    checkUrl()\n  },\n})\n\nfunction chooseEvents(selector: string): void {\n  const events = document.querySelectorAll<HTMLInputElement>('.js-hook-event-checkbox')\n  for (const eventCheckbox of events) {\n    eventCheckbox.checked = eventCheckbox.matches(selector)\n  }\n}\n\non('change', '.js-hook-event-choice', function (event) {\n  const checkbox = event.currentTarget as HTMLInputElement\n  const customIsSelected = checkbox.checked && checkbox.value === 'custom'\n  const hookEventsField = checkbox.closest('.js-hook-events-field')\n  if (hookEventsField) hookEventsField.classList.toggle('is-custom', customIsSelected)\n\n  const hookEventSelectorCollection = document.getElementsByClassName(\n    'js-hook-event-selector',\n  ) as HTMLCollectionOf<HTMLElement>\n  const hookEventSelector = hookEventSelectorCollection[0] as HTMLElement\n  if (hookEventSelector && customIsSelected) {\n    hookEventSelector.hidden = false\n  } else if (hookEventSelector && !customIsSelected && hookEventSelector.hidden === false) {\n    hookEventSelector.hidden = true\n  }\n\n  if (checkbox.checked) {\n    if (customIsSelected) {\n      const hookWildcardEvent = document.querySelector<HTMLInputElement>('.js-hook-wildcard-event')!\n      hookWildcardEvent.checked = false\n    } else if (checkbox.value === 'push') {\n      chooseEvents('[value=\"push\"]')\n    } else if (checkbox.value === 'all') {\n      chooseEvents('.js-hook-wildcard-event')\n    }\n  }\n})\n\n// Load more delivery logs\non('click', '.js-hook-deliveries-pagination-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  button.disabled = true\n  const wrapper = button.parentElement!\n\n  const url = button.getAttribute('data-url')!\n  wrapper.before(await fetchSafeDocumentFragment(document, url))\n  wrapper.remove()\n})\n\n// Redeliver Payload Button\nremoteForm('.js-redeliver-hook-form', async function (form, wants) {\n  let response\n  try {\n    response = await wants.html()\n  } catch {\n    form.classList.add('failed')\n    return\n  }\n\n  // replace the whole deliveries index\n  const deliveriesDetails = document.querySelector<HTMLElement>(`.js-hook-deliveries-container`)!\n  deliveriesDetails.replaceWith(response.html)\n})\n\nfunction registerInsecureSslVerificationDialog() {\n  const dialog = document.getElementById('insecure_ssl_verification') as ModalDialogElement | HTMLDialogElement | null\n  const submitButton = document.getElementById('insecure_ssl_verification_submit') as HTMLInputElement | null\n  const disallowInsecureRadio = document.getElementById('insecure_ssl_0') as HTMLInputElement | null\n  const allowInsecureRadio = document.getElementById('insecure_ssl_1') as HTMLInputElement | null\n\n  if (dialog && submitButton && disallowInsecureRadio && allowInsecureRadio) {\n    // on radio buttons, 'change' only fires when they become checked\n    allowInsecureRadio.addEventListener('change', event => {\n      event.stopPropagation()\n      disallowInsecureRadio.checked = true\n      if (dialog instanceof HTMLDialogElement) {\n        dialog.showModal()\n      } else {\n        dialog.show()\n      }\n    })\n\n    submitButton.addEventListener('click', () => {\n      allowInsecureRadio.checked = true\n    })\n    dialog.addEventListener('dialog:remove', () => {\n      allowInsecureRadio.checked = true\n    })\n  }\n}\n\nregisterInsecureSslVerificationDialog()\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Behaviors related to special cases in GFM content\n// Toggles quoted email reply content\non('click', '.email-hidden-toggle', function (event) {\n  // assert nextElementSibling is .email-hidden-reply\n  const replyContainer = event.currentTarget.nextElementSibling\n  if (!(replyContainer instanceof HTMLElement)) return\n\n  replyContainer.style.display = ''\n  replyContainer.classList.toggle('expanded')\n\n  event.preventDefault()\n})\n","import {observeHotkey} from '@github-ui/hotkey/observer'\n\n// calling this here keeps the sideffect in behaviors and out of @github-ui/hotkey\nobserveHotkey('[data-hotkey]')\n","import {loaded} from '@github-ui/document-ready'\nimport {sendPageView} from '@github-ui/hydro-analytics'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {getCurrentReactAppName, getSoftNavMechanism} from '@github-ui/soft-nav/utils'\nimport type {Context} from '@github/hydro-analytics-client'\n\nfunction getContext(context: Context = {}) {\n  const reactAppName = getCurrentReactAppName()\n  if (!reactAppName) return context\n\n  return {\n    ...context,\n    react_app: reactAppName,\n  }\n}\n\n;(async function () {\n  // Turbo loads should be treated like pageloads\n  document.addEventListener(SOFT_NAV_STATE.FRAME_UPDATE, () => sendPageView(getContext({turbo: 'true'})))\n\n  document.addEventListener(SOFT_NAV_STATE.SUCCESS, () => {\n    if (getSoftNavMechanism() === 'turbo.frame') {\n      return\n    } else {\n      sendPageView(getContext({turbo: 'true'}))\n    }\n  })\n\n  // Send a page view as soon as the page is loaded\n  await loaded\n  sendPageView(getContext())\n})()\n","import type {Context} from '@github/hydro-analytics-client'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendEvent} from '@github-ui/hydro-analytics'\n\non('click', '[data-octo-click]', function (event) {\n  const targetEl = event.currentTarget\n  if (!(targetEl instanceof HTMLElement)) {\n    return\n  }\n\n  const eventType = targetEl.getAttribute('data-octo-click') || ''\n  const context: Context = {}\n\n  if (targetEl.hasAttribute('data-ga-click')) {\n    const gaEvent = targetEl.getAttribute('data-ga-click')!\n    const parts = gaEvent.split(',')\n    context.category = parts[0]!.trim()\n    context.action = parts[1]!.trim()\n  }\n\n  if (targetEl.hasAttribute('data-octo-dimensions')) {\n    const dimensionsList = targetEl.getAttribute('data-octo-dimensions')!.split(',')\n\n    for (const dimensionPair of dimensionsList) {\n      const [key, value] = dimensionPair.split(/:(.+)/)\n      if (key) {\n        context[key] = value || ''\n      }\n    }\n  }\n  sendEvent(eventType, context)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {sendData} from '../hydro-tracking'\nimport {debugHydroPayload} from './console-debug'\n\non('click', '[data-hydro-click]', function (event) {\n  const el = event.currentTarget\n  const payload = el.getAttribute('data-hydro-click') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  debugHydroPayload('hydro-debug.click', payload)\n  sendData(payload, hmac, hydroClientContext)\n})\n","// Handle immediate updates returned from the server on ajax success.\n//\n// See ShowPartial#render_immediate_partials\n\nimport {remoteForm} from '@github/remote-form'\nimport {replaceContent} from '@github-ui/updatable-content'\n\nremoteForm('.js-immediate-updates', async function (form, wants) {\n  let updateContent\n\n  try {\n    const response = await wants.json()\n    updateContent = response.json.updateContent\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.json) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      updateContent = error.response.json.updateContent\n    }\n  }\n\n  if (updateContent) {\n    for (const selector in updateContent) {\n      const html = updateContent[selector]\n      const el = document.querySelector(selector)\n      if (el instanceof HTMLElement) {\n        replaceContent(el, html)\n      }\n    }\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('[data-indeterminate]', {\n  constructor: HTMLInputElement,\n  initialize(el) {\n    el.indeterminate = true\n  },\n})\n","import {dialog} from '@github-ui/details-dialog'\nimport {eventToHotkeyString} from '@github-ui/hotkey'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {isFormField} from '@github-ui/form-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {isShortcutAllowed} from '@github-ui/hotkey/keyboard-shortcuts-helper'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nlet shortcutModalShown = false\n\nasync function showKeyboardShortcuts() {\n  if (shortcutModalShown) return\n  shortcutModalShown = true\n\n  const metaKeyboardShortcuts = document.querySelector<HTMLMetaElement>('meta[name=github-keyboard-shortcuts]')!\n  const options = {contexts: metaKeyboardShortcuts.content}\n  const url = `/site/keyboard_shortcuts?${new URLSearchParams(options).toString()}`\n\n  const shortcutModal = await dialog({\n    content: fetchSafeDocumentFragment(document, url),\n    labelledBy: 'keyboard-shortcuts-heading',\n  })\n  shortcutModal.style.width = '800px'\n  shortcutModal.addEventListener(\n    'dialog:remove',\n    function () {\n      shortcutModalShown = false\n    },\n    {once: true},\n  )\n}\n\n// Toggles ajax request to display keyboard shortcuts.\n//\n// Add a class of `js-keyboard-shortcuts` to get this behavior on your page.\non('click', '.js-keyboard-shortcuts', showKeyboardShortcuts)\n\nif (!isFeatureEnabled('react_keyboard_shortcuts_dialog')) {\n  document.addEventListener('keydown', (event: Event) => {\n    if (!(event instanceof KeyboardEvent)) return\n    if (!isShortcutAllowed(event)) return\n\n    if (event.target instanceof Node && isFormField(event.target)) return\n    if (eventToHotkeyString(event) !== 'Shift+?') return\n    showKeyboardShortcuts()\n  })\n}\n\nobserve('.js-modifier-key', {\n  constructor: HTMLElement,\n  add(container) {\n    if (/Macintosh/.test(navigator.userAgent)) {\n      let shortcut = container.textContent\n      if (shortcut) {\n        shortcut = shortcut.replace(/ctrl/, '')\n        shortcut = shortcut.replace(/alt/, '')\n        container.textContent = shortcut\n      }\n    }\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Length-limited input with warning.\n//\n// Limit the length of user input and provide a warning with a character count\n// when the user approaches the length limit.\n//\n// Three classes must be set.\n//  - js-length-limited-input.\n//  - js-length-limited-input-container.\n//  - js-length-limited-input-warning (probably also hidden by default).\n//\n// Two data attributes should be set on .js-length-limited-input:\n//  - data-warning-text, a string template for the warning message.\n//    Use `{{remaining}}` to interpolate the number of characters remaining.\n//  - data-input-max-length.\n//\n// @example\n// ```html\n//    <dd class=\"js-length-limited-input-container\">\n//      <input type=\"text\"\n//             class=\"js-length-limited-input\"\n//             data-warning-text=\"You have {{remaining}} characters remaining\"\n//             data-input-max-length=\"160\">\n//\n//      <p class=\"js-length-limited-input-warning d-none\">\n//      </p>\n//    </dd>\n// ```\nfunction displayLengthWarning(event: Event) {\n  // The user input field (<input>, <textarea>, etc)\n  const inputField = event.currentTarget\n  if (!(inputField instanceof HTMLInputElement || inputField instanceof HTMLTextAreaElement)) return\n\n  // The character limit, set in data attribute \"max-length\"\n  const maxLength = parseInt(inputField.getAttribute('data-input-max-length') || '', 10)\n\n  // The remaining length to start showing the warning for, defaults to 5\n  const warningLength = parseInt(inputField.getAttribute('data-warning-length') || '', 10) || 5\n\n  // The user input field (<input>, <textarea>, etc)\n  const inputValue = inputField.value\n\n  // New lines need to be counted as two characters. They are by the server.\n  const inputValueWithNewLinesFix = inputValue.replace(/(\\r\\n|\\n|\\r)/g, '\\r\\n')\n\n  // Characters remaining before the limit is reached\n  let remainingLength = maxLength - inputValueWithNewLinesFix.length\n\n  // HTML maxLength attribute does not count carriage returns correctly.\n  // It is also inconsistent between Chrome and Firefox\n  // and therefore can't be used bugfree without browser sniffing\n  // Creating our own maxLength implementation instead.\n  if (remainingLength <= 0) {\n    let truncatedInputValue = inputValueWithNewLinesFix.substr(0, maxLength)\n    // Trim trailing \\r so we don't truncate in the middle of a \\r\\n newline\n    if (truncatedInputValue.endsWith('\\r')) {\n      truncatedInputValue = truncatedInputValue.substr(0, maxLength - 1)\n      remainingLength = 1\n    } else {\n      remainingLength = 0\n    }\n    inputField.value = truncatedInputValue\n  }\n\n  // The warning message to display after the remaining character count\n  const warningText = inputField.getAttribute('data-warning-text')!\n\n  // The container enclosing the length-limited input field\n  const inputContainer = inputField.closest<HTMLElement>('.js-length-limited-input-container')!\n\n  // The container for the warning message\n  const warningArea = inputContainer.querySelector<HTMLElement>('.js-length-limited-input-warning')!\n\n  if (remainingLength <= warningLength) {\n    warningArea.textContent = warningText.replace(new RegExp('{{remaining}}', 'g'), `${remainingLength}`)\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.remove('d-none')\n  } else {\n    warningArea.textContent = ''\n    /* eslint-disable-next-line github/no-d-none */\n    warningArea.classList.add('d-none')\n  }\n}\n\nobserve('.js-length-limited-input', {\n  add(el) {\n    el.addEventListener('input', displayLengthWarning)\n    el.addEventListener('change', displayLengthWarning)\n  },\n  remove(el) {\n    el.removeEventListener('input', displayLengthWarning)\n    el.removeEventListener('change', displayLengthWarning)\n  },\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\n\non('click', '.js-member-search-filter', function (event) {\n  event.preventDefault()\n\n  const filter = event.currentTarget.getAttribute('data-filter')!\n  const menu = event.currentTarget.closest<HTMLElement>('[data-filter-on]')!\n  const filterOn = menu.getAttribute('data-filter-on')!\n  const field = document.querySelector<HTMLInputElement>('.js-member-filter-field')!\n\n  // Remove any existing filters on the opened dropdown.\n  const currentValue = field.value\n\n  // Regex allows a-z chars, underscores & strings wrapped in single quotes (required for custom roles)\n  const regex = new RegExp(`${filterOn}:(?:[a-z]|_|((').*(')))+`)\n  const currentFilters = currentValue.toString().trim().replace(regex, '')\n\n  field.value = `${currentFilters} ${filter}`.replace(/\\s\\s/, ' ').trim()\n  field.focus()\n  fire(field, 'input')\n})\n","// Notice Behavior\n//\n// Add basic data-remote success hook for hiding notice on ajax\n// success.\n//\n// Markup\n//\n//     <div class=\"js-notice\">\n//       Hey!\n//       <a href=\"/dismiss\" class=\"js-notice-dismiss\">\n//         Dismiss\n//       </a>\n//     </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from '../behaviors/ajax-error'\n\nremoteForm('.js-notice-dismiss', async function (form, send) {\n  await send.text()\n  const notice = form.closest<HTMLElement>('.js-notice')!\n  notice.remove()\n})\n\non('submit', '.js-notice-dismiss-remote', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    showGlobalError()\n    return\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  } else {\n    const notice = form.closest<HTMLElement>('.js-notice')!\n    notice.remove()\n  }\n})\n","// If the current page is openable in github.dev, do so on click.\n// This would be achievable without any custom JS by just using\n// data-hotkey except for two things:\n//  - PJAX and other replaceState-triggered location updates like\n//    the `y` hotkey need to be respected.\n//  - the editor cares about the hash of the page.\n// So we'll construct the href client-side.\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nfunction isVisible(el: HTMLElement) {\n  try {\n    const rect = el.getBoundingClientRect()\n    if (rect.height === 0 && rect.width === 0) {\n      return false\n    }\n    if (el.style.opacity === '0' || el.style.visibility === 'hidden') {\n      return false\n    }\n  } catch {\n    // fall through to return true below\n  }\n  return true\n}\n\non('click', '.js-github-dev-shortcut', function (event) {\n  event.preventDefault()\n  // If content exists in any visble comment field, prompt before navigating to github.dev\n  for (const el of document.querySelectorAll<HTMLTextAreaElement>('textarea.js-comment-field')) {\n    // eslint-disable-next-line i18n-text/no-en\n    if (el.value && isVisible(el) && !confirm('Are you sure you want to open github.dev?')) {\n      return\n    }\n  }\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n  window.location.href = target.href\n})\n\non('click', '.js-github-dev-new-tab-shortcut', function (event) {\n  // Assumption: the href of the shortcut is the base URL for\n  // the serverless editor, e.g. https://github.dev/\n  const target = event.currentTarget as HTMLAnchorElement\n  target.pathname = window.location.pathname\n  target.hash = window.location.hash\n})\n","// Append any window.location.hash changes to the permalink.\n//\n// For example, if you're viewing:\n// /github/linguist/blob/master/lib/linguist/languages.yml#L12\n//\n// You probably want the permalink to preserve the #L12, and go to:\n// /github/linguist/blob/SHA/lib/linguist/languages.yml#L12\n//\n//\n// Also update link that we want to keep in sync with the permalink change.\n//\n// For example, if you `y` a Markdown file and click the \"Display as source blob\"\n// button, probably you want its link (href) to change from:\n// /github/linguist/blob/master/README.md?plain=1\n//\n// to:\n// /github/linguist/blob/SHA/README.md?plain=1\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '@github-ui/browser-history-state'\n\non('click', '.js-permalink-shortcut', function (event) {\n  const target = event.currentTarget as HTMLAnchorElement\n  try {\n    replaceState(null, '', target.href + window.location.hash)\n  } catch {\n    window.location.href = target.href + window.location.hash\n  }\n  for (const element of document.querySelectorAll('.js-permalink-replaceable-link')) {\n    if (element instanceof HTMLAnchorElement) {\n      element.href = element.getAttribute('data-permalink-href')!\n    }\n  }\n  event.preventDefault()\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('.js-permission-menu-form', async function (form, wants) {\n  const success = form.querySelector<HTMLElement>('.js-permission-success')!\n  const error = form.querySelector<HTMLElement>('.js-permission-error')!\n\n  success.hidden = true\n  error.hidden = true\n  form.classList.add('is-loading')\n\n  let response\n  try {\n    response = await wants.json()\n  } catch {\n    // If the request errored, we'll set the error state and return.\n    form.classList.remove('is-loading')\n    error.hidden = false\n    return\n  }\n\n  if (response.status === 200) {\n    const selectPanel = form.querySelector('select-panel, select-panel-experimental')\n    if (selectPanel) {\n      const buttonLabelSpan = form.querySelector('span.Button-label')\n      if (buttonLabelSpan) {\n        buttonLabelSpan.textContent = `Role: ${response.json.action}`\n      }\n    }\n  }\n\n  form.classList.remove('is-loading')\n  success.hidden = false\n\n  const container = form.closest('.js-org-repo')\n  if (container) {\n    const data = response.json\n    container.classList.toggle('with-higher-access', data['members_with_higher_access'])\n  }\n})\n","import {microtask} from '@github-ui/eventloop-tasks'\nimport {sendStats} from '@github-ui/stats'\n\nlet lastTurboRequestUrl: string | null = null\n\n// Collect User Timing metrics so we can track time-to-load on turbo actions\nconst turboMeasure = 'last_turbo_request'\nconst turboStartMark = 'turbo_start'\nconst turboEndMark = 'turbo_end'\n\n// Mark turbo start on performance timeline and save url for last turbo request.\nfunction markTurboStart(event: Event) {\n  if (!(event instanceof CustomEvent)) return\n  if (!event.detail?.url || event.defaultPrevented) return\n\n  window.performance.mark(turboStartMark)\n  lastTurboRequestUrl = event.detail.url\n}\n\n// Mark turbo end on performance timeline and report results.\nasync function trackTurboTiming() {\n  await microtask()\n\n  if (!window.performance.getEntriesByName(turboStartMark).length) return\n\n  window.performance.mark(turboEndMark)\n  window.performance.measure(turboMeasure, turboStartMark, turboEndMark)\n  const measures = window.performance.getEntriesByName(turboMeasure)\n\n  const measure = measures.pop()\n  const duration = measure ? measure.duration : null\n  if (!duration) return\n\n  if (lastTurboRequestUrl) {\n    sendStats({\n      requestUrl: lastTurboRequestUrl,\n      turboDuration: Math.round(duration),\n    })\n  }\n  clearTurboMarks()\n}\n\n// Clear turbo marks from performance timeline.\nfunction clearTurboMarks() {\n  window.performance.clearMarks(turboStartMark)\n  window.performance.clearMarks(turboEndMark)\n  window.performance.clearMeasures(turboMeasure)\n}\n\nif ('getEntriesByName' in window.performance) {\n  document.addEventListener('turbo:before-fetch-request', markTurboStart)\n  document.addEventListener('turbo:render', trackTurboTiming)\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('body.js-print-popup', () => {\n  window.print()\n  setTimeout(window.close, 1000)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('poll-include-fragment[data-redirect-url]', function (el) {\n  const url = el.getAttribute('data-redirect-url')!\n  el.addEventListener('load', function () {\n    window.location.href = url\n  })\n})\n\nobserve('poll-include-fragment[data-reload]', function (el) {\n  el.addEventListener('load', function () {\n    window.location.reload()\n  })\n})\n","// Quick submit using -Enter or Ctrl+Enter\n//\n// When `.js-quick-submit` field is focused, -Enter or Ctrl+Enter will submit\n// the form it belongs to unless the first submit button of that form is disabled.\n\nimport {onKey} from '@github-ui/onfocus'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nonKey('keydown', '.js-quick-submit', function (event: KeyboardEvent) {\n  quickSubmit(event)\n})\n\nfunction quickSubmit(event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement | HTMLTextAreaElement\n\n  if ((event.ctrlKey || event.metaKey) && event.key === 'Enter') {\n    const form = field.form!\n    const button = form.querySelector('input[type=submit], button[type=submit]')\n    if (event.shiftKey) {\n      const altButton = form.querySelector('.js-quick-submit-alternative')\n      if ((altButton instanceof HTMLInputElement || altButton instanceof HTMLButtonElement) && !altButton.disabled) {\n        requestSubmit(form, altButton)\n      }\n    } else if (button instanceof HTMLInputElement || button instanceof HTMLButtonElement) {\n      if (!button.disabled) {\n        requestSubmit(form)\n      }\n    } else {\n      requestSubmit(form)\n    }\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n}\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {debounce} from '@github/mini-throttle'\nimport {showGlobalError} from '../behaviors/ajax-error'\nimport {parseHTML} from '@github-ui/parse-html'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst DEBOUNCE_DELAY = 200\nconst resizeObserver = new ResizeObserver(entries => {\n  for (const entry of entries) {\n    // The reaction buttons are 26 +/- 0.1px depending on :shrug:. If the menu overflows it'll go to 2 rows, and be closer to 52px than 26px\n    if (entry.contentRect.height > 40) {\n      hideReactionOverflow(entry.target as HTMLElement)\n    }\n  }\n})\n\nobserve('.js-reactions-container', function (el) {\n  resizeObserver.observe(el)\n})\n\nfunction hideReactionOverflow(reactionContainer: HTMLElement) {\n  const availableWidth = reactionContainer.offsetWidth * 0.7\n  const reactionButtons = reactionContainer.querySelectorAll<HTMLElement>('.js-reaction-group-button')\n  const allReactionsPopover = reactionContainer.querySelector<HTMLElement>('.js-all-reactions-popover')\n\n  let totalButtonWidth = 0\n  for (const button of reactionButtons) {\n    totalButtonWidth += button.clientWidth\n  }\n  totalButtonWidth += allReactionsPopover?.clientWidth || 0\n\n  if (availableWidth < totalButtonWidth) {\n    let remainingWidth = availableWidth\n\n    if (allReactionsPopover) {\n      allReactionsPopover.removeAttribute('hidden')\n      remainingWidth -= allReactionsPopover.offsetWidth\n    }\n\n    for (const button of reactionButtons) {\n      const buttonWidth = button.offsetWidth\n      if (buttonWidth > remainingWidth) {\n        button.setAttribute('hidden', 'hidden')\n      } else {\n        button.removeAttribute('hidden')\n      }\n      remainingWidth -= buttonWidth\n    }\n  }\n}\n\nconst debouncedPickReaction = debounce(async (e: Event) => {\n  const form = e.target as HTMLFormElement\n\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      headers: new Headers({\n        'X-Requested-With': 'XMLHttpRequest',\n      }),\n      body: new FormData(form),\n    })\n  } catch {\n    showGlobalError()\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n\n  if (response && response.status === 200) {\n    const json = await response.json()\n\n    const comment = form.closest<HTMLElement>('.js-comment')\n    const reactionsContainer = comment?.querySelector<HTMLElement>('.js-reactions-container')\n    const reactionsHeader = comment?.querySelector<HTMLElement>('.js-comment-header-reaction-button')\n    if (json && reactionsContainer && reactionsHeader) {\n      const newReactions = parseHTML(document, json['reactions_container'].trim())\n      const newReactionButton = parseHTML(document, json['comment_header_reaction_button'].trim())\n      reactionsContainer.replaceWith(newReactions)\n      reactionsHeader.replaceWith(newReactionButton)\n    }\n    const elementToFocus = comment?.querySelector<HTMLElement>('.js-reactions-focus')\n    if (elementToFocus) elementToFocus.focus()\n  }\n}, DEBOUNCE_DELAY)\n\non('submit', '.js-pick-reaction', e => {\n  e.preventDefault()\n  debouncedPickReaction(e)\n})\n\nfunction showReactionContent(event: MouseEvent) {\n  const target = event.target as HTMLElement\n\n  const label = target.getAttribute('data-reaction-label')!\n  const container = target.closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  if (!description.hasAttribute('data-default-text')) {\n    description.setAttribute('data-default-text', description.textContent || '')\n  }\n\n  description.textContent = label\n}\n\nfunction hideReactionContent(event: MouseEvent) {\n  const container = (event.target as HTMLElement).closest<HTMLElement>('.js-add-reaction-popover')!\n  const description = container.querySelector<HTMLElement>('.js-reaction-description')!\n\n  const defaultText = description.getAttribute('data-default-text')\n  if (defaultText) {\n    description.textContent = defaultText\n  }\n}\n\non(\n  'toggle',\n  '.js-reaction-popover-container',\n  function (event) {\n    const isOpen = event.currentTarget.hasAttribute('open')\n    for (const item of (event.target as Element).querySelectorAll<HTMLElement>('.js-reaction-option-item')) {\n      if (isOpen) {\n        item.addEventListener('mouseenter', showReactionContent)\n        item.addEventListener('mouseleave', hideReactionContent)\n      } else {\n        item.removeEventListener('mouseenter', showReactionContent)\n        item.removeEventListener('mouseleave', hideReactionContent)\n      }\n    }\n  },\n  {capture: true},\n)\n","// Remote\n//\n// Implements `data-remote` for forms.\n//\n//\n// Markup\n//\n// `<form>`\n//\n// ``` definition-table\n// Attribute - Description\n//\n// `data-remote`\n//   Enables remote behavior on the element if set to anything.\n//\n// `method`\n//   Changes the method of the AJAX request. Defaults to `\"get\"`. Maps to\n//   jQuery's [type](http://api.jquery.com/jQuery.ajax/).\n//\n// `action`\n//   URL for AJAX request. Defaults to the current url. Maps to jQuery's\n//   [`url`](http://api.jquery.com/jQuery.ajax/).\n//\n// `data-type`\n//   Specify the data type of the response. Can be `\"xml\"`, `\"json\"`,\n//   `\"script\"`, or `\"html\"`. Defaults to jQuery's *\"intelligent guess\"*\n//   from the response content type. Maps to jQuery's\n//   [`dataType`](http://api.jquery.com/jQuery.ajax/).\n// ```\n//\n// ``` html\n// <form action=\"/comment\" method=\"post\" data-remote></form>\n// ```\n//\n//\n// Events\n//\n// Use delegated jQuery's global AJAX events to handle successful\n// and error states. See jQuery's [AJAX event\n// documentation](http://docs.jquery.com/Ajax_Events) for a complete\n// reference.\n//\n// `deprecatedAjaxSuccess`\n//\n// This event is only called if the request was successful (no errors from the server, no errors with the data).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n// `ajaxError`\n//\n// This event is only called if an error occurred with the request (you can never\n// have both an error and a success callback with a request).\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// Extra arguments\n//   `status` - Status response number\n//   `error` - Error message string\n//   `text` - Response text string\n// ```\n//\n// `deprecatedAjaxComplete`\n//\n// This event is called regardless of if the request was successful, or not. You\n// will always receive a complete callback, even for synchronous requests.\n//\n// ``` definition-table\n// Property - Value\n//\n// Synchronicity  - Sync\n// Bubbles        - Yes\n// Cancelable     - No\n// Target         - `form` element with `[data-remote]`\n// ```\n//\n//     on('deprecatedAjaxSend', '.new-comment', function(event) {\n//        event.currentTarget.classList.add('loading')\n//     })\n//\n//     on('deprecatedAjaxComplete', '.new-comment', function(event) {\n//        event.currentTarget.classList.remove('loading')\n//     })\n//\n//     on('deprecatedAjaxSuccess', '.new-comment', function (event) {\n//        event.currentTarget.classList.add('success')\n//     })\n//\n//     on('deprecatedAjaxError', '.new-comment', function (event) {\n//       alert(\"Something went wrong!\")\n//     })\n//\n//\n// Intercept all form submissions with data-remote and turn\n// it into a XHR request instead.\n\nimport type {Kicker, SimpleRequest, SimpleResponse} from '@github/remote-form'\nimport {afterRemote, beforeRemote, remoteForm} from '@github/remote-form'\nimport {findPersistedSubmitButtonValue, persistSubmitButtonValue} from '@github-ui/form-utils/remote-submit'\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport verifySso from '../sso'\nimport {showGlobalError} from './ajax-error'\n\nfunction submitWithLegacyEvents(form: HTMLFormElement, send: Kicker, req: SimpleRequest) {\n  const dataType = form.getAttribute('data-type')\n  if (dataType === 'json') {\n    req.headers.set('Accept', 'application/json')\n  }\n\n  fire(form, 'deprecatedAjaxSend', {request: req})\n\n  send\n    .text()\n    /* eslint-disable-next-line github/no-then */\n    .catch(err => {\n      if (err.response) {\n        return err.response\n      } else {\n        throw err\n      }\n    })\n    /* eslint-disable-next-line github/no-then */\n    .then(\n      (response: SimpleResponse) => {\n        if (response.status < 300) {\n          fire(form, 'deprecatedAjaxSuccess')\n        } else {\n          fire(form, 'deprecatedAjaxError', {error: response.statusText, status: response.status, text: response.text})\n        }\n      },\n      err => {\n        fire(form, 'deprecatedAjaxError', {error: err.message, status: 0, text: null})\n      },\n    )\n    /* eslint-disable-next-line github/no-then */\n    .then(() => {\n      fire(form, 'deprecatedAjaxComplete')\n    })\n}\n\n// Persist submit button value for ALL forms, regardless of whether they are\n// ajax-enabled or not. The submit value is reset after either `deprecatedAjaxComplete`\n// has fired or `remoteForm` has finished processing.\non(\n  'click',\n  ['form button:not([type])', 'form button[type=submit]', 'form input[type=submit]'].join(', '),\n  function (event) {\n    const button = event.currentTarget as HTMLButtonElement | HTMLInputElement\n    const form = button.form\n    if (form && !event.defaultPrevented) {\n      persistSubmitButtonValue(button)\n    }\n  },\n)\n\nremoteForm('form[data-remote]', submitWithLegacyEvents)\n\n// Restore forms after AJAX submissions\non('deprecatedAjaxComplete', 'form', function ({currentTarget}) {\n  const el = findPersistedSubmitButtonValue(currentTarget as HTMLFormElement)\n  if (el) el.remove()\n})\n\nafterRemote(form => {\n  const button = findPersistedSubmitButtonValue(form)\n  if (button) button.remove()\n})\n\nbeforeRemote(verifySso)\n\non('click', '.js-remote-submit-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const form = button.form as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n})\n","// Removed Contents behavior\n//\n// When \"has-removed-contents\" is added to an Element, its contents are\n// detached from the document and stored in memory. Once the class is removed,\n// the original contents are automatically reinserted into the document.\n//\n// WARNING: Adding new content to an Element while it has its contents detatch\n// has undefined behavior.\n//\n// This behavior is useful when working with form with multiple states. Using\n// d-none is only presentational and doesn't exclude the form fields from\n// being submitted or participating in validation requirements.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.has-removed-contents', function () {\n  let contents: ChildNode[]\n  return {\n    add(parent) {\n      contents = Array.from(parent.childNodes)\n      for (const el of contents) {\n        parent.removeChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n    remove(parent) {\n      for (const el of contents) {\n        parent.appendChild(el)\n      }\n      const form = parent.closest('form')\n      if (form) fire(form, 'change')\n    },\n  }\n})\n","import {remoteForm} from '@github/remote-form'\n\nremoteForm('form[data-replace-remote-form]', async function (form, wants) {\n  form.classList.remove('is-error')\n  form.classList.add('is-loading')\n  try {\n    let target: Element = form\n\n    const response = await wants.html()\n    const container = form.closest('[data-replace-remote-form-target]')\n    if (container) {\n      const id = container.getAttribute('data-replace-remote-form-target')\n      target = id ? document.getElementById(id)! : container\n    }\n    target.replaceWith(response.html)\n  } catch {\n    form.classList.remove('is-loading')\n    form.classList.add('is-error')\n  }\n})\n","import {sendStats} from '@github-ui/stats'\n\nif (PerformanceObserver && (PerformanceObserver.supportedEntryTypes || []).includes('longtask')) {\n  const observer = new PerformanceObserver(function (list) {\n    const longTasks = list.getEntries().map(({name, duration}) => ({name, duration, url: window.location.href}))\n    sendStats({longTasks})\n  })\n  observer.observe({entryTypes: ['longtask']})\n}\n","import {eventToHotkeyString} from '@github-ui/hotkey'\nimport {insertText} from '@github-ui/text'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onKey} from '@github-ui/onfocus'\nimport {ModalDialogElement} from '@primer/view-components/app/components/primer/alpha/modal_dialog'\nimport {ready} from '@github-ui/document-ready'\n\non(\n  'click',\n  '.js-saved-reply-menu.ActionListWrap',\n  function (event: Event) {\n    if (!(event.target instanceof Element)) return\n    const body = event.target\n      .closest<HTMLButtonElement>('button[role=\"menuitem\"]')\n      ?.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    event.target.closest<HTMLDialogElement>('dialog, modal-dialog')?.close()\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\non(\n  'details-menu-select',\n  '.js-saved-reply-menu',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const body = event.detail.relatedTarget.querySelector('.js-saved-reply-body')\n\n    // Since this details-menu-select can hold options which arent saved\n    // replies, we guard to ensure that only saved replies are handled here.\n    if (!body) return\n\n    const text = (body.textContent || '').trim()\n    const container = event.target.closest<HTMLElement>('.js-previewable-comment-form')!\n\n    const comment = container.querySelector<HTMLTextAreaElement>('textarea.js-comment-field')!\n    insertText(comment, text)\n    setTimeout(() => comment.focus(), 0)\n  },\n  {capture: true},\n)\n\nonKey('keydown', '.js-saved-reply-shortcut-comment-field', function (event) {\n  if (eventToHotkeyString(event) === 'Control+.') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-previewable-comment-form')!\n    const menu = container.querySelector<HTMLElement>('.js-saved-reply-container')!\n    if (menu instanceof HTMLDialogElement) {\n      menu.showModal()\n    } else if (menu instanceof ModalDialogElement) {\n      menu.show()\n    } else {\n      menu.setAttribute('open', '')\n    }\n    event.preventDefault()\n  }\n})\n\nonKey('keydown', '.js-saved-reply-filter-input', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (/^Control\\+[1-9]$/.test(eventToHotkeyString(event))) {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const savedReplyNumber = Number(event.key)\n    const reply = container.querySelectorAll(`[role=\"menuitem\"][data-shortcut=\"${savedReplyNumber}\"]`)[0]\n    if (reply instanceof HTMLElement) {\n      reply.click()\n      event.preventDefault()\n    }\n  } else if (event.key === 'Enter') {\n    const container = (event.target as Element).closest<HTMLElement>('.js-saved-reply-container')!\n    const replies = container.querySelectorAll('[role=\"menuitem\"]')\n\n    if (replies.length > 0 && replies[0] instanceof HTMLButtonElement) {\n      replies[0].click()\n    }\n\n    event.preventDefault()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\n/* Ensure the filter text field receives focus when the saved replies dialog opens.\n *\n * We want the filter text field to receive focus both\n *   1) after the <include-fragment> is done loading, and\n *   2) when the saved replies dialog opens.\n *\n * The latter may happen before or after the <include-fragment> is done loading. It's necessary to manually focus the\n * text field even though it has its autofocus=\"autofocus\" property set. Chrome occasionally prints the following\n * message to the console: \"Autofocus processing was blocked because a document already has a focused element.\"\n * Manually focusing when the dialog opens appears to fix the issue.\n */\n;(async () => {\n  await ready\n\n  // Once Primer has migrated to <dialog>, this can be replaced by listening for the toggle event.\n  for (const container of document.querySelectorAll('.js-saved-reply-container')) {\n    const observer = new MutationObserver(mutationList => {\n      for (const mutation of mutationList) {\n        if (mutation.type === 'attributes') {\n          if (mutation.attributeName === 'open' && mutation.oldValue === null) {\n            const input = container.querySelector<HTMLElement>('.js-saved-reply-filter-input')\n            if (input) input.focus()\n          }\n        }\n      }\n    })\n\n    observer.observe(container, {attributes: true})\n  }\n\n  const fragments = document.querySelectorAll('.js-saved-reply-include-fragment')\n\n  for (const fragment of fragments) {\n    // grab container before adding listener because the <include-fragment> is removed from\n    // the DOM before the load event is fired\n    const container = fragment.closest<HTMLElement>('.js-saved-reply-container')\n\n    // cannot use on() for this - the load handler is never called\n    fragment.addEventListener('load', () => {\n      if (container) {\n        const input = container.querySelector<HTMLElement>('.js-saved-reply-filter-input')\n        if (input) input.focus()\n      }\n    })\n  }\n})()\n","import type {BlobRange} from '../blob-anchor'\nimport {DOMRangeFromBlob} from '../blob-anchor'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {surroundContents} from '../range'\nimport {GetCharIndexFromBytePosition} from '@github-ui/text'\n\nfunction queryLineElement(snippet: Element, line: number) {\n  return snippet.querySelector(`#LC${line}`)\n}\n\nfunction highlightRange(blobRange: BlobRange, snippet: Element, adjustStart: boolean, adjustEnd: boolean) {\n  const range = DOMRangeFromBlob(blobRange, line => queryLineElement(snippet, line))\n  if (!range) return\n\n  if (adjustStart) {\n    const adjustedStart = GetCharIndexFromBytePosition(range.startContainer.textContent!, range.startOffset)\n    if (adjustedStart === -1) return\n    range.setStart(range.startContainer, adjustedStart)\n  }\n\n  if (adjustEnd) {\n    const adjustedEnd = GetCharIndexFromBytePosition(range.endContainer.textContent!, range.endOffset)\n    if (adjustedEnd === -1) return\n    range.setEnd(range.endContainer, adjustedEnd)\n  }\n\n  const span = document.createElement('span')\n  const highlightClasses = ['text-bold', 'hx_keyword-hl', 'rounded-2', 'd-inline-block']\n\n  span.classList.add(...highlightClasses)\n  surroundContents(range, span)\n}\n\nexport function highlightColumns(blobRange: BlobRange, snippet: Element) {\n  if (blobRange.start.line !== blobRange.end.line) {\n    // highlight first line, and adjust only the start as there may be Unicode characters\n    // preceding the start column\n    const startBlobRange = {\n      start: {line: blobRange.start.line, column: blobRange.start.column},\n      end: {line: blobRange.start.line, column: null},\n    }\n    highlightRange(startBlobRange, snippet, true, false)\n\n    for (let i = blobRange.start.line + 1; i < blobRange.end.line; i += 1) {\n      // highlight middle lines, and do not adjust anything since we're highlighting\n      // the whole line\n      const fullBlobRange = {\n        start: {line: i, column: 0},\n        end: {line: i, column: null},\n      }\n      highlightRange(fullBlobRange, snippet, false, false)\n    }\n\n    // highlight last line, and only adjust the end as there may be Unicode characters\n    // in the middle of the match\n    const endBlobRange = {\n      start: {line: blobRange.end.line, column: 0},\n      end: {line: blobRange.end.line, column: blobRange.end.column},\n    }\n    highlightRange(endBlobRange, snippet, false, true)\n  } else {\n    highlightRange(blobRange, snippet, true, true)\n  }\n}\n\nexport function parseColumnHighlightRange(snippet: Element): BlobRange | null {\n  const startLine = parseInt(snippet.getAttribute('data-start-line')!)\n  const endLine = parseInt(snippet.getAttribute('data-end-line')!)\n  const startColumn = parseInt(snippet.getAttribute('data-start-column')!)\n  // The end column is a special case, as 0 acts as a special value\n  const dataEndColumn = parseInt(snippet.getAttribute('data-end-column')!)\n\n  // Nothing to highlight if start and end lines and start and end cols are the\n  // same, as column ranges are half-open\n  if (startLine === endLine && startColumn === dataEndColumn) return null\n\n  // 0 here indicates that no end column was provided, so the highlight should\n  // continue to the end of the line.\n  // DOMRangeFromBlob will interpret null in a similar way to this.\n  const endColumn = dataEndColumn !== 0 ? dataEndColumn : null\n\n  return {\n    start: {line: startLine, column: startColumn},\n    end: {line: endLine, column: endColumn},\n  }\n}\n\nobserve('.js-highlight-code-snippet-columns', function (snippet: Element) {\n  const blobRange = parseColumnHighlightRange(snippet)\n  if (blobRange !== null) {\n    highlightColumns(blobRange, snippet)\n  }\n})\n","import {storeAndStripShelfParams} from './notification-shelf-referrer-params'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {updateNotificationStates} from './update-notification-states'\n\n// Perform an action and change the status of the notification shelf.\nexport async function remoteShelfActionForm() {\n  return remoteForm('.js-notification-shelf .js-notification-action form', async function (form, wants) {\n    const shouldRedirect = form.hasAttribute('data-redirect-to-inbox-on-submit')\n\n    if (shouldRedirect) {\n      await performRequest(wants)\n      const inboxButton = document.querySelector<HTMLAnchorElement>('.js-notifications-back-to-inbox')!\n\n      if (inboxButton) {\n        inboxButton.click()\n      }\n\n      return\n    }\n\n    updateNotificationStates(form, form)\n    await performRequest(wants)\n  })\n}\n\nexport function urlWithoutNotificationParameters() {\n  const searchParams = new URLSearchParams(window.location.search)\n  const cleanSearchParams = storeAndStripShelfParams(searchParams)\n\n  if (cleanSearchParams) {\n    const newUrl = new URL(window.location.href, window.location.origin)\n    newUrl.search = cleanSearchParams.toString()\n    return newUrl.toString()\n  }\n}\n\n// Submits an AJAX request, but ignores any errors.\nasync function performRequest(wants: Kicker) {\n  try {\n    await wants.text()\n  } catch {\n    // TODO show error message\n  }\n}\n","import {remoteShelfActionForm, urlWithoutNotificationParameters} from './../notifications/v2/notification-shelf-helpers'\nimport {getStoredShelfParamsForCurrentPage} from './../notifications/v2/notification-shelf-referrer-params'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {replaceState} from '@github-ui/browser-history-state'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\nremoteShelfActionForm()\n\n// Remove the notification_referrer_id parameter from the url on page load and on Turbo loads\nfunction removeNotificationParams() {\n  const newUrl = urlWithoutNotificationParameters()\n  if (newUrl) replaceState(null, '', newUrl)\n}\nremoveNotificationParams()\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, removeNotificationParams)\n\n// pass the notifications params through turbo requests so we properly show the shelf\ndocument.addEventListener('turbo:before-fetch-request', function (event) {\n  const params = getStoredShelfParamsForCurrentPage(event.detail.url.pathname)\n\n  if (params) {\n    const newParams = new URLSearchParams(event.detail.url.search)\n    for (const [key, value] of Object.entries<string>(params)) {\n      if (value) {\n        newParams.set(key, value)\n      }\n    }\n    event.detail.url.search = newParams.toString()\n  }\n})\n\non('submit', '.js-mark-notification-form', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n  event.preventDefault()\n  try {\n    await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n  } catch {\n    // Ignore network errors\n  }\n})\n\n// mark related notification as read\nasync function markNotificationAsRead() {\n  await loaded\n\n  const form = document.querySelector('.js-mark-notification-form')\n  if (form instanceof HTMLFormElement) {\n    requestSubmit(form)\n  }\n}\n\ndocument.addEventListener(SOFT_NAV_STATE.SUCCESS, markNotificationAsRead)\nmarkNotificationAsRead()\n","import {onFocus, onKey} from '@github-ui/onfocus'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {install, uninstall} from '@github-ui/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst MD_BREAKPOINT = 768\n\nfunction isJumpToAvailable(field: Element): boolean {\n  return !!field.closest('jump-to')\n}\n\nfunction toggleSearchScope(field: HTMLElement, enabled: boolean) {\n  // We don't want legacy search behaviour of changing scope on backspace when using Jump To.\n  if (isJumpToAvailable(field)) {\n    return\n  }\n  const form = document.querySelector<HTMLFormElement>('.js-site-search-form')!\n  document.querySelector<HTMLElement>('.js-site-search')!.classList.toggle('scoped-search', enabled)\n\n  let url\n  let placeholder\n  if (enabled) {\n    url = form.getAttribute('data-scoped-search-url')!\n    placeholder = field.getAttribute('data-scoped-placeholder')!\n  } else {\n    url = form.getAttribute('data-unscoped-search-url')!\n    placeholder = field.getAttribute('data-unscoped-placeholder')!\n  }\n\n  form.setAttribute('action', url)\n  field.setAttribute('placeholder', placeholder)\n}\n\nfunction toggleSearchInputHotkey(element: HTMLElement, isRegularSearchInput: boolean) {\n  if (window.innerWidth < MD_BREAKPOINT) {\n    if (isRegularSearchInput) {\n      uninstall(element)\n    } else {\n      install(element)\n    }\n  } else if (window.innerWidth >= MD_BREAKPOINT) {\n    if (isRegularSearchInput) {\n      install(element)\n    } else {\n      uninstall(element)\n    }\n  }\n}\n\nonKey('keyup', '.js-site-search-field', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  const field = event.target as HTMLInputElement\n\n  const emptyQuery = field.value.length === 0\n  if (emptyQuery && event.key === 'Backspace' && field.classList.contains('is-clearable')) {\n    toggleSearchScope(field, false)\n  }\n  if (emptyQuery && event.key === 'Escape') {\n    toggleSearchScope(field, true)\n  }\n  field.classList.toggle('is-clearable', emptyQuery)\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\nonFocus('.js-site-search-focus', function (field) {\n  const container = field.closest<HTMLElement>('.js-chromeless-input-container')\n  if (!container) return\n  container.classList.add('focus')\n  // Restore scope on blur\n  function blurHandler() {\n    container?.classList.remove('focus')\n    if ((field as HTMLInputElement).value.length === 0 && field.classList.contains('js-site-search-field')) {\n      toggleSearchScope(field, true)\n    }\n    field.removeEventListener('blur', blurHandler)\n  }\n  field.addEventListener('blur', blurHandler)\n})\n\non('submit', '.js-site-search-form', function (event) {\n  if (!(event.target instanceof Element)) return\n  const input = event.target.querySelector<HTMLInputElement>('.js-site-search-type-field')!\n  input.value = new URLSearchParams(window.location.search).get('type') || ''\n})\n\nconst observer = new ResizeObserver(entries => {\n  for (const {target} of entries) {\n    const isRegularSearchInput = target.classList.contains('regular-search-input')\n    if (target.classList.contains('sm-search-input') || isRegularSearchInput) {\n      toggleSearchInputHotkey(target as HTMLElement, isRegularSearchInput)\n    }\n  }\n})\n\n// install/uninstall hotkeys on regular search input when screen size reaches medium breakpoint\nobserve('.regular-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\n// install/uninstall hotkeys on search input in collapsed menu when screen size reaches medium breakpoint\nobserve('.sm-search-input', {\n  constructor: HTMLElement,\n  add(element) {\n    observer.observe(element)\n  },\n  remove(element) {\n    uninstall(element)\n    observer.unobserve(element)\n  },\n})\n\non('click', '.js-toggle-appheader-search', function () {\n  const searchBar = document.querySelector<HTMLElement>('.js-global-bar-second-row')!\n\n  if (searchBar) {\n    searchBar.toggleAttribute('hidden')\n\n    if (!searchBar.getAttribute('hidden')) {\n      const searchInput = searchBar.querySelector<HTMLInputElement>('.js-site-search-focus')!\n\n      if (searchInput) {\n        searchInput.focus()\n      }\n    }\n  }\n})\n","// Size to Fit textarea behavior\n//\n// Auto sizes any textareas marked with `.js-size-to-fit` to its text\n// contents height.\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport subscribe from '@github/textarea-autosize'\n\nobserve('textarea.js-size-to-fit', {\n  constructor: HTMLTextAreaElement,\n  subscribe(el) {\n    if (isFeatureEnabled('textarea_field_sizing') && CSS?.supports?.('field-sizing', 'content')) {\n      return {\n        unsubscribe() {},\n      }\n    } else {\n      return subscribe(el)\n    }\n  },\n})\n","/**\n * Smooth scrolling anchor.\n *\n * Have an in-page anchor link and want the page to smoothly scroll to its destination? Look no further.\n *\n * Apply the `.js-smoothscroll-anchor` on the anchor tag to trigger smooth scrolling.\n *\n * This will override the default behavior of jumping the page to the element targeted by the hash in the `href`\n * and instead smoothly scroll to it. No additional CSS is required.\n *\n * @deprecated Replace this behavior with `scroll-behavior: smooth;`\n *   https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior.\n *\n * @example\n * ```html\n * <a href=\"#some-id\" class=\"js-smoothscroll-anchor\">Scroll to #some-id</a>\n * <div id=\"some-id\" style=\"margin-top: 300px;\">\n *   <h3>Scroll to me</h3>\n * </div>\n * ```\n */\n\nimport {findFragmentTarget} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', '.js-smoothscroll-anchor', function (event) {\n  const anchor = event.currentTarget\n  if (!(anchor instanceof HTMLAnchorElement)) return\n\n  const target = findFragmentTarget(document, anchor.hash)\n  if (!target && anchor.hash === '#top') {\n    // When navigating to the top of the page, reset the URL hash to clear `:target`\n    // pseudo-classes on page elements, then smooth scroll to the top of the page.\n    const top = document.querySelector('html')\n    if (top) {\n      const originalScroll = top.style.scrollBehavior\n      top.style.scrollBehavior = 'smooth'\n      window.location.hash = ''\n      top.scrollIntoView({behavior: 'smooth'})\n      top.style.scrollBehavior = originalScroll\n      event.preventDefault()\n      return\n    }\n  }\n  if (!target) return\n  ;(target as HTMLElement).focus()\n\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)')\n\n  if (prefersReducedMotion && prefersReducedMotion.matches) {\n    target.scrollIntoView()\n  } else {\n    target.scrollIntoView({behavior: 'smooth'})\n  }\n\n  event.preventDefault()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst hiddenTimePeriodOnScrollInMs = 1000\n\nconst abortControllers = new WeakMap()\n\nconst snippetClipboardCopyTemplate = document.querySelector<HTMLTemplateElement>('#snippet-clipboard-copy-button')\nconst snippetClipboardCopyTemplateUnpositioned = document.querySelector<HTMLTemplateElement>(\n  '#snippet-clipboard-copy-button-unpositioned',\n)\n\nasync function insertSnippetClipboardCopyButton(el: HTMLElement, signal: AbortSignal): Promise<void> {\n  const clipboardContent = el.getAttribute('data-snippet-clipboard-copy-content')\n  if (clipboardContent === null) return\n\n  // Remove this attribute so that we don't add a second button.\n  el.removeAttribute('data-snippet-clipboard-copy-content')\n\n  const useUnpositioned = !!el.closest('.js-snippet-clipboard-copy-unpositioned')\n  const template = useUnpositioned ? snippetClipboardCopyTemplateUnpositioned : snippetClipboardCopyTemplate\n\n  if (!(template instanceof HTMLTemplateElement)) return\n\n  const documentFragment = template.content.cloneNode(true) as DocumentFragment\n\n  const clonedZeroClipboardContainer = documentFragment.children[0]\n  if (!(clonedZeroClipboardContainer instanceof HTMLElement)) return\n\n  const clipboardCopyElement = clonedZeroClipboardContainer.children[0]\n  if (!(clipboardCopyElement instanceof HTMLElement)) return\n\n  clipboardCopyElement.setAttribute('value', clipboardContent)\n\n  if (!useUnpositioned) {\n    document.addEventListener(\n      'selectionchange',\n      () => {\n        const selection = document.getSelection()\n        if (selection && el.contains(selection.anchorNode)) {\n          const selectedText = selection?.toString()\n          clipboardCopyElement.style.display = selectedText.trim() === '' ? 'inherit' : 'none'\n        }\n      },\n      {signal},\n    )\n\n    const scrollableElement = el.querySelector('pre')\n    if (scrollableElement !== null) {\n      let timer: ReturnType<typeof setTimeout> | undefined\n\n      /* eslint-disable-next-line github/prefer-observers */\n      scrollableElement.addEventListener(\n        'scroll',\n        () => {\n          if (timer) clearTimeout(timer)\n\n          clipboardCopyElement.style.display = 'none'\n          timer = setTimeout(() => {\n            clipboardCopyElement.style.display = 'inherit'\n          }, hiddenTimePeriodOnScrollInMs)\n        },\n        {signal},\n      )\n    }\n  }\n\n  el.appendChild(clonedZeroClipboardContainer)\n}\n\nobserve('[data-snippet-clipboard-copy-content]', {\n  constructor: HTMLElement,\n  add(el) {\n    const abortController = new AbortController()\n    abortControllers.set(el, abortController)\n\n    insertSnippetClipboardCopyButton(el, abortController.signal)\n  },\n})\n\nobserve('.snippet-clipboard-content clipboard-copy', {\n  constructor: HTMLElement,\n  remove(el) {\n    const controller = abortControllers.get(el)\n    if (controller) {\n      controller.abort()\n    }\n  },\n})\n","// Social Buttons\n//\n// Behavior for the Watch, Fork, and Star buttons within repo nav.\n//\n// Expects the JSON response to a .js-social-form XHR request to be in this format:\n//\n// On success:\n//\n// { \"count\": \"1,234\" }\n//\n// Count is formatted with delimiters. The social count in any .js-social child of .js-social-container will be updated\n// to the new value.\n//\n// If the form is annotated with the .js-deferred-toggler-target class, the .js-toggler container will have its state\n// toggled after the successful response has arrived (and not optimistically as .js-toggler-target behaves).\n//\n// Any .js-social-updatable child of .js-social-container with a data-url will also be re-fetched and updated with new\n// content.\n//\n// The container will look for the first visible child\n// and place the focus on its submit button.\n//\n// Failure cases:\n//\n// 409 Conflict - indicates that the user needs to confirm the social action in a dialog.\n//\n// {\n//   \"confirmationDialog\": {\n//     \"templateSelector\": \"[CSS selector to find DOM element containing <template> for dialog contents]\",\n//     \"inputs\": { \"arbitraryTemplateParts\": \"...\" }\n//   }\n// }\n//\n// Any other 4xx or 5xx error will result in a generic global error being shown.\n\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '@github-ui/details-dialog'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '@github-ui/updatable-content'\n\nfunction handleSocialResponse(container: HTMLElement, newCount: string, isDeferredTogglerTarget: boolean) {\n  updateSocialCounts(container, newCount)\n  if (isDeferredTogglerTarget) container.classList.toggle('on')\n\n  const updatePromises = Array.from(container.querySelectorAll<HTMLElement>('.js-social-updatable'), el =>\n    updateContent(el),\n  )\n  return Promise.all(updatePromises)\n}\n\nfunction replaceIncomingFocus(container: HTMLElement) {\n  let focusOn\n  const children = container.querySelectorAll<HTMLElement>(':scope > *')\n  for (const el of children) {\n    let visible = false\n    if (el.checkVisibility) {\n      visible = el.checkVisibility()\n    } else {\n      // Do a more basic visibility check in browsers that don't support checkVisibility like Safari.\n      const style = window.getComputedStyle(el)\n      visible = style.display !== 'none' && style.visibility !== 'hidden'\n    }\n    if (visible) {\n      focusOn = el.querySelector('button[type=\"submit\"]') as HTMLElement\n    }\n  }\n  focusOn?.focus()\n}\n\nremoteForm('.js-social-form', async function (form, wants) {\n  let response: SimpleResponse\n  const container = form.closest<HTMLElement>('.js-social-container')\n  const isDeferredTogglerTarget = form.classList.contains('js-deferred-toggler-target')\n\n  try {\n    response = await wants.json()\n\n    if (container) {\n      await handleSocialResponse(container, response.json.count, isDeferredTogglerTarget)\n      replaceIncomingFocus(container)\n\n      container.dispatchEvent(new CustomEvent('social:success', {detail: response, bubbles: true}))\n    }\n  } catch (e) {\n    // 409 Conflict: the user needs to accept a confirmation dialog. Find its template and trigger it.\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (e.response?.status === 409 && e.response.json.confirmationDialog) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      const dialogPayload = e.response.json.confirmationDialog\n      const confirmationDialogTemplate = document.querySelector<HTMLTemplateElement>(dialogPayload.templateSelector)\n      const confirmCsrfToken = form.querySelector<HTMLInputElement>('.js-confirm-csrf-token')?.value\n\n      if (confirmationDialogTemplate instanceof HTMLTemplateElement && confirmCsrfToken) {\n        const content = new TemplateInstance(confirmationDialogTemplate, {\n          confirmUrl: form.action,\n          confirmCsrfToken,\n          ...(dialogPayload.inputs || {}),\n        })\n        const dialogElement = await dialog({content})\n\n        dialogElement.addEventListener('social-confirmation-form:success', async event => {\n          if (!(event instanceof CustomEvent)) return\n          if (container) await handleSocialResponse(container, event.detail.count, isDeferredTogglerTarget)\n        })\n\n        dialogElement.addEventListener('social-confirmation-form:error', () => {\n          showGlobalError()\n        })\n      }\n    } else {\n      // If the social form is also a toggler, but *not* a deferred one, it was optimistically toggled on click. Because\n      // the action failed, we need to toggle it back off here so it won't be in an incorrect state.\n      if (container && !isDeferredTogglerTarget) container.classList.toggle('on')\n\n      showGlobalError()\n    }\n  }\n})\n\nremoteForm('.js-social-confirmation-form', async function (form, wants) {\n  try {\n    const response = await wants.json()\n    fire(form, 'social-confirmation-form:success', response.json)\n  } catch {\n    fire(form, 'social-confirmation-form:error')\n  }\n})\n\nexport function updateSocialCounts(container: HTMLElement, newCount: string) {\n  for (const count of container.querySelectorAll('.js-social-count')) {\n    count.textContent = newCount\n    count.setAttribute('title', newCount)\n\n    const singularSuffix = count.getAttribute('data-singular-suffix')\n    const pluralSuffix = count.getAttribute('data-plural-suffix')\n    const suffix = newCount === '1' ? singularSuffix : pluralSuffix\n\n    if (suffix) {\n      count.setAttribute('aria-label', `${newCount} ${suffix}`)\n    }\n  }\n  for (const count of container.querySelectorAll('.btn-with-aria-count')) {\n    const prefix = count.getAttribute('data-aria-prefix')\n\n    if (prefix) {\n      count.setAttribute('aria-label', `${prefix} (${newCount})`)\n    }\n  }\n}\n","import {getSession, type Dispatchable} from '@github-ui/alive'\nimport type {Metadata, MetadataUpdate, Subscription} from '@github/alive-client'\nimport {IDLE_METADATA_KEY, Topic, isPresenceChannel} from '@github/alive-client'\nimport {compose, fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {taskQueue} from '@github-ui/eventloop-tasks'\nimport {addIdleStateListener} from '../alive/idle-state'\n\nfunction isPresent(value: Topic | null): value is Topic {\n  return value != null\n}\n\nfunction subscriptions(el: Element): Array<Subscription<Dispatchable>> {\n  return channels(el).map((topic: Topic) => ({subscriber: el, topic}))\n}\n\nfunction channels(el: Element): Topic[] {\n  const names = (el.getAttribute('data-channel') || '').trim().split(/\\s+/)\n  return names.map(Topic.parse).filter(isPresent)\n}\n\nasync function watchSocketChannels() {\n  const session = await getSession()\n\n  if (!session) {\n    return\n  }\n\n  type Subs = Array<Subscription<Dispatchable>>\n  const queueSubscribe = taskQueue<Subs>(subs => session.subscribe(subs.flat()))\n  const queueUnsubscribe = taskQueue<Dispatchable>(els => session.unsubscribeAll(...els))\n  const queueMetadata = taskQueue<MetadataUpdate<Dispatchable>>(updates => session.updatePresenceMetadata(updates))\n\n  observe('.js-socket-channel[data-channel]', {\n    subscribe: el => {\n      const elementSubscriptions = subscriptions(el)\n      const presenceChannels = elementSubscriptions\n        .map(subscription => subscription.topic.name)\n        .filter(channelName => isPresenceChannel(channelName))\n\n      let listenerSubscription = {\n        unsubscribe() {\n          // nothing to clean up by default.  This will be overridden if there are presence channels\n        },\n      }\n\n      if (presenceChannels.length) {\n        let latestMetadata: Metadata | undefined = undefined\n        let latestIdle: boolean | undefined\n        const queueMetadataOrIdleChange = () => {\n          const metadata: Metadata[] = []\n\n          // combine metadata and idle values\n          if (latestMetadata) {\n            metadata.push(latestMetadata)\n          }\n          if (latestIdle !== undefined) {\n            metadata.push({[IDLE_METADATA_KEY]: latestIdle ? 1 : 0})\n          }\n\n          // Send the metadata to all presence channels on this element\n          for (const channelName of presenceChannels) {\n            queueMetadata({subscriber: el, channelName, metadata})\n          }\n        }\n\n        listenerSubscription = compose(\n          // listen for metadata updates emitted on the element\n          fromEvent(el, 'socket:set-presence-metadata', (e: Event) => {\n            const {detail} = e as CustomEvent\n            latestMetadata = detail\n            queueMetadataOrIdleChange()\n          }),\n          // listen for idle changes, which will cause us to send a metadata update\n          addIdleStateListener(idle => {\n            latestIdle = idle\n            queueMetadataOrIdleChange()\n          }),\n        )\n      }\n\n      // Process normal subscriptions after setting up metadata listeners\n      // This needs to come second so that idle state is ready when we subscribe\n      queueSubscribe(elementSubscriptions)\n\n      return listenerSubscription\n    },\n    remove: el => queueUnsubscribe(el),\n  })\n}\n\nwatchSocketChannels()\n","// Detects signout/signin events via `flash[:stale_session_signedin]` and\n// notifies other browser tabs so that they can:\n//\n// 1. display the \"You signed out in another tab\" banner; and\n// 2. disable pjaxing and form submission.\n//\n// On browsers that don't support BroadcastChannel, the `logged-in`\n// localStorage key is used to send messages between tabs.\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction sessionChanged(reason: string) {\n  const flash = document.querySelector<HTMLElement>('.js-stale-session-flash')!\n  const flashSignedIn = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-in')!\n  const flashSignedOut = flash.querySelector<HTMLElement>('.js-stale-session-flash-signed-out')!\n  const flashSwitched = flash.querySelector<HTMLElement>('.js-stale-session-flash-switched')!\n\n  flash.hidden = false\n  flashSignedIn.hidden = reason !== 'SIGNED_IN'\n  flashSignedOut.hidden = reason !== 'SIGNED_OUT'\n  flashSwitched.hidden = !reason?.startsWith('SWITCHED')\n\n  if (reason?.startsWith('SWITCHED:')) {\n    const switchedDetail = reason.split(':')\n    if (switchedDetail.length === 3) {\n      const from = switchedDetail[1]\n      const to = switchedDetail[2]\n      const originalUserId = flashSwitched.getAttribute('data-original-user-id')\n      if (originalUserId && originalUserId === to) {\n        flash.hidden = true\n        flashSwitched.hidden = true\n        flashSwitched.removeAttribute('data-original-user-id')\n      } else if (!originalUserId) {\n        flashSwitched.setAttribute('data-original-user-id', from || '')\n      }\n    }\n  }\n\n  window.addEventListener('popstate', function (event: PopStateEvent) {\n    if (event.state && event.state.container != null) {\n      location.reload()\n    }\n  })\n\n  document.addEventListener('submit', function (event: Event) {\n    event.preventDefault()\n  })\n}\n\nlet bc: Pick<BroadcastChannel, 'postMessage' | 'onmessage'> | null = null\nif (typeof BroadcastChannel === 'function') {\n  try {\n    bc = new BroadcastChannel('stale-session')\n    bc.onmessage = event => {\n      if (typeof event.data === 'string') sessionChanged(event.data)\n    }\n  } catch {\n    // ignore\n  }\n}\nif (!bc) {\n  let postingMessage = false\n\n  bc = {\n    postMessage(message: string) {\n      postingMessage = true\n      try {\n        window.localStorage.setItem('logged-in', message)\n      } finally {\n        postingMessage = false\n      }\n    },\n    onmessage: null,\n  }\n\n  window.addEventListener('storage', function (event) {\n    /* eslint eslint-comments/no-use: off */\n    /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n    if (!postingMessage && event.storageArea === window.localStorage && event.key === 'logged-in') {\n      try {\n        if (\n          event.newValue === 'SIGNED_IN' ||\n          event.newValue === 'SIGNED_OUT' ||\n          event.newValue?.startsWith('SWITCHED')\n        ) {\n          sessionChanged(event.newValue)\n        }\n      } finally {\n        window.localStorage.removeItem(event.key)\n      }\n    }\n    /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n  })\n}\n\nconst element = document.querySelector('.js-stale-session-flash[data-signedin]')\nif (element) {\n  const value = element.getAttribute('data-signedin') || ''\n  bc?.postMessage(value)\n}\n\nconst broadcastMsgOnSignOut = () => {\n  bc?.postMessage('false')\n}\n\nobserve('.js-loggout-form', function (el: Element) {\n  el.addEventListener('submit', broadcastMsgOnSignOut)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nobserve('form.js-auto-replay-enforced-sso-request', {\n  constructor: HTMLFormElement,\n  initialize(el) {\n    requestSubmit(el)\n  },\n})\n","import {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport verifySsoSession from '../sso'\n\nfunction updateStatusPosition(container: Element, menu: HTMLElement, details: Element) {\n  const containerHeight = container.getBoundingClientRect().height\n  const menuRect = menu.getBoundingClientRect()\n  const iconRect = details.getBoundingClientRect()\n  let top = iconRect.top\n  // Ensure popover stays off the bottom of the page by at least 10 pixels\n  if (top + menuRect.height + 10 >= containerHeight) {\n    top = Math.max(containerHeight - menuRect.height - 10, 0)\n  }\n  let left = iconRect.right\n  // Show popover to the left\n  if (details.closest('.js-build-status-to-the-left') != null) {\n    left = Math.max(iconRect.left - menuRect.width - 10, 0)\n  }\n  menu.style.top = `${top}px`\n  menu.style.left = `${left}px`\n  menu.style.right = 'auto'\n}\n\non(\n  'toggle',\n  '.js-build-status .js-dropdown-details',\n  function (event) {\n    const details = event.currentTarget\n    const menu = details.querySelector<HTMLElement>('.js-status-dropdown-menu')\n    if (!menu) return\n\n    function closeOnToggle() {\n      if (!details.hasAttribute('open')) closeStatusPopover()\n    }\n\n    function closeOnScroll(scrollEvent: Event) {\n      if (!menu!.contains(scrollEvent.target as Element)) closeStatusPopover()\n    }\n\n    function closeStatusPopover() {\n      details.removeAttribute('open')\n      /* eslint-disable-next-line github/no-d-none */\n      menu!.classList.add('d-none')\n      details.appendChild(menu!)\n      details.removeEventListener('toggle', closeOnToggle)\n      window.removeEventListener('scroll', closeOnScroll)\n    }\n\n    details.addEventListener('toggle', closeOnToggle)\n\n    if (menu.classList.contains('js-close-menu-on-scroll')) {\n      /* eslint-disable-next-line github/prefer-observers */\n      window.addEventListener('scroll', closeOnScroll, {capture: true})\n    }\n\n    /* eslint-disable-next-line github/no-d-none */\n    menu.classList.remove('d-none')\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (menu.classList.contains('js-append-menu-to-body')) {\n      // Move menu to body so it can overlay on top of other elements\n      document.body.appendChild(menu)\n      updateStatusPosition(document.body, menu, details)\n    }\n  },\n  {capture: true},\n)\n\nasync function loadStatus(el: Element) {\n  const details = el.querySelector('.js-dropdown-details')\n  const menu = el.querySelector('.js-status-dropdown-menu') || el.closest('.js-status-dropdown-menu')\n\n  if (!(menu instanceof HTMLElement)) {\n    // Status does not have an associated dropdown menu\n    return\n  }\n\n  const loader = menu.querySelector('.js-status-loader')\n  if (!loader) {\n    return\n  }\n\n  const loadingArea = menu.querySelector<HTMLElement>('.js-status-loading')!\n  const errorArea = menu.querySelector<HTMLElement>('.js-status-error')!\n\n  const url = loader.getAttribute('data-contents-url')!\n\n  /* eslint-disable-next-line github/no-d-none */\n  loadingArea.classList.remove('d-none')\n  /* eslint-disable-next-line github/no-d-none */\n  errorArea.classList.add('d-none')\n\n  let html\n  try {\n    await verifySsoSession()\n    html = await fetchSafeDocumentFragment(document, url)\n  } catch {\n    /* eslint-disable-next-line github/no-d-none */\n    loadingArea.classList.add('d-none')\n    /* eslint-disable-next-line github/no-d-none */\n    errorArea.classList.remove('d-none')\n  }\n\n  if (html) {\n    loader.replaceWith(html)\n    menu.querySelector<HTMLElement>('.js-details-container')!.classList.add('open')\n    if (details && menu.classList.contains('js-append-menu-to-body')) {\n      updateStatusPosition(document.body, menu, details)\n    }\n  }\n}\n\non('click', '.js-status-retry', ({currentTarget}) => {\n  loadStatus(currentTarget)\n})\n\nfunction onMouseEnter(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  loadStatus(currentTarget)\n}\n\nobserve('.js-build-status', {\n  add(el) {\n    el.addEventListener('mouseenter', onMouseEnter, {once: true})\n  },\n  remove(el) {\n    el.removeEventListener('mouseenter', onMouseEnter)\n  },\n})\n","// This module is a replacement for the `sicky.ts` module - it extracts out JUST the concept of an\n// .is-stuck CSS class which is applied when the element is stuck. It requires some level of\n// coordination in CSS: the element should have a `position: sticky` style, and the\n// inset-block-start _must_ be set to -1px or less. This allows the element to scroll ever so slightly\n// out of viewport, which means the intersection observer can kick in and apply the .position-stuck\n// class without introducing cycles (as in, an infinite loop of applying/unapplying the class).\n\n// Once all callsites relying on sticky.ts are refactoring to using this pattern, we should deprecate\n// the sticky.ts module and remove it from the build.\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst intersectionObserver = new IntersectionObserver(\n  records => {\n    for (const record of records) {\n      const target = record.target\n      target.classList.toggle('position-stuck', record.intersectionRatio < 1)\n      if (record.intersectionRatio < 1 && target instanceof HTMLElement) {\n        const doc = target.ownerDocument.documentElement\n        doc.style.setProperty('--sticky-is-stuck-calculated-height', `${record.intersectionRect.height}px`)\n        // Applying the \"is-stuck\" class can cause the element to change height,\n        // which means we need to re-calculate the height of the element and\n        // update the CSS variable.\n        requestAnimationFrame(() => {\n          doc.style.setProperty('--sticky-is-stuck-calculated-height', `${target.getBoundingClientRect().height}px`)\n        })\n      }\n    }\n  },\n  {threshold: 1},\n)\n\nobserve('.js-sticky-is-stuck', {\n  constructor: HTMLElement,\n  add(el) {\n    intersectionObserver.observe(el)\n  },\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on, fire} from 'delegated-events'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport sudo from '@github-ui/sudo'\n\non('click', 'button[data-sudo-required], summary[data-sudo-required]', checkSudo)\nobserve('form[data-sudo-required]', {\n  constructor: HTMLFormElement,\n  subscribe: form => fromEvent(form, 'submit', checkSudo),\n})\n\nasync function checkSudo(event: Event) {\n  const currentTarget = event.currentTarget\n  if (!(currentTarget instanceof HTMLElement)) return\n  const sudoRequired = currentTarget.getAttribute('data-sudo-required')\n  if (sudoRequired === 'false') return\n\n  event.stopPropagation()\n  event.preventDefault()\n\n  const sudoPassed = await sudo(currentTarget)\n\n  if (sudoPassed) {\n    currentTarget.removeAttribute('data-sudo-required')\n    if (currentTarget instanceof HTMLFormElement) {\n      requestSubmit(currentTarget)\n    } else {\n      currentTarget.click()\n    }\n  } else {\n    // revert the disable-with state for the button which required sudo to handle case where sudo dialog is canceled and button was still disabled.\n    const form = currentTarget.closest('form')\n    if (form) {\n      fire(form, 'deprecatedAjaxComplete')\n    }\n  }\n}\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {compare} from '@github-ui/fuzzy-filter'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {filterSort} from '@github-ui/filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nfunction getValue(el: Element): string | undefined | null {\n  if (el.hasAttribute('data-use-colon-emoji')) {\n    return el.getAttribute('data-value')\n  }\n\n  const emojiEl = el.firstElementChild\n  if (emojiEl && 'G-EMOJI' === emojiEl.tagName && !emojiEl.firstElementChild) {\n    return emojiEl.textContent\n  } else {\n    return el.getAttribute('data-value')\n  }\n}\n\nfunction search(items: Element[], searchQuery: string): Element[] {\n  const query = ` ${searchQuery.toLowerCase().replace(/_/g, ' ')}`\n  const key = (item: Element) => {\n    const text = item.getAttribute('data-emoji-name')!\n    const score = emojiScore(emojiText(item), query)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction emojiText(item: Element): string {\n  const aliases = item.getAttribute('data-text')!.trim().toLowerCase().replace(/_/g, ' ')\n  return ` ${aliases}`\n}\n\nfunction emojiScore(aliases: string, query: string): number {\n  const score = aliases.indexOf(query)\n  return score > -1 ? 1000 - score : 0\n}\n\nobserve('text-expander[data-emoji-url]', {\n  subscribe: el =>\n    compose(\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'text-expander-activate', onactivate),\n    ),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== ':') return\n  detail.value = getValue(detail.item)\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== ':') return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-emoji-url')!\n  provide(emojiMenu(url, text))\n}\n\nfunction onactivate(event: Event) {\n  const expander = event.target as Element\n  const popover = expander.querySelector<HTMLElement>('.emoji-suggestions[popover]')\n  if (popover) popover.showPopover()\n}\n\nasync function emojiMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const [list, children] = await cachedEmoji(url)\n  const results = search(children, query).slice(0, 5)\n  list.textContent = ''\n  for (const el of results) list.append(el)\n  return {fragment: list, matched: results.length > 0}\n}\n\nasync function fetchEmoji(url: string): Promise<[HTMLElement, Element[]]> {\n  const fragment = await fetchSafeDocumentFragment(document, url)\n  const root = fragment.firstElementChild as HTMLElement\n  return [root, [...root.children]]\n}\nconst cachedEmoji = memoize(fetchEmoji)\n","import {compare, fuzzyScore} from '@github-ui/fuzzy-filter'\nimport {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render, unsafeHTML} from '@github-ui/jtml-shimmed'\n\nimport type TextExpanderElement from '@github/text-expander-element'\nimport {filterSort} from '@github-ui/filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\n\n// Structure of the JSON data returned by the suggester endpoint.\ninterface Data {\n  suggestions: SuggestionData[]\n  icons: Icons\n}\n\n// Limited subset of the JSON Data returned by the suggester that matches a user's current query prefix.\ninterface SearchResults {\n  matches: SuggestionData[]\n  icons: Icons\n}\n\ninterface SuggestionData {\n  id: number\n  number: number\n  title: string\n  type: string\n}\n\ninterface Icons {\n  [key: string]: string\n}\n\n// Maximum number of results in the intial batch of results fetched by cachedJSON. If there are exactly this many\n// results for the suggester, then the repository almost certainly has more that are not included. This should be\n// kept in sync with:\n// - `SUGGESTION_LIMIT` constant in packages/collaboration/app/models/suggester/repository_suggester.rb\n// - `SUGGESTION_LIMIT` in packages/issues/app/models/issue.rb\n// - `SUGGESTION_LIMIT` in packages/discussions/app/models/discussion.rb\nconst REFINED_QUERY_THRESHOLD = 1000\n\n// The minimum number of characters required to trigger a follow-up \"refined\" query.\nconst REFINED_QUERY_PREFIX_SIZE = 3\n\n// The number of previous \"refined\" query results to cache.\nconst REFINED_QUERY_CACHE_SIZE = 5\n\n// The maximum number of suggester results to display at once.\nconst SEARCH_RESULTS_MAX = 5\n\nfunction asText(item: SuggestionData): string {\n  return `${item.number} ${item.title.trim().toLowerCase()}`\n}\n\nfunction search(items: SuggestionData[], query: string): SuggestionData[] {\n  if (!query) return items\n  const re = new RegExp(`\\\\b${escapeRegExp(query)}`)\n  const hashedScore = /^\\d+$/.test(query)\n    ? (text: string) => issueNumberScore(text, re)\n    : (text: string) => fuzzyScore(text, query)\n  const key = (item: SuggestionData) => {\n    const text = asText(item)\n    const score = hashedScore(text)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction escapeRegExp(regex: string): string {\n  return regex.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n}\n\n// Returns a score that gets higher as the query that matches a number starting\n// on a word boundary is found earlier in the string.\nfunction issueNumberScore(text: string, query: RegExp): number {\n  const score = text.search(query)\n  if (score > -1) {\n    return 1000 - score\n  } else {\n    return 0\n  }\n}\n\n// Apply the search function to JSON data acquired from the suggester endpoint. Return a (possibly empty) subset of\n// that data that matches the user's current suggester query, up to a maximum of SEARCH_RESULTS_MAX, ordered by\n// match quality.\nfunction searchWithin(data: Data, query: string): SearchResults {\n  const matches = search(data.suggestions, query).slice(0, SEARCH_RESULTS_MAX)\n  return {matches, icons: data.icons}\n}\n\nfunction renderResults(issues: SuggestionData[], container: HTMLElement, icons: Icons, query = ''): void {\n  const itemsTemplate = (items: SuggestionData[]) => html`\n    <ul\n      role=\"listbox\"\n      class=\"suggester-container suggester suggestions list-style-none position-absolute\"\n      data-query=\"${query}\"\n    >\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: SuggestionData) => {\n    const icon = item.type in icons ? parseHTML(document, icons[item.type]!) : ''\n    return html`\n      <li class=\"markdown-title\" role=\"option\" id=\"suggester-issue-${item.id}\" data-value=\"${item.number}\">\n        <span class=\"d-inline-block mr-1\">${icon}</span>\n        <small>#${item.number}</small> ${\n          // eslint-disable-next-line no-restricted-syntax\n          unsafeHTML(item.title)\n        }\n      </li>\n    `\n  }\n\n  render(itemsTemplate(issues), container)\n}\n\nobserve('text-expander[data-issue-url]', {\n  subscribe: el => {\n    const subscriptions = [\n      fromEvent(el, 'text-expander-change', onchange),\n      fromEvent(el, 'text-expander-value', onvalue),\n      fromEvent(el, 'keydown', onkeydown),\n      fromEvent(el, 'click', onclick),\n    ]\n\n    return compose(...subscriptions)\n  },\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '#') return\n  const value = detail.item.getAttribute('data-value')!\n  detail.value = `#${value}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '#') return\n  if (text === '#') {\n    hideSuggestions(event.target)\n    return\n  }\n\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-issue-url')!\n  provide(issueMenu(url, text, menu))\n}\n\nfunction hideSuggestions(target: EventTarget | null) {\n  if (!target) return\n\n  const textExpander = (target as HTMLElement).closest('text-expander') as TextExpanderElement\n  if (textExpander) {\n    textExpander.dismiss()\n  }\n}\n\nfunction onclick(event: Event) {\n  hideSuggestions(event.target)\n}\n\nfunction onkeydown(event: Event) {\n  const specialKeys = ['ArrowRight', 'ArrowLeft']\n  const {key} = event as KeyboardEvent\n  if (specialKeys.indexOf(key) < 0) return\n\n  hideSuggestions(event.target)\n}\n\nasync function issueMenu(\n  url: string,\n  query: string,\n  menu: Element,\n): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const searchResults = await queryResults(url, query, menu)\n\n  const list = document.createElement('div')\n  renderResults(searchResults.matches, list, searchResults.icons, query)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: searchResults.matches.length > 0}\n}\n\n// Track which query prefixes have already triggered refined query requests, but have not returned results yet.\nconst queriesInProgress = new Set<string>()\n\n// Cache the most recent REFINED_QUERY_CACHE_SIZE refined query results, keyed by query prefix.\nconst queryCache = new Map<string, Data>()\n\n// Identify the most appropriate collection of suggester data given the current query and return promise that resolves\n// to SearchResults containing the result of applying the query to that data.\n//\n// If the query is shorter than REFINED_QUERY_PREFIX_SIZE, use cached data of the most recently updated 1k issues,\n// pull requests, and discussions for this repository.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix does not currently have\n// cached data available, trigger a refined query request if one is not already running, then search within the cached\n// data of the most recently updated 1k as an interim. When the refined query request's response arrives, the menu\n// will be replaced if the active query still has this prefix.\n//\n// If the query is at least REFINED_QUERY_PREFIX_SIZE characters long and the query's prefix has cached data\n// available, use those cached data to construct the search results.\nasync function queryResults(url: string, query: string, menu: Element | null): Promise<SearchResults> {\n  const basicResults = await cachedJSON<Data>(url)\n  const basicSearchResults = searchWithin(basicResults, query)\n\n  if (query.length < REFINED_QUERY_PREFIX_SIZE || basicResults.suggestions.length < REFINED_QUERY_THRESHOLD) {\n    return basicSearchResults\n  }\n\n  let prefix = query.slice(0, REFINED_QUERY_PREFIX_SIZE)\n\n  // Elastic Search does not support partial match on an Integer field\n  // as a workaround for number queries we will query for every size\n  if (isFeatureEnabled('REPOSITORY_SUGGESTER_ELASTIC_SEARCH') && Number.isFinite(Number(query))) {\n    prefix = query\n  }\n\n  const refinedResults = queryCache.get(prefix)\n  if (refinedResults) {\n    return searchWithin(refinedResults, query)\n  }\n\n  if (!queriesInProgress.has(prefix)) {\n    queriesInProgress.add(prefix)\n    const refinedPromise = refinedQuery(url, prefix, menu)\n    if (basicSearchResults.matches.length === 0) {\n      const deferredRefinedResults = await refinedPromise\n      return searchWithin(deferredRefinedResults, query)\n    }\n  }\n\n  return searchWithin(basicResults, query)\n}\n\n// Query dotcom for a list of suggestion results that match the given query prefix. This appends a `?q=` query\n// parameter to the normal issue suggestions URL.\n//\n// When the response arrives, updates queryCache with the new results. If a non-null `menu` element is provided and\n// the current suggestions menu within it is still showing results for a query with the same prefix, the menu's\n// options will be updated live to show suggestions from the refined query results, instead. Any active selection\n// within the menu will be preserved in the new menu contents.\nasync function refinedQuery(url: string, prefix: string, menu: Element | null): Promise<Data> {\n  const refinedQueryUrl = new URL(url, window.location.origin)\n  refinedQueryUrl.searchParams.set('q', prefix)\n\n  const data: Data = await jsonRequest(refinedQueryUrl.toString())\n\n  queryCache.set(prefix, data)\n  queriesInProgress.delete(prefix)\n\n  // Evict cached query results, oldest first, to bring us down to the cache limit.\n  if (queryCache.size > REFINED_QUERY_CACHE_SIZE) {\n    const overage = queryCache.size - REFINED_QUERY_CACHE_SIZE\n    const oldestKeys = Array.from(queryCache.keys()).slice(0, overage)\n    for (const key of oldestKeys) {\n      queryCache.delete(key)\n    }\n  }\n\n  // Replace live suggestions if still visible, preserving any active selection\n  const liveSuggestions = menu?.querySelector<HTMLElement>('ul.suggestions')\n  const liveQuery = liveSuggestions?.getAttribute('data-query')\n\n  if (liveSuggestions && liveQuery?.startsWith(prefix)) {\n    const selectedID = menu?.querySelector('[aria-activedescendant]')?.getAttribute('aria-activedescendant')\n\n    const list = document.createElement('div')\n    const results = searchWithin(data, liveQuery)\n    renderResults(results.matches, list, results.icons)\n    if (selectedID) {\n      for (const selectedElement of list.querySelectorAll(`#${selectedID}`)) {\n        selectedElement.setAttribute('aria-selected', 'true')\n      }\n    }\n\n    const root = list.firstElementChild as HTMLElement\n    liveSuggestions.replaceChildren(...root.children)\n  }\n\n  return data\n}\n\nasync function jsonRequest<T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n}\n\nconst cachedJSON = memoize(jsonRequest)\n","import {compose, fromEvent} from '@github-ui/subscription'\nimport {html, render} from '@github-ui/jtml-shimmed'\nimport {compare} from '@github-ui/fuzzy-filter'\nimport {filterSort} from '@github-ui/filter-sort'\nimport memoize from '@github/memoize'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface UserData {\n  login: string\n  type: string\n  id: string\n  name: string\n  description: string\n  participant?: boolean\n}\n\nfunction asText(item: UserData): string {\n  return item.description\n    ? `${item.name} ${item.description}`.trim().toLowerCase() // team\n    : `${item.login} ${item.name}`.trim().toLowerCase() // user\n}\n\nfunction search(items: UserData[], query: string): UserData[] {\n  if (!query) return items\n  const scorer = fuzzyScorer(query)\n  const key = (item: UserData) => {\n    const text = asText(item)\n    const score = scorer(text, item.participant)\n    return score > 0 ? {score, text} : null\n  }\n  return filterSort(items, key, compare)\n}\n\nfunction renderResults(usersAndTeams: UserData[], container: HTMLElement): void {\n  const itemsTemplate = (items: UserData[]) => html`\n    <ul role=\"listbox\" class=\"suggester-container suggester suggestions list-style-none position-absolute\">\n      ${items.map(itemTemplate)}\n    </ul>\n  `\n\n  const itemTemplate = (item: UserData) => {\n    const name = item.type === 'user' ? item.login : item.name\n    const desc = item.type === 'user' ? item.name : item.description\n    return html`\n      <li role=\"option\" id=\"suggester-${item.id}-${item.type}-${name}\" data-value=\"${name}\">\n        <span>${name}</span>\n        <small>${desc}</small>\n      </li>\n    `\n  }\n\n  render(itemsTemplate(usersAndTeams), container)\n}\n\nfunction fuzzyScorer(query: string): (text: string, participant?: boolean) => number {\n  if (!query) return () => 2.0\n  const queryChars = query.toLowerCase().split('')\n  return (text: string, participant?: boolean): number => {\n    if (!text) return 0.0\n    const match = shortestMatch(text, queryChars)\n    if (!match) return 0.0\n    const value = query.length / (match[1] as number)\n    const score = value / ((match[0] as number) / 2 + 1)\n    if (participant) return score + 1\n    return score\n  }\n}\n\n// Get the shortest match (least distance between start and end index) for all\n// the query characters in the given text.\n//\n// Returns an array in format [firstIndex, matchLength, [matchIndexes]]\nfunction shortestMatch(text: string, queryChars: string[]): Array<number | number[]> | null {\n  let indexes\n  let j\n  let len\n  let match\n  const starts = allIndexesOf(text, queryChars[0]!)\n  if (starts.length === 0) {\n    return null\n  }\n  if (queryChars.length === 1) {\n    return [starts[0]!, 1, []]\n  }\n  match = null\n  for (j = 0, len = starts.length; j < len; j++) {\n    const start = starts[j]!\n    if (!(indexes = indexesOfChars(text, queryChars, start + 1))) {\n      continue\n    }\n    const length = indexes[indexes.length - 1]! - start\n    if (!match || length < (match[1] as number)) {\n      match = [start, length, indexes]\n    }\n  }\n  return match\n}\n\n// Find all indexes of character inside a string.\nfunction allIndexesOf(string: string, char: string) {\n  let index = 0\n  const results1 = []\n  while ((index = string.indexOf(char, index)) > -1) {\n    results1.push(index++)\n  }\n  return results1\n}\n\n// Find all indexes of characters of query string in order.\nfunction indexesOfChars(string: string, chars: string[], startingIndex: number): number[] | undefined {\n  let index = startingIndex\n  const indexes = []\n  for (let i = 1; i < chars.length; i += 1) {\n    index = string.indexOf(chars[i]!, index)\n    if (index === -1) return\n    indexes.push(index++)\n  }\n  return indexes\n}\n\nobserve('text-expander[data-mention-url]', {\n  subscribe: el =>\n    compose(fromEvent(el, 'text-expander-change', onchange), fromEvent(el, 'text-expander-value', onvalue)),\n})\n\nfunction onvalue(event: Event) {\n  const detail = (event as CustomEvent).detail\n  if (detail.key !== '@') return\n  const login = detail.item.getAttribute('data-value')!\n  detail.value = `@${login}`\n}\n\nfunction onchange(event: Event) {\n  const {key, provide, text} = (event as CustomEvent).detail\n  if (key !== '@') return\n  // do not allow multi-word mentions\n  if (text?.split(' ').length > 1) return\n  const menu = event.target as Element\n  const url = menu.getAttribute('data-mention-url')!\n  provide(mentionMenu(url, text))\n}\n\nasync function mentionMenu(url: string, query: string): Promise<{fragment: HTMLElement; matched: boolean}> {\n  const data: UserData[] = await cachedJSON(url)\n  const list = document.createElement('div')\n  const results = search(data, query).slice(0, 5)\n  renderResults(results, list)\n  const root = list.firstElementChild as HTMLElement\n  return {fragment: root, matched: results.length > 0}\n}\n\nconst cachedJSON = memoize(async function <T>(url: RequestInfo): Promise<T> {\n  const response = await self.fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json',\n    },\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('change', 'input.js-survey-contact-checkbox', function (event: Event) {\n  const currentTarget = event.currentTarget as HTMLInputElement\n  const question = currentTarget.closest<HTMLElement>('.js-survey-question-form')!\n  const hiddenInput = question.querySelector<HTMLElement>('.js-survey-contact-checkbox-hidden')!\n  if (currentTarget.checked) {\n    hiddenInput.setAttribute('disabled', 'true')\n  } else {\n    hiddenInput.removeAttribute('disabled')\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non(\n  'details-menu-selected',\n  '.js-sync-select-menu-text',\n  function (event) {\n    const button = document.querySelector<HTMLElement>('.js-sync-select-menu-button')!\n    const text = (event.detail.relatedTarget as Element).querySelector<HTMLElement>(\n      'span[data-menu-button-text]',\n    )!.textContent\n    button.textContent = text\n    button.focus()\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('click', 'tab-container [role=\"tab\"]', function (event) {\n  const {currentTarget} = event\n\n  const menu = currentTarget.closest<HTMLElement>('tab-container')!\n  const filter = menu.querySelector('.js-filterable-field, [data-filter-placeholder-input]')\n  if (filter instanceof HTMLInputElement) {\n    const placeholder = currentTarget.getAttribute('data-filter-placeholder')\n    if (placeholder) {\n      filter.setAttribute('placeholder', placeholder)\n    }\n    filter.focus()\n  }\n})\n\non('tab-container-changed', 'tab-container', function (event) {\n  const panel = event.detail.relatedTarget\n  if (!panel) return\n  const url = panel.getAttribute('data-fragment-url')\n  const includeFragment = panel.querySelector('include-fragment')\n  if (url && includeFragment && !includeFragment.hasAttribute('src')) {\n    includeFragment.src = url\n  }\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load team members to display in the mention's tooltip from the server on hover.\nasync function members(event: Event) {\n  const target = event.currentTarget as HTMLElement\n  if (teamHovercardEnabled(target)) {\n    target.classList.remove('tooltipped')\n    return\n  }\n  const url = target.getAttribute('data-url')\n  if (!url) return\n\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (!response.ok) return\n  const data = (await response.json()) as {total: number; members: string[]}\n\n  const id = target.getAttribute('data-id')!\n  const mentions = document.querySelectorAll(`.js-team-mention[data-id='${id}']`)\n  for (const el of mentions) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    if (data.total === 0) {\n      // eslint-disable-next-line i18n-text/no-en\n      data.members.push('This team has no members')\n    } else if (data.total > data.members.length) {\n      data.members.push(`${data.total - data.members.length} more`)\n    }\n    tip(mentions, sentence(data.members))\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = error.response ? error.response.status : 500\n    const message = target.getAttribute(status === 404 ? 'data-permission-text' : 'data-error-text')!\n    tip(mentions, message)\n  }\n}\n\n// Add a tooltip to the elements. Adds the text just before the tooltip classes so\n// the tooltip appears fully formed on mouse hover.\nfunction tip(elements: NodeList, text: string): void {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.setAttribute('aria-label', text)\n    el.classList.add('tooltipped', 'tooltipped-s', 'tooltipped-multiline')\n  }\n}\n\n// Comma separate a list of strings with `and` at the end, like\n// Rails' to_sentence.\nfunction sentence(xs: string[]): string {\n  if ('ListFormat' in Intl) {\n    const lists = new Intl.ListFormat()\n    return lists.format(xs)\n  }\n\n  if (xs.length === 0) {\n    return ''\n  } else if (xs.length === 1) {\n    return xs[0]!\n  } else if (xs.length === 2) {\n    return xs.join(' and ')\n  } else {\n    const last = xs[xs.length - 1]\n    return xs.slice(0, -1).concat(`and ${last}`).join(', ')\n  }\n}\n\nfunction teamHovercardEnabled(element: HTMLElement): boolean {\n  return !!element.getAttribute('data-hovercard-url') && !!element.closest('[data-team-hovercards-enabled]')\n}\n\nobserve('.js-team-mention', function (el) {\n  el.addEventListener('mouseenter', members)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\ninterface Request {\n  url: string\n  headers: Headers\n}\n\nfunction getTimelineLastModified(): string | null {\n  const marker = document.querySelector('.js-timeline-marker')\n  return marker != null ? marker.getAttribute('data-last-modified') : null\n}\n\n// Add the X-Timeline-Last-Modified header to the request based on the\n// the last modified time from the timeline marker element.\nfunction addTimelineLastModifiedHeader(request: Request) {\n  if (isCrossDomain(request)) {\n    return\n  }\n\n  const lastModified = getTimelineLastModified()\n  if (lastModified) {\n    request.headers.set('X-Timeline-Last-Modified', lastModified)\n  }\n}\n\nfunction isCrossDomain(request: Request): boolean {\n  let requestURL\n  try {\n    // eslint-disable-next-line no-restricted-syntax\n    requestURL = new URL(request.url)\n  } catch {\n    return true\n  }\n  return requestURL.host !== window.location.host\n}\n\nremoteForm('.js-needs-timeline-marker-header', function (form, wants, request) {\n  addTimelineLastModifiedHeader(request)\n})\n\non('deprecatedAjaxSend', '[data-remote]', function (event) {\n  const {request} = event.detail\n  addTimelineLastModifiedHeader(request)\n})\n","import {isDetailsTargetExpanded, toggleDetailsTarget} from '../details'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport hashChange from '../hash-change'\nimport {loadDeferredContent} from '../include-fragment'\nimport {scrollIntoView} from '../../sticky-scroll-into-view'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst SCROLL_WAIT_MEDIA_TIMEOUT = 5000\nconst COMMENT_IMAGE = '.js-comment-body img'\nconst COMMENT_VIDEO = '.js-comment-body video'\n\nhashChange(function () {\n  focusOrLoadElement()\n})\n\nobserve('.js-timeline-progressive-focus-container', scrollToFocusTimelineEvent)\n\nwindow.addEventListener('sticky-header-rendered', () => {\n  scrollToFocusTimelineEvent()\n})\n\nfunction scrollToFocusTimelineEvent() {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const pullTimeline = document.querySelector<HTMLElement>('.js-pull-discussion-timeline')\n  if (pullTimeline) return\n\n  const target = document.getElementById(anchor)\n\n  if (target) {\n    focusElement(target)\n  }\n}\n\nfunction focusOrLoadElement(shouldLoadElement = true): void {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n  if (target) {\n    focusElement(target)\n  } else {\n    if (loadComments(anchor)) return\n\n    const loader = document.querySelector<HTMLElement>('#js-timeline-progressive-loader')\n\n    if (loader && shouldLoadElement) {\n      loadElement(anchor, loader)\n    }\n  }\n}\n\nfunction loadComments(anchor: string): boolean {\n  return (\n    loadResolvedComments(anchor) ||\n    loadHiddenComments(anchor, '.js-thread-hidden-comment-ids') ||\n    loadHiddenComments(anchor, '.js-review-hidden-comment-ids')\n  )\n}\n\nfunction loadResolvedComments(anchor: string): boolean {\n  const commentContainer = findCommentContainer(anchor, '.js-comment-container')\n  if (!commentContainer) return false\n\n  loadDeferredContent(commentContainer)\n  return true\n}\n\nfunction loadHiddenComments(anchor: string, selector: string): boolean {\n  const commentContainer = findCommentContainer(anchor, selector)\n  if (!commentContainer) return false\n\n  commentContainer.addEventListener('page:loaded', function () {\n    focusOrLoadElement()\n  })\n  commentContainer.querySelector<HTMLButtonElement>('button[type=submit]')!.click()\n  return true\n}\n\nfunction findCommentContainer(anchor: string, selector: string): Element | null {\n  const commentContainers = document.querySelectorAll(selector)\n\n  for (const commentContainer of commentContainers) {\n    const threadCommentIds = commentContainer.getAttribute('data-hidden-comment-ids')\n\n    if (threadCommentIds) {\n      const commentIds = threadCommentIds.split(',')\n      const anchorCommentId = anchor.match(/\\d+/g)?.[0]\n\n      if (anchorCommentId && commentIds.includes(anchorCommentId)) {\n        return commentContainer\n      }\n    }\n  }\n  return null\n}\n\nobserve('.js-inline-comments-container', function (container) {\n  const anchor = urlAnchor()\n  if (!anchor) return\n\n  const target = document.getElementById(anchor)\n\n  if (target && container.contains(target)) {\n    focusElement(target)\n  }\n})\n\n// adds support for deep-link loading discussion comments when the comment thread is nested\nobserve('#js-discussions-timeline-anchor-loader', {\n  constructor: HTMLElement,\n  add: element => {\n    const existingProgressiveLoader = document.querySelector('#js-timeline-progressive-loader')\n    if (existingProgressiveLoader) return\n\n    const anchor = urlAnchor()\n    if (!anchor) return\n\n    const target = document.getElementById(anchor)\n    if (!target) {\n      loadElement(anchor, element)\n    }\n  },\n})\n\n// resolves when comment body videos have loaded enough data to render the preview image\nasync function videosReady(): Promise<unknown> {\n  const videos: NodeListOf<HTMLVideoElement> = document.querySelectorAll(COMMENT_VIDEO)\n  const videoLoads = Array.from(videos).map(v => {\n    return new Promise<HTMLVideoElement>(resolve => {\n      if (v.readyState >= v.HAVE_METADATA) {\n        resolve(v)\n      } else {\n        // don't wait forever :)\n        const timeout = setTimeout(() => resolve(v), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(v)\n        }\n        v.addEventListener('loadeddata', () => {\n          if (v.readyState >= v.HAVE_METADATA) done()\n        })\n        v.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(videoLoads)\n}\n\n// resolves when comment body images are loaded\nasync function imagesReady(): Promise<unknown> {\n  const images: NodeListOf<HTMLImageElement> = document.querySelectorAll(COMMENT_IMAGE)\n  const imageLoads = Array.from(images).map(i => {\n    new Promise<HTMLImageElement>(resolve => {\n      if (i.complete) {\n        resolve(i)\n      } else {\n        const timeout = setTimeout(() => resolve(i), SCROLL_WAIT_MEDIA_TIMEOUT)\n        const done = () => {\n          clearTimeout(timeout)\n          resolve(i)\n        }\n        i.addEventListener('load', () => done())\n        i.addEventListener('error', () => done())\n      }\n    })\n  })\n  return Promise.all(imageLoads)\n}\n\nasync function mediaLoaded(): Promise<unknown> {\n  return Promise.all([videosReady(), imagesReady()])\n}\n\nasync function focusElement(element: HTMLElement): Promise<void> {\n  await mediaLoaded()\n  expandDetailsIfPresent(element)\n  const link = element.querySelector<HTMLElement>(`[href='#${element.id}']`)\n\n  scrollIntoView(element)\n  if (link) {\n    const oldValue = link.getAttribute('data-turbo')\n    link.setAttribute('data-turbo', 'false')\n    setTimeout(() => {\n      link.click()\n    }, 0)\n    if (oldValue === null) {\n      link.removeAttribute('data-turbo')\n    } else {\n      link.setAttribute('data-turbo', oldValue)\n    }\n  }\n}\n\nasync function loadElement(anchor: string, loader: HTMLElement): Promise<void> {\n  if (!loader) return\n\n  const path = loader.getAttribute('data-timeline-item-src')\n  if (!path) return\n\n  const url = new URL(path, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('anchor', anchor)\n  url.search = params.toString()\n\n  let html\n  try {\n    html = await fetchSafeDocumentFragment(document, url.toString())\n  } catch {\n    return\n  }\n\n  const newTimelineItem = html.querySelector('.js-timeline-item')\n  if (!newTimelineItem) return\n\n  const gid = newTimelineItem.getAttribute('data-gid')\n  if (!gid) return\n\n  const currentTimelineItem = document.querySelector(`.js-timeline-item[data-gid='${gid}']`)\n\n  if (currentTimelineItem) {\n    currentTimelineItem.replaceWith(newTimelineItem)\n\n    focusOrLoadElement(false)\n  } else {\n    const container = document.getElementById('js-progressive-timeline-item-container')\n    if (container) container.replaceWith(html)\n    focusOrLoadElement(false)\n  }\n}\n\nfunction expandDetailsIfPresent(element: HTMLElement): void {\n  const detailsContainer = element.closest<HTMLElement>('details, .js-details-container')\n  if (!detailsContainer) return\n  if (detailsContainer.nodeName === 'DETAILS') {\n    detailsContainer.setAttribute('open', 'open')\n  } else if (!isDetailsTargetExpanded(detailsContainer)) {\n    toggleDetailsTarget(detailsContainer)\n  }\n}\n\nfunction urlAnchor(): string {\n  return window.location.hash.slice(1)\n}\n","import {ready} from '@github-ui/document-ready'\n;(async function () {\n  if ('serviceWorker' in navigator) {\n    await ready\n    const serviceWorkerPath = document.querySelector<HTMLLinkElement>('link[rel=\"service-worker-src\"]')?.href\n    if (serviceWorkerPath) {\n      navigator.serviceWorker.register(serviceWorkerPath, {scope: '/'})\n    } else {\n      await unregisterAllServiceWorkers()\n    }\n  }\n})()\n\nasync function unregisterAllServiceWorkers() {\n  let registrations: readonly ServiceWorkerRegistration[] = []\n  try {\n    registrations = await navigator.serviceWorker.getRegistrations()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.name === 'SecurityError') return\n  }\n\n  for (const registration of registrations) {\n    registration.unregister()\n  }\n}\n","import {preservePosition} from 'scroll-anchoring'\nimport {replaceState} from '@github-ui/browser-history-state'\n\ndocument.addEventListener('keydown', (event: KeyboardEvent) => {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key !== 'Escape') return\n  if (event.target !== document.body) return\n\n  const element = document.querySelector('.js-targetable-element:target')\n  if (!element) return\n\n  preservePosition(element, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\ndocument.addEventListener('click', (event: MouseEvent) => {\n  // Return early if there is no highlighted element\n  const highlightedElement = document.querySelector('.js-targetable-element:target')\n  if (!highlightedElement) return\n\n  // Don't mess with the URL if we clicked on a link\n  if (event.target instanceof HTMLAnchorElement) return\n\n  // Don't do anything if the user clicked on the already highlighted element\n  if (!(event.target instanceof HTMLElement)) return\n  if (highlightedElement.contains(event.target)) return\n\n  preservePosition(highlightedElement, () => {\n    // Clear the `:target` element\n    window.location.hash = ''\n    // Clear the hash part of the URL\n    replaceState(window.history.state, '', window.location.pathname + window.location.search)\n  })\n})\n","import {announceFromElement} from '@github-ui/aria-live'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.js-discussion', announceTimelineEvents)\n\nfunction announceTimelineEvents() {\n  let existingTimelineItems: WeakSet<Element> = new WeakSet()\n  setExistingTimelineItems()\n\n  document.addEventListener('turbo:load', setExistingTimelineItems)\n\n  observe('.js-timeline-item', el => {\n    if (!(el instanceof HTMLElement)) return\n    if (existingTimelineItems.has(el)) return\n\n    announceFromElement(el)\n  })\n\n  function setExistingTimelineItems() {\n    existingTimelineItems = new WeakSet(document.querySelectorAll('.js-timeline-item'))\n  }\n}\n","// Toggler Behavior\n//\n// target    - Element with a \".js-toggler-target\" class name, clicking\n//             triggers toggle.\n// container - Element with a \".js-toggler-container\" class name,\n//             contains one or more targets.\n//\n// The toggle state is defined as \"off\" or \"on\". A \".on\" class name is\n// added to the container when the state is \"on\". \".on\" is removed if\n// the state is \"off\".\n//\n// Some extra AJAX states are available if any target makes use of\n// `data-remote`.\n//\n// loading - Added to the container before the request is sent and\n//           after it finishes.\n// success - Added to the container after a successful response\n//           returns.\n// error   - Added to the container after any bad responses.\n//\n// Examples\n//\n//   .starring-container .unstarred { display: block; }\n//   .starring-container.on .unstarred { display: none; }\n//   .starring-container .starred { display: none; }\n//   .starring-container.on .starred { display: block; }\n//\n//   <div class=\"js-toggler-container starring-container\">\n//     <button type=\"button\" href=\"#\" class=\"starred js-toggler-target\">Unstar repository</button>\n//     <button type=\"button\" class=\"unstarred js-toggler-target\">Star repository</button>\n//   </div>\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {remoteForm} from '@github/remote-form'\n\non('click', '.js-toggler-container .js-toggler-target', function (event) {\n  // Ignore right-click events.\n  if (event.button !== 0) return\n\n  const container = event.currentTarget.closest('.js-toggler-container')\n  if (container) container.classList.toggle('on')\n})\n\nremoteForm('.js-toggler-container', async (form, wants) => {\n  form.classList.remove('success', 'error')\n  form.classList.add('loading')\n\n  try {\n    await wants.text()\n    form.classList.add('success')\n  } catch {\n    form.classList.add('error')\n  } finally {\n    form.classList.remove('loading')\n  }\n})\n","import {PageRenderer, session, setProgressBarDelay} from '@github/turbo'\nimport {formatKeyToError} from './utils'\n\ninterface HeadSnapshot {\n  detailsByOuterHTML: {\n    [outerHTML: string]: {\n      tracked: boolean\n      elements: Element[]\n    }\n  }\n}\n\nsetProgressBarDelay(0)\n\nsession.isVisitable = () => true\n\n// get the reason why a Turbo request had to be reloaded so we can report metrics\nconst originalTrackedElementsAreIdentical = Object.getOwnPropertyDescriptor(PageRenderer.prototype, 'reloadReason')?.get\nObject.defineProperty(PageRenderer.prototype, 'reloadReason', {\n  get() {\n    const reloadReason = originalTrackedElementsAreIdentical?.call(this)\n\n    if (reloadReason.reason !== 'tracked_element_mismatch') {\n      return reloadReason\n    }\n\n    const currentTracked = Object.fromEntries(getSnapshotSignatures(this.currentHeadSnapshot))\n    const changedKeys = []\n\n    for (const [key, value] of getSnapshotSignatures(this.newHeadSnapshot)) {\n      if (currentTracked[key] !== value) {\n        changedKeys.push(formatKeyToError(key))\n      }\n    }\n\n    return {\n      reason: `tracked_element_mismatch-${changedKeys.join('-')}`,\n    }\n  },\n})\n\nfunction* getSnapshotSignatures(snapshot: HeadSnapshot): IterableIterator<[string, string]> {\n  for (const detail of Object.values(snapshot.detailsByOuterHTML)) {\n    if (detail.tracked) {\n      for (const element of detail.elements) {\n        if (element instanceof HTMLMetaElement && element.getAttribute('http-equiv')) {\n          yield [element.getAttribute('http-equiv') || '', element.getAttribute('content') || '']\n        }\n      }\n    }\n  }\n}\n","import {navigator} from '@github/turbo'\n\ntype State = Record<string, unknown> & {\n  turbo?: {restorationIdentifier: string}\n  skipTurbo?: boolean\n  usr?: {skipTurbo: boolean}\n  turboCount?: number\n}\n\n// keep Turbo's history up to date with the browser's in case code calls native history API's directly\nconst patchHistoryApi = (name: 'replaceState' | 'pushState') => {\n  const oldHistory = history[name]\n\n  history[name] = function (this: History, state?: State, unused?: string, url?: string | URL | null) {\n    const skipTurbo = state?.skipTurbo || state?.usr?.skipTurbo\n\n    // we need to merge the state from turbo with the state given to pushState in case others are adding data to the state\n    function oldHistoryWithMergedState(\n      this: History,\n      turboState: State,\n      turboUnused: string,\n      turboUrl?: string | URL | null,\n    ) {\n      const currentTurboCount = history.state?.turboCount || 0\n      // Only turbo navs have the `turbo` key when pushing state.\n      const turboCount = name === 'pushState' && state?.turbo ? currentTurboCount + 1 : currentTurboCount\n      const mergedState = skipTurbo ? {...state, skipTurbo: true} : {...state, ...turboState, turboCount}\n      oldHistory.call(this, mergedState, turboUnused, turboUrl)\n    }\n\n    navigator.history.update(\n      oldHistoryWithMergedState,\n      new URL(url || location.href, location.href),\n      state?.turbo?.restorationIdentifier,\n    )\n  }\n}\n\npatchHistoryApi('replaceState')\npatchHistoryApi('pushState')\n","import {session} from '@github/turbo'\n\ninterface ProgressBar {\n  setValue(n: number): void\n  hide(): void\n  show(): void\n}\n\ninterface BrowserAdapter {\n  progressBar: ProgressBar\n}\n\nconst adapter = session.adapter as typeof session.adapter & BrowserAdapter\n\n// Start the ProgressBar at the top of the page.\nexport const beginProgressBar = () => {\n  adapter.progressBar.setValue(0)\n  adapter.progressBar.show()\n}\n\n// Complete the ProgressBar at the top of the page.\nexport const completeProgressBar = () => {\n  adapter.progressBar.setValue(1)\n  adapter.progressBar.hide()\n}\n","import {ready} from '@github-ui/document-ready'\nimport {type CacheNode, getDocumentAttributes, getTurboCacheNodes} from './utils'\n\nconst turboPageNodes: Map<string, CacheNode> = new Map()\nconst turboDocumentAttributes: Map<string, Attr[]> = new Map()\n\nexport const getCachedNode = () => turboPageNodes.get(document.location.href)\nexport const setCachedNode = (url: string, node: CacheNode) => turboPageNodes.set(url, node)\nexport const setDocumentAttributesCache = () =>\n  turboDocumentAttributes.set(document.location.href, getDocumentAttributes())\nexport const getCachedAttributes = () => turboDocumentAttributes.get(document.location.href)\n;(async () => {\n  await ready\n  setCachedNode(document.location.href, getTurboCacheNodes(document))\n  setDocumentAttributesCache()\n})()\n","import {observe} from '@github/selector-observer'\nimport {isTurboFrame, waitForStylesheets, dispatchTurboReload, replaceElementAttributes, copyScriptTag} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport isHashNavigation from '@github-ui/is-hash-navigation'\nimport {getCachedAttributes, setDocumentAttributesCache} from './cache'\nimport {ssrSafeWindow, ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {getCurrentReactAppName, inSoftNav} from '@github-ui/soft-nav/utils'\nimport {replaceSoftNavMechanism, startSoftNav} from '@github-ui/soft-nav/state'\n\nlet responseFailed = false\nlet errorDocument: Document | null = null\n\nif (ssrSafeWindow) {\n  // We want to make sure that links inside a `data-turbo-frame` container also have the data attribute.\n  observe('[data-turbo-frame]', {\n    constructor: HTMLElement,\n    add(el) {\n      if (el.tagName === 'A' || el.getAttribute('data-turbo-frame') === '') return\n\n      for (const link of el.querySelectorAll('a:not([data-turbo-frame])')) {\n        link.setAttribute('data-turbo-frame', el.getAttribute('data-turbo-frame') || '')\n      }\n    },\n  })\n}\n\nssrSafeDocument?.addEventListener('turbo:click', function (event) {\n  if (!(event.target instanceof HTMLElement)) return\n  if (!(event instanceof CustomEvent)) return\n\n  // If we are already in a soft nav, it means the navigation is handled by a frame.\n  if (isFeatureEnabled('disable_turbo_visit') && !inSoftNav()) {\n    event.preventDefault()\n    return\n  }\n\n  // https://github.com/hotwired/turbo/issues/539\n  // If we are doing a hash navigation, we want to prevent Turbo from performing a visit\n  // so it won't mess with focus styles.\n  if (isHashNavigation(location.href, event.detail.url)) {\n    event.preventDefault()\n    // return early so we don't start a soft-nav\n    return\n  }\n\n  // Here is where ALL non-frame Turbo navigation starts. We start by emitting the `soft-nav:start` event with the correct `turbo` mechanism.\n  if (!event.defaultPrevented) {\n    startSoftNav('turbo')\n  }\n})\n\n// Emulate `onbeforeunload` event handler for Turbo navigations to\n// support warning a user about losing unsaved content\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', function (event) {\n  try {\n    const unloadMessage = window.onbeforeunload?.(event)\n\n    if (unloadMessage) {\n      const navigate = confirm(unloadMessage)\n      if (navigate) {\n        window.onbeforeunload = null\n      } else {\n        event.preventDefault()\n        completeProgressBar()\n      }\n    }\n  } catch (e) {\n    if (!(e instanceof Error)) throw e\n    if (e.message !== 'Permission denied to access object') throw e\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-request', event => {\n  if (event.defaultPrevented) return\n\n  const frame = event.target as Element\n  if (isTurboFrame(frame)) {\n    beginProgressBar()\n  }\n\n  // attach a Turbo specific header for visit requests so the server can track Turbo usage\n  if (frame?.tagName === 'HTML') {\n    const ev = event as CustomEvent\n    ev.detail.fetchOptions.headers['Turbo-Visit'] = 'true'\n\n    // We only add the headers when clicking links. This allows us to skip it when b/f navigating\n    if (inSoftNav()) {\n      ev.detail.fetchOptions.headers['Accept'] = 'text/html, application/xhtml+xml, application/json'\n      ev.detail.fetchOptions.headers['X-React-App-Name'] = getCurrentReactAppName() || 'rails'\n    }\n  }\n})\n\ntype FetchRequest = {\n  readonly delegate: FetchRequestDelegate\n}\ninterface FetchRequestDelegate {\n  requestErrored(request: FetchRequest, error: Error): void\n}\ntype FrameElement = {\n  readonly delegate: FrameElementDelegate\n}\ntype FrameElementDelegate = unknown\n\n// TODO: turbo upstream will emit this event eventually https://github.com/hotwired/turbo/pull/640\n// and we can remove the types above\nconst frame = ssrSafeDocument?.createElement('turbo-frame') as unknown as FrameElement\nconst controllerPrototype = Object.getPrototypeOf(frame.delegate)\nconst originalRequestErrored = controllerPrototype.requestErrored\ncontrollerPrototype.requestErrored = function (request: FetchRequest, error: Error) {\n  this.element.dispatchEvent(\n    new CustomEvent('turbo:fetch-error', {\n      bubbles: true,\n      detail: {request, error},\n    }),\n  )\n  return originalRequestErrored.apply(this, request, error)\n}\n\n// when a frame fetch request errors due to a network error\n// we reload the page to prevent hanging the progress bar indefinitely\nssrSafeDocument?.addEventListener('turbo:fetch-error', event => {\n  // we don't want to reload the page due to an error on a form\n  // since we might throw away the users work or submit the form again\n  // other handling would be needed for this use case\n  if (event.target instanceof HTMLFormElement) {\n    return\n  }\n\n  const fetchRequest = (event as CustomEvent).detail.request\n\n  window.location = fetchRequest.location\n  event.preventDefault()\n})\n\nssrSafeDocument?.addEventListener('turbo:before-fetch-response', async event => {\n  const fetchResponse = (event as CustomEvent).detail.fetchResponse\n\n  responseFailed = fetchResponse.statusCode >= 500\n  // Turbo is misbehaving when we Drive to our 404 page, so we\n  // can force a reload if the response is 404 and prevent Turbo\n  // from continuing.\n  if (fetchResponse.statusCode === 404) {\n    dispatchTurboReload(fetchResponse.statusCode)\n    window.location = fetchResponse.location\n    event.preventDefault()\n  }\n\n  // change softnav to be react\n  if (fetchResponse.header('X-React-Nav') === 'true') {\n    event.preventDefault()\n    const data = JSON.parse(await fetchResponse.responseText)\n    return navigateWithReact(data, new URL(fetchResponse.response.url, window.location.origin))\n  }\n\n  // Here we want to ensure that every time we navigate away from a page using Turbo, we set a restorationIdentifier.\n  // We have to do this because React removes the identifier to avoid an unwanted request when doing client-side navigations.\n  // But, since we are Turboing away from a page (React or not), we need to ensure that the identifier is present, so when we\n  // back navigate, the page will be refetched.\n  history.replaceState({...history.state, skipTurbo: false}, '', location.href)\n\n  if (responseFailed) {\n    const responseHTML = await fetchResponse.responseHTML\n    errorDocument = new DOMParser().parseFromString(responseHTML, 'text/html')\n  }\n})\n\nssrSafeDocument?.addEventListener('turbo:frame-render', event => {\n  if (isTurboFrame(event.target)) {\n    completeProgressBar()\n  }\n})\n\n// copy over new attributes on <html> to the existing page\nssrSafeDocument?.addEventListener('turbo:before-render', async event => {\n  if (!(event instanceof CustomEvent)) return\n\n  event.preventDefault()\n\n  event.detail.render = customDriveRender\n\n  await waitForStylesheets()\n\n  event.detail.resume(true)\n\n  // Update <html> attributes\n  replaceElementAttributes(document.documentElement, event.detail.newBody.ownerDocument.documentElement)\n  setDocumentAttributesCache()\n})\n\nconst navigateWithReact = (data: unknown, url: URL) => {\n  replaceSoftNavMechanism('react')\n  document.dispatchEvent(\n    new CustomEvent('react:soft-nav', {\n      detail: {data, pathname: url.pathname},\n    }),\n  )\n}\n\nconst nextEventLoopTick = () =>\n  new Promise<void>(resolve => {\n    setTimeout(() => resolve(), 0)\n  })\n\nconst customDriveRender = async (currentBody: HTMLBodyElement, newBody: HTMLBodyElement) => {\n  await nextEventLoopTick()\n\n  if (responseFailed && errorDocument) {\n    document.documentElement.replaceWith(errorDocument.documentElement)\n    for (const script of document.querySelectorAll('script')) {\n      const newScript = copyScriptTag(script)\n      if (newScript) script.replaceWith(newScript)\n    }\n    return\n  }\n\n  const currentTurboBody = currentBody.querySelector('[data-turbo-body]')\n  const newTurboBody = newBody.querySelector('[data-turbo-body]')\n\n  if (currentTurboBody && newTurboBody) {\n    replaceElementAttributes(currentBody, newBody)\n    currentTurboBody.replaceWith(newTurboBody)\n  } else {\n    dispatchTurboReload('missing_turbo_body')\n    window.location.reload()\n  }\n}\n\nssrSafeWindow?.addEventListener('popstate', () => {\n  const currentDocument = document.documentElement\n  const cachedAttributes = getCachedAttributes()\n\n  if (!cachedAttributes) return\n\n  for (const attr of currentDocument.attributes) {\n    if (!cachedAttributes.find(cached => cached.nodeName === attr.nodeName)) {\n      currentDocument.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of cachedAttributes) {\n    if (currentDocument.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      currentDocument.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n})\n","import {setDocumentAttributesCache} from './cache'\nimport {markTurboHasLoaded} from './utils'\nimport {beginProgressBar, completeProgressBar} from './progress-bar'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {hasSoftNavFailure, inSoftNav, setSoftNavFailReason, setSoftNavMechanism} from '@github-ui/soft-nav/utils'\nimport {endSoftNav, failSoftNav, initSoftNav, renderedSoftNav, succeedSoftNav} from '@github-ui/soft-nav/state'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\n// In case this event is triggered, it means we are in a Frame navigation, so we update the mechanism (if needed).\nssrSafeDocument?.addEventListener('turbo:frame-load', event => {\n  // When going to a React page, there is a chance that the soft-nav end event finishes before the frame-load event.\n  // In that case, we don't want to start a new soft-nav event here, so we'll skip this if the soft-nav has already ended.\n  if (inSoftNav()) setSoftNavMechanism('turbo.frame')\n  // When navigating using frames, we either render here, or wait for the react-app to render.\n  renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo.frame']})\n\n  if (!(event.target instanceof HTMLElement)) return\n\n  if (event.target.getAttribute('data-turbo-action') !== 'advance') {\n    // If we are not navigating to a new page, Turbo won't fire a `turbo:load` event, so we need to end the soft-nav here.\n    succeedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo.frame']})\n  }\n})\n\n// Turbo navigations should end here, unless we are navigating to a React app. In that case, React itself will\n// end the navigation, since Turbo doesn't know when React is done rendering.\nssrSafeDocument?.addEventListener('turbo:load', event => {\n  markTurboHasLoaded()\n  const isHardLoad = Object.keys((event as CustomEvent).detail.timing).length === 0\n\n  if (inSoftNav() && !isHardLoad && !hasSoftNavFailure()) {\n    // When navigating using drive, we either render here, or wait for the react-app to render.\n    renderedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo']})\n    // If going to a react app, we let React succeed the soft-nav.\n    succeedSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad && (hasSoftNavFailure() || inSoftNav())) {\n    // If going to a react app, we let React fail the soft-nav.\n    failSoftNav({skipIfGoingToReactApp: true, allowedMechanisms: ['turbo', 'turbo.frame']})\n  } else if (isHardLoad) {\n    initSoftNav()\n  }\n})\n\nssrSafeDocument?.addEventListener('beforeunload', () => endSoftNav())\n\n// Set the failure reason when we get a reload\nssrSafeDocument?.addEventListener('turbo:reload', function (event) {\n  if (!(event instanceof CustomEvent)) return\n\n  setSoftNavFailReason(event.detail.reason)\n})\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.END, setDocumentAttributesCache)\n\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.START, beginProgressBar)\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.PROGRESS_BAR.END, completeProgressBar)\n","import {setCookie} from '@github-ui/cookies'\nimport timezone from '../timezone'\n\n// eslint-disable-next-line compat/compat\nwindow.requestIdleCallback(() => {\n  const value = timezone()\n  if (value) {\n    setCookie('tz', encodeURIComponent(value))\n  }\n})\n","export default function timezone(): string | void {\n  if ('Intl' in window) {\n    try {\n      const format = new window.Intl.DateTimeFormat()\n      return format.resolvedOptions().timeZone\n    } catch {\n      // ignore\n    }\n  }\n}\n","import {attr, controller, target} from '@github/catalyst'\nimport type {WebauthnGetElement} from '@github-ui/webauthn-get-element'\nimport {State} from '@github-ui/webauthn-get-element'\nimport {\n  initializeMobileAuthRequestStatusPoll,\n  hidePromptAndShowErrorMessage as showGitHubMobileErrorState,\n  resetPrompt as resetGitHubMobilePrompt,\n} from '../sessions/github-mobile-two-factor'\nimport {supported} from '@github/webauthn-json/browser-ponyfill'\nimport {smsSending, smsSuccess} from '../sessions/two-factor'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nenum SudoCredentialOptionsElementState {\n  WebAuthn = 'webauthn',\n  Password = 'password',\n  GitHubMobile = 'github_mobile',\n  TotpApp = 'app',\n  TotpSms = 'sms',\n}\n\n@controller\nexport class SudoCredentialOptionsElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr initialState: string\n  @attr webauthnAvailable: string\n  @attr githubMobileAvailable: string\n  @attr totpAppAvailable: string\n  @attr totpSmsAvailable: string\n  @attr githubMobilePromptUrl: string\n  @attr githubMobileGenericErrorMessage: string\n  @attr smsGenericErrorMessage: string\n  @attr genericErrorMessage: string\n  @attr totpSmsTriggerUrl: string\n\n  @target flashErrorMessageContainer: HTMLElement\n  @target flashErrorMessageText: HTMLElement\n  @target webauthnContainer: HTMLElement\n  @target githubMobileContainer: HTMLElement\n  @target githubMobileLoading: HTMLElement\n  @target githubMobileLanding: HTMLElement\n  @target totpAppContainer: HTMLElement\n  @target totpSmsContainer: HTMLElement\n  @target totpSmsLanding: HTMLElement\n  @target passwordContainer: HTMLElement\n  @target githubMobileNoChallengeMessage: HTMLElement\n  @target githubMobileChallengeMessage: HTMLElement\n  @target githubMobileChallengeValue: HTMLElement\n\n  @target webauthnNav: HTMLElement\n  @target githubMobileNav: HTMLElement\n  @target totpAppNav: HTMLElement\n  @target totpSmsNav: HTMLElement\n  @target totpSmsResendNav: HTMLElement\n  @target passwordNav: HTMLElement\n\n  @target webauthnGet: WebauthnGetElement\n  @target loginField: HTMLInputElement\n  @target passwordField: HTMLInputElement\n\n  #currentState: SudoCredentialOptionsElementState\n\n  connectedCallback() {\n    // set state explicitly on load to get evaluated webauthn warnings, etc\n    const stateKey = this.initialState as SudoCredentialOptionsElementState\n    this.#currentState = stateKey\n    this.reRenderPrompt(true)\n  }\n\n  reRenderPrompt(initialLoad = false): void {\n    this.resetPrompt()\n    try {\n      switch (this.#currentState) {\n        case SudoCredentialOptionsElementState.WebAuthn:\n          this.renderWebauthnOption()\n          break\n        case SudoCredentialOptionsElementState.GitHubMobile:\n          this.renderGitHubMobileOption(initialLoad)\n          break\n        case SudoCredentialOptionsElementState.TotpApp:\n          this.renderTotpAppOption()\n          break\n        case SudoCredentialOptionsElementState.TotpSms:\n          this.renderTotpSmsOption(initialLoad)\n          break\n        case SudoCredentialOptionsElementState.Password:\n        default:\n          this.renderPasswordOption()\n          break\n      }\n      this.reRenderNavContainer()\n    } catch (e) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      this.handleUnexpectedPromptError(e)\n    }\n  }\n\n  handleUnexpectedPromptError(unexpectedError: Error) {\n    let errorMessage = ''\n\n    switch (this.#currentState) {\n      case SudoCredentialOptionsElementState.GitHubMobile:\n        errorMessage = this.githubMobileGenericErrorMessage\n        break\n      case SudoCredentialOptionsElementState.TotpSms:\n        errorMessage = this.smsGenericErrorMessage\n        break\n      default:\n        errorMessage = this.genericErrorMessage\n    }\n\n    // if we have an unexpected error, show a generic error message\n    // and try the password prompt as a fallback to prevent the user from being presented with an empty prompt / no options\n    if (unexpectedError && this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.renderPasswordOptionWithError(errorMessage)\n      throw unexpectedError // re-throw the error so we can capture any unexpected errors with failbot/sentry\n    }\n  }\n\n  renderPasswordOptionWithError(errorMessage: string): void {\n    this.showPassword()\n    this.showErrorMessage(errorMessage)\n  }\n\n  resetPrompt(): void {\n    this.hideErrorMessage()\n    if (this.isWebAuthnAvailable()) {\n      this.hideWebAuthn()\n    }\n    if (this.isGitHubMobileAvailable()) {\n      this.hideGitHubMobile()\n    }\n    if (this.isTotpAppAvailable()) {\n      this.hideTotpApp()\n    }\n    if (this.isTotpSmsAvailable()) {\n      this.hideTotpSms()\n    }\n    this.hidePassword()\n  }\n\n  hideWebAuthn() {\n    this.safeSetElementVisibility(this.webauthnContainer, false)\n    this.safeSetElementVisibility(this.webauthnNav, false)\n  }\n\n  hideGitHubMobile() {\n    this.safeSetElementVisibility(this.githubMobileContainer, false)\n    this.safeSetElementVisibility(this.githubMobileNav, false)\n    this.safeSetElementVisibility(this.githubMobileLoading, false)\n    this.safeSetElementVisibility(this.githubMobileLanding, false)\n  }\n\n  hideTotpApp() {\n    this.safeSetElementVisibility(this.totpAppContainer, false)\n    this.safeSetElementVisibility(this.totpAppNav, false)\n  }\n\n  hideTotpSms() {\n    this.safeSetElementVisibility(this.totpSmsContainer, false)\n    this.safeSetElementVisibility(this.totpSmsLanding, false)\n    this.safeSetElementVisibility(this.totpSmsNav, false)\n    this.safeSetElementVisibility(this.totpSmsResendNav, false)\n  }\n\n  hidePassword() {\n    this.safeSetElementVisibility(this.passwordContainer, false)\n    this.safeSetElementVisibility(this.passwordNav, false)\n  }\n\n  reRenderNavContainer() {\n    if (this.isWebAuthnAvailable() && this.#currentState !== SudoCredentialOptionsElementState.WebAuthn) {\n      this.safeSetElementVisibility(this.webauthnNav, true)\n    }\n    if (this.isGitHubMobileAvailable() && this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile) {\n      this.safeSetElementVisibility(this.githubMobileNav, true)\n    }\n    if (this.isTotpAppAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpApp) {\n      this.safeSetElementVisibility(this.totpAppNav, true)\n    }\n    if (this.isTotpSmsAvailable() && this.#currentState !== SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsNav, true)\n    }\n    if (this.#currentState !== SudoCredentialOptionsElementState.Password) {\n      this.safeSetElementVisibility(this.passwordNav, true)\n    }\n  }\n\n  renderWebauthnOption(): void {\n    this.safeSetElementVisibility(this.webauthnContainer, true)\n    this.webauthnGet?.setState(supported() ? State.Ready : State.Unsupported)\n  }\n\n  renderGitHubMobileOption(initialLoad: boolean): void {\n    try {\n      resetGitHubMobilePrompt()\n    } catch {\n      // ignore errors\n    }\n    // if it's the initial load, show the \"landing\" page that\n    // offers a button to initiate the GH mobile auth request\n    if (initialLoad) {\n      this.safeSetElementVisibility(this.githubMobileLoading, false)\n      this.safeSetElementVisibility(this.githubMobileLanding, true)\n      this.safeSetElementVisibility(this.githubMobileContainer, false)\n    } else {\n      this.safeSetElementVisibility(this.githubMobileLoading, true)\n      this.safeSetElementVisibility(this.githubMobileLanding, false)\n      this.safeSetElementVisibility(this.githubMobileContainer, false)\n      this.initiateGitHubMobileAuthRequest()\n    }\n  }\n\n  renderTotpSmsOption(initialLoad: boolean): void {\n    // if it's the initial load, show the \"landing\" page that\n    // offers a button to initiate the text message\n    if (initialLoad) {\n      this.safeSetElementVisibility(this.totpSmsLanding, true)\n      this.safeSetElementVisibility(this.totpSmsContainer, false)\n    } else {\n      this.safeSetElementVisibility(this.totpSmsLanding, false)\n      this.safeSetElementVisibility(this.totpSmsContainer, true)\n      this.initiateTotpSmsRequest()\n    }\n  }\n\n  renderTotpAppOption(): void {\n    this.safeSetElementVisibility(this.totpAppContainer, true)\n  }\n\n  renderPasswordOption(): void {\n    this.safeSetElementVisibility(this.passwordContainer, true)\n    if (this.loginField) {\n      this.loginField.focus()\n    } else {\n      this.passwordField?.focus()\n    }\n  }\n\n  hasMultipleOptions(): boolean {\n    return (\n      this.isWebAuthnAvailable() ||\n      this.isGitHubMobileAvailable() ||\n      this.isTotpAppAvailable() ||\n      this.isTotpSmsAvailable()\n    )\n  }\n\n  isWebAuthnAvailable(): boolean {\n    return this.webauthnAvailable === 'true'\n  }\n\n  isGitHubMobileAvailable(): boolean {\n    return this.githubMobileAvailable === 'true'\n  }\n\n  isTotpAppAvailable(): boolean {\n    return this.totpAppAvailable === 'true'\n  }\n\n  isTotpSmsAvailable(): boolean {\n    return this.totpSmsAvailable === 'true'\n  }\n\n  showWebauthn(): void {\n    this.#currentState = SudoCredentialOptionsElementState.WebAuthn\n    this.reRenderPrompt()\n  }\n\n  showGitHubMobile(): void {\n    this.#currentState = SudoCredentialOptionsElementState.GitHubMobile\n    this.reRenderPrompt()\n  }\n\n  showTotpApp(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpApp\n    this.reRenderPrompt()\n  }\n\n  showTotpSms(): void {\n    this.#currentState = SudoCredentialOptionsElementState.TotpSms\n    this.reRenderPrompt()\n  }\n\n  showPassword(): void {\n    this.#currentState = SudoCredentialOptionsElementState.Password\n    this.reRenderPrompt()\n  }\n\n  githubMobileRetry(e: Event): void {\n    e.preventDefault()\n    this.showGitHubMobile()\n  }\n\n  async initiateGitHubMobileAuthRequest(): Promise<void> {\n    const url = this.githubMobilePromptUrl\n    const csrfToken = (document.getElementById('sudo-credential-options-github-mobile-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n        return\n      }\n\n      const json = await response.json()\n      const hasChallenge = !!json.challenge\n\n      this.safeSetElementVisibility(this.githubMobileNoChallengeMessage, !hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeMessage, hasChallenge)\n      this.safeSetElementVisibility(this.githubMobileChallengeValue, hasChallenge)\n\n      if (hasChallenge) {\n        this.githubMobileChallengeValue.textContent = json.challenge\n      }\n\n      const el = document.getElementsByClassName('js-poll-github-mobile-sudo-authenticate')[0]!\n      initializeMobileAuthRequestStatusPoll(\n        el,\n        () => this.mobileApprovedHandler(),\n        (message: string) => this.mobileFailHandler(message),\n        () => this.mobileCancelCheck(),\n      )\n    } catch {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.mobileFailHandler(this.githubMobileGenericErrorMessage)\n      }\n    } finally {\n      if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n        this.safeSetElementVisibility(this.githubMobileLoading, false)\n        this.safeSetElementVisibility(this.githubMobileContainer, true)\n      }\n    }\n  }\n\n  async resendTotpSms(): Promise<void> {\n    this.hideErrorMessage()\n    // start the spinner\n    smsSending()\n    try {\n      await this.initiateTotpSmsRequest(true)\n    } catch {\n      // errors are handled in the initiateTotpSmsRequest method\n    }\n    // always stop the spinner\n    document.body.classList.remove('is-sending')\n  }\n\n  async initiateTotpSmsRequest(isResend = false): Promise<void> {\n    const url = new URL(this.totpSmsTriggerUrl, window.location.origin)\n    if (isResend) {\n      url.searchParams.set('resend', 'true')\n    }\n    const csrfToken = (document.getElementById('sudo-credential-options-sms-csrf') as HTMLInputElement).value\n    const data = new FormData()\n    // eslint-disable-next-line github/authenticity-token\n    data.append('authenticity_token', csrfToken)\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n        body: data,\n      })\n      if (!response.ok && this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        const responseJson = await response.json()\n        this.showErrorMessage(responseJson.error)\n      } else if (this.#currentState === SudoCredentialOptionsElementState.TotpSms && isResend) {\n        smsSuccess()\n      }\n    } catch {\n      if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n        this.showErrorMessage(this.smsGenericErrorMessage)\n      }\n    }\n    if (this.#currentState === SudoCredentialOptionsElementState.TotpSms) {\n      this.safeSetElementVisibility(this.totpSmsResendNav, true)\n    }\n  }\n\n  mobileApprovedHandler(): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      const form = this.githubMobileContainer.getElementsByTagName('form')[0]!\n      requestSubmit(form)\n    }\n  }\n\n  mobileFailHandler(message: string): void {\n    if (this.#currentState === SudoCredentialOptionsElementState.GitHubMobile) {\n      this.showErrorMessage(message)\n      showGitHubMobileErrorState()\n    }\n  }\n\n  mobileCancelCheck(): boolean {\n    return this.#currentState !== SudoCredentialOptionsElementState.GitHubMobile\n  }\n\n  safeSetElementVisibility(elem: HTMLElement, visible: boolean): boolean {\n    if (elem) {\n      elem.hidden = !visible\n      return true\n    }\n    return false\n  }\n\n  showErrorMessage(message: string): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = message\n      this.safeSetElementVisibility(this.flashErrorMessageContainer, true)\n    }\n  }\n\n  hideErrorMessage(): void {\n    if (this.flashErrorMessageText) {\n      this.flashErrorMessageText.textContent = ''\n    }\n    this.safeSetElementVisibility(this.flashErrorMessageContainer, false)\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nlet unreadCount = 0\n\nfunction markThreadAsRead() {\n  if (!document.hasFocus()) return\n  const form = document.querySelector('.js-timeline-marker-form')\n  if (form && form instanceof HTMLFormElement) requestSubmit(form)\n}\n\nconst observer =\n  'IntersectionObserver' in window\n    ? new IntersectionObserver(\n        function (entries) {\n          for (const entry of entries) {\n            if (entry.isIntersecting) {\n              clearUnread(entry.target)\n            }\n          }\n        },\n        {\n          root: null,\n          rootMargin: '0px',\n          threshold: 1.0,\n        },\n      )\n    : null\n\nobserve('.js-unread-item', {\n  constructor: HTMLElement,\n  add(el) {\n    unreadCount++\n    if (observer) {\n      observer.observe(el)\n    }\n  },\n  remove(el) {\n    unreadCount--\n    if (observer) {\n      observer.unobserve(el)\n    }\n    if (unreadCount === 0) {\n      markThreadAsRead()\n    }\n  },\n})\n\nfunction clearUnread(el: Element) {\n  el.classList.remove('js-unread-item', 'unread-item')\n}\n\n// Mark any unread comments as read if the user has marked the thread as read\n// in another tab or remotely via email notification.\nobserve('.js-discussion[data-channel-target]', {\n  subscribe: el =>\n    fromEvent(el, 'socket:message', function (event: Event) {\n      const target = event.target as Element\n      const data = (event as CustomEvent).detail.data\n      if (target.getAttribute('data-channel-target') === data.gid) {\n        for (const item of document.querySelectorAll('.js-unread-item')) {\n          clearUnread(item)\n        }\n      }\n    }),\n})\n","// Unread Item Counter\n//\n// Keeps count of how many unread items are present throughout the page. The\n// count is reflected in the page title automatically.\n//\n// To increase or decrease the page title counter, it's as simple as adding or\n// removing the `.js-unread-item` class from an element. The counter is reset and\n// the page title is cleared when there are no more elements with the\n// `.js-unread-item` class present.\n//\n// Markup\n//\n// ``` html\n// <div class=\"comment js-comment js-unread-item\">\n//   :metal:\n// </div>\n// ```\n//\n\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nlet unreadCounter = 0\nconst titleRe = /^\\(\\d+\\)\\s+/\n\nfunction updateTitle() {\n  const prefix = unreadCounter ? `(${unreadCounter}) ` : ''\n  if (document.title.match(titleRe)) {\n    document.title = document.title.replace(titleRe, prefix)\n  } else {\n    document.title = `${prefix}${document.title}`\n  }\n}\n\nobserve('.js-unread-item', {\n  add() {\n    unreadCounter++\n    updateTitle()\n  },\n  remove() {\n    unreadCounter--\n    updateTitle()\n  },\n})\n","//\n// Updatable Content\n//\n// Markup\n//\n//     <div class=\"js-socket-channel js-updatable-content\"\n//          data-channel=\"pull:123\"\n//          data-url=\"/pull/123?partial=commits\">\n//     </div>\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {makeSocketMessageHandler} from '@github-ui/alive-socket-channel'\n\nconst handleSocketMessage = makeSocketMessageHandler()\n\nobserve('.js-socket-channel.js-updatable-content', {\n  subscribe: el => fromEvent(el, 'socket:message', handleSocketMessage),\n})\n","import {registerStaleRecords, replaceContent} from '@github-ui/updatable-content'\nimport {ready} from '@github-ui/document-ready'\nimport {replaceState} from '@github-ui/browser-history-state'\n\nasync function reapplyPreviouslyUpdatedContent() {\n  if (!history.state || !history.state.staleRecords) return\n  await ready\n  for (const url in history.state.staleRecords) {\n    for (const urlTarget of document.querySelectorAll(\n      `.js-updatable-content [data-url='${url}'], .js-updatable-content[data-url='${url}']`,\n    )) {\n      const data = history.state.staleRecords[url]\n      if (urlTarget instanceof HTMLElement) replaceContent(urlTarget, data, true)\n    }\n  }\n  replaceState(null, '', location.href)\n}\n\nwindow.addEventListener('pagehide', registerStaleRecords)\n\ntry {\n  reapplyPreviouslyUpdatedContent()\n} catch {\n  // ignore\n}\n","import {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\non('upload:setup', '.js-upload-avatar-image', function (event) {\n  const {form} = event.detail\n  const orgId = event.currentTarget.getAttribute('data-alambic-organization')\n  const ownerType = event.currentTarget.getAttribute('data-alambic-owner-type')\n  const ownerId = event.currentTarget.getAttribute('data-alambic-owner-id')\n  if (orgId) {\n    form.append('organization_id', orgId)\n  }\n  if (ownerType) {\n    form.append('owner_type', ownerType)\n  }\n  if (ownerId) {\n    form.append('owner_id', ownerId)\n  }\n})\n\non('upload:complete', '.js-upload-avatar-image', function (event) {\n  const {attachment} = event.detail\n  const url = `/settings/avatars/${attachment.id}`\n  dialog({content: fetchSafeDocumentFragment(document, url), detailsClass: 'upload-avatar-details'})\n})\n\non('dialog:remove', '.upload-avatar-details', async function (element) {\n  const cropForm = element.currentTarget.querySelector('#avatar-crop-form')!\n  const id = cropForm.getAttribute('data-alambic-avatar-id')!\n  const url = `/settings/avatars/${id}?op=destroy`\n\n  const csrfToken = element.currentTarget.querySelector('.js-avatar-post-csrf')!.getAttribute('value')!\n\n  const request = new Request(url, {\n    method: 'POST',\n    headers: {\n      'Scoped-CSRF-Token': csrfToken,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  await self.fetch(request)\n})\n","// Support linking to named anchors in user content\n//\n// Named elements in user content are prefixed with \"user-content-\" to prevent\n// DOM clobbering. This allows users to link to the unprefixed named anchors by\n// listening for hashchange and, when when no elements with an ID or name of the\n// given hash exist, looks for an element with a prefixed name.\n//\n// See https://github.com/github/github/issues/23103 for more information.\n\nimport {decodeFragmentValue, findElementByFragmentName} from '../fragment-target'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {ready} from '@github-ui/document-ready'\nimport {scrollIntoView} from '../sticky-scroll-into-view'\nimport {getUserContentScrolling} from '@github-ui/allow-user-content-scrolling'\n\nfunction hashchange() {\n  if (!getUserContentScrolling()) {\n    return\n  }\n\n  if (document.querySelector(':target')) {\n    return\n  }\n  const hash = decodeFragmentValue(location.hash)\n\n  // Auto-generated wiki ToCs prefix the hash with \"user-content-\". This allows users to link to the unprefixed named\n  // by clicking the markdown header  or by copying the link from the ToC.\n  const normalizedHash = hash.startsWith('user-content-') ? hash : `user-content-${hash}`\n\n  // Check for an element with the given hash as is to support links from auto-generated wiki ToCs, if not found,\n  // check for an element with the hash in lowercase to support markdown links i.e. [text](url).\n  const target =\n    findElementByFragmentName(document, normalizedHash) ??\n    findElementByFragmentName(document, normalizedHash.toLowerCase())\n\n  if (target) {\n    scrollIntoView(target)\n  }\n}\n\n// Scroll to anchor when clicked on page.\nwindow.addEventListener('hashchange', hashchange)\n\n// Scroll to anchor on turbo navigation\ndocument.addEventListener('turbo:load', hashchange)\n\n// Scroll to anchor on page load.\n;(async function () {\n  await ready\n  hashchange()\n})()\n\n// Scroll to anchor when clicking on a link that has the exact same fragment\n// identifier as already present in the URL. This won't trigger `hashchange`,\n// so we need to scroll manually.\non('click', 'a[href]', function (event) {\n  const {currentTarget} = event\n  if (!(currentTarget instanceof HTMLAnchorElement)) return\n\n  if (currentTarget.href === location.href && location.hash.length > 1) {\n    setTimeout(function () {\n      if (!event.defaultPrevented) hashchange()\n    })\n  }\n})\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nasync function load() {\n  await import('../user-status-submit')\n}\n\nobserve('.js-user-status-container, .js-load-user-status-submit', {\n  subscribe: el => fromEvent(el, 'click', load, {once: true}),\n})\n\n// if the form is added to the page without container click, load the submit behavior\nobserve('.user-status-dialog-fragment', {\n  add: load,\n})\n","// User list dialogs\n//\n// Handle user list creation, deletion, and editing.\n\n// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport type {SimpleResponse} from '@github/remote-form'\nimport {TemplateInstance} from '@github/template-parts'\nimport {dialog} from '@github-ui/details-dialog'\nimport {hasDirtyFields} from '@github-ui/has-interactions'\nimport {onInput} from '@github-ui/onfocus'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\nimport {showGlobalError} from './ajax-error'\nimport {updateContent} from '@github-ui/updatable-content'\nimport {updateSocialCounts} from './social'\n\n// Communicate a generic error, not associated with a specific attribute, to the user. This is used if the\n// server does something unexpected, like returning a 500 error or reporting an unrecognized attribute.\nfunction setFlashError(form: HTMLFormElement, message?: string) {\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.textContent = message || flash.getAttribute('data-generic-message')\n    flash.hidden = false\n  }\n}\n\n// Clear any validation errors from the form. If a specific formGroup is provided, only clear errors from that\n// group. Otherwise, clear errors from all groups. In either case, flash errors should be cleared as well.\nfunction resetValidation(form: HTMLFormElement, formGroup?: HTMLElement) {\n  const container = formGroup || form\n  const notes = container.querySelectorAll<HTMLElement>('.js-user-list-error')\n  for (const note of notes) {\n    note.hidden = true\n  }\n\n  const groups = formGroup ? [formGroup] : form.querySelectorAll<HTMLElement>('.errored.js-user-list-input-container')\n  for (const group of groups) {\n    group.classList.remove('errored')\n  }\n\n  const flash = form.querySelector<HTMLElement>('.js-user-list-base')\n  if (flash) {\n    flash.hidden = true\n  }\n}\n\n// Wire up remote form submission. Clear preexisting validation errors from the form, submit it with XHR, and interpret\n// the server's response. On success, reload the page. On failure, attempt to interpret the response as validation\n// errors and display them next to the appropriate inputs.\nremoteForm('.js-user-list-form', async function (form, wants) {\n  resetValidation(form)\n\n  const submitButton = form.querySelector<HTMLButtonElement>('[data-submitting-message]')\n  const originalButtonText = submitButton?.textContent\n  if (submitButton) {\n    // We can't use data-disable-with here because the button is re-enabled immediately after the response is received,\n    // but before we have a chance to handle it and redirect or swap out the form contents. This results in a\n    // disorienting jitter.\n    submitButton.textContent = submitButton.getAttribute('data-submitting-message')\n    submitButton.disabled = true\n  }\n\n  for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n    input.disabled = true\n  }\n\n  try {\n    const response = await wants.html()\n\n    // Let a containing element determine how to handle the response.\n    fire(form, 'user-list-form:success', response.html)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response?.status === 422) {\n      // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n      form.replaceWith(error.response.html)\n    } else {\n      setFlashError(form)\n\n      if (submitButton) {\n        if (originalButtonText) submitButton.textContent = originalButtonText\n        submitButton.disabled = false\n      }\n\n      for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-input')) {\n        input.disabled = false\n      }\n    }\n  }\n})\n\non('user-list-form:success', '.js-follow-list', event => {\n  const responseBody = event.detail\n  const targetUrlElement =\n    responseBody instanceof DocumentFragment ? responseBody.querySelector<HTMLAnchorElement>('.js-target-url') : null\n  if (targetUrlElement?.href) {\n    location.href = targetUrlElement.href\n  } else {\n    location.reload()\n  }\n})\n\n// Dismiss a validation error from a form input when you start changing it.\nfunction clearErrorsFromInput(event: Event) {\n  if (!(event.currentTarget instanceof HTMLElement)) {\n    return\n  }\n\n  const form = event.currentTarget.closest<HTMLFormElement>('.js-user-list-form')\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  if (form && formGroup) {\n    resetValidation(form, formGroup)\n  }\n}\n\nonInput('.js-user-list-form input', clearErrorsFromInput)\nonInput('.js-user-list-form textarea', clearErrorsFromInput)\n\n// Unhide the .note element containing the validation error reported by <auto-check> when there's an error to show.\non('auto-check-error', '.js-user-list-form input', function (event) {\n  const formGroup = event.currentTarget.closest<HTMLElement>('.js-user-list-input-container')\n  const note = formGroup?.querySelector<HTMLElement>('.js-user-list-error')\n  if (note) {\n    note.hidden = false\n  }\n})\n\n// Star button UserList menu\n\n// Given a collection of UserList menu root elements, construct a map grouping them by the repository ID each\n// corresponds to.\nfunction groupRootsByRepositoryId(roots: Iterable<HTMLElement>): Map<string, HTMLElement[]> {\n  const rootsByRepositoryId = new Map<string, HTMLElement[]>()\n  for (const root of roots) {\n    const repositoryId = root\n      .querySelector<HTMLInputElement>('.js-user-lists-create-trigger')\n      ?.getAttribute('data-repository-id')\n    if (repositoryId) {\n      const existingRoots = rootsByRepositoryId.get(repositoryId)\n      if (existingRoots) {\n        existingRoots.push(root)\n      } else {\n        rootsByRepositoryId.set(repositoryId, [root])\n      }\n    }\n  }\n  return rootsByRepositoryId\n}\n\n// Perform a POST request to the batch-render endpoint to render a collection of UserList menus corresponding to the\n// repositories. Asynchronously returns a Map<repository ID> => rendered HTML generated for that repository.\n//\n// Rejects its promise on network errors, but returns an empty map on server errors.\nasync function requestMenuBatchRender(\n  batchUpdateUrl: string,\n  csrfToken: string,\n  repositoryIds: Iterable<string>,\n): Promise<Map<string, DocumentFragment>> {\n  const postData = new FormData()\n\n  // eslint-disable-next-line github/authenticity-token\n  postData.set('authenticity_token', csrfToken)\n  for (const repositoryId of repositoryIds) {\n    postData.append('repository_ids[]', repositoryId)\n  }\n\n  const response = await fetch(batchUpdateUrl, {\n    method: 'POST',\n    body: postData,\n    headers: {\n      Accept: 'application/json',\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  const updatedMenuContents = new Map<string, DocumentFragment>()\n  if (response.ok) {\n    const json = await response.json()\n    for (const key in json) {\n      updatedMenuContents.set(key, parseHTML(document, json[key]))\n    }\n  }\n  return updatedMenuContents\n}\n\n// Replace the contents of UserList menus in the DOM with the updated, rendered HTML generated for each by the batch\n// render endpoint.\nfunction replaceUserListMenuRoots(\n  renderedMenuContents: Map<string, DocumentFragment>,\n  rootsByRepositoryId: Map<string, HTMLElement[]>,\n) {\n  for (const [repositoryId, updatedMenu] of renderedMenuContents.entries()) {\n    const matchingRoots = rootsByRepositoryId.get(repositoryId) || []\n    for (const root of matchingRoots) {\n      root.replaceWith(matchingRoots.length === 1 ? updatedMenu : updatedMenu.cloneNode(true))\n    }\n  }\n}\n\n// Perform a single request to replace all UserList menus currently present in the DOM with updated versions from the\n// server.\n//\n// Expects a response in form of:\n//\n// {\n//   \"<repo id 0>\": \"<div> <!-- markup for menu for repo 0 --></div>\",\n//   \"<repo id 1>\": \"<div> <!-- markup for menu for repo 1 --></div>\",\n//   \"<repo id 2>\": \"<div> <!-- markup for menu for repo 2 --></div>\"\n// }\nasync function updateAllUserListMenus() {\n  const roots = document.querySelectorAll<HTMLElement>('.js-user-list-menu-content-root')\n  if (roots.length === 0) return\n\n  const batchUpdateUrl = roots[0]!.getAttribute('data-batch-update-url')\n  if (!batchUpdateUrl) return\n\n  const csrfToken = roots[0]!.querySelector<HTMLInputElement>('.js-user-list-batch-update-csrf')?.value\n  if (!csrfToken) return\n\n  const rootsByRepositoryId = groupRootsByRepositoryId(roots)\n  const repositoryIds = rootsByRepositoryId.keys()\n  const renderedMenuContents = await requestMenuBatchRender(batchUpdateUrl, csrfToken, repositoryIds)\n  if (renderedMenuContents.size > 0) {\n    replaceUserListMenuRoots(renderedMenuContents, rootsByRepositoryId)\n  }\n}\n\nfunction requestUserListMenuFormSubmit(form: HTMLFormElement) {\n  const promise = new Promise<void>((resolve, reject) => {\n    form.addEventListener('user-list-menu-form:success', () => resolve())\n    form.addEventListener('user-list-menu-form:error', error => reject(error))\n  })\n  requestSubmit(form)\n  return promise\n}\n\nfunction submitUserListFormOnToggle(event: Event) {\n  const detailsElement = event.target\n  if (!(detailsElement instanceof HTMLDetailsElement)) return\n  if (detailsElement.hasAttribute('open')) return\n\n  const form = detailsElement.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n  if (form && hasDirtyFields(form)) requestSubmit(form)\n\n  const triggerText = detailsElement.querySelector('.js-user-list-create-trigger-text')\n  if (triggerText) triggerText.textContent = ''\n}\n\non('toggle', '.js-user-list-menu', submitUserListFormOnToggle, {capture: true})\n\nonInput('.js-user-lists-menu-filter', (event: Event) => {\n  const target = event.currentTarget as HTMLInputElement\n  const value = target.value.trim()\n  const root = target.closest('.js-user-list-menu-content-root')\n  const triggerText = root?.querySelector('.js-user-list-create-trigger-text')\n\n  if (!triggerText) return\n  triggerText.textContent = value ? `\"${value}\"` : ''\n})\n\nremoteForm('.js-user-list-menu-form', async function (form, wants) {\n  let response: SimpleResponse\n  try {\n    response = await wants.json()\n  } catch (error) {\n    showGlobalError()\n    fire(form, 'user-list-menu-form:error', error)\n    return\n  }\n\n  // Update the star button state and counts if necessary.\n  // We only update the star count if the repo was just starred. Otherwise the count could jump every time you dismiss\n  // the menu, which would be jarring.\n  if (response.json.didStar) {\n    const togglerContainer = form.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = response.json.starCount\n    if (starCount) {\n      const socialContainer = form.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n  }\n\n  const menuContentRoot = form.closest<HTMLElement>('.js-user-list-menu-content-root[data-update-after-submit]')\n  if (menuContentRoot) {\n    // Reset checkbox state before potentially calling updateContent() to avoid the checkboxes being detected as \"dirty\"\n    // and terminating the update. They'll be checked in the updated content, assuming the repo was in fact added\n    // successfully.\n    for (const input of form.querySelectorAll<HTMLInputElement>('.js-user-list-menu-item')) {\n      input.checked = input.defaultChecked\n    }\n  }\n\n  if (response.json.didCreate) {\n    // There's a new UserList to include in the menus now. Let's batch-update them all.\n    await updateAllUserListMenus()\n  } else if (menuContentRoot) {\n    // Otherwise, only update our local menu.\n    await updateContent(menuContentRoot)\n  }\n\n  fire(form, 'user-list-menu-form:success')\n})\n\n// Delete dialog\n\non('click', '.js-user-list-delete-confirmation-trigger', event => {\n  const {currentTarget} = event\n  const templateID = currentTarget.getAttribute('data-template-id')\n  if (!templateID) return\n\n  const template = document.getElementById(templateID)\n  if (!template || !(template instanceof HTMLTemplateElement)) return\n\n  const editDialog = currentTarget.closest<HTMLDetailsElement>('.js-edit-user-list-dialog')\n  if (editDialog) {\n    editDialog.open = false\n  }\n  const content = template.content.cloneNode(true)\n  const labelledBy = template.getAttribute('data-labelledby')!\n\n  dialog({content, labelledBy})\n})\n\n// Create dialog\n\non('click', '.js-user-lists-create-trigger', async function (event) {\n  const {currentTarget} = event\n  const template = document.querySelector<HTMLTemplateElement>('.js-user-list-create-dialog-template')\n  const repositoryId = event.currentTarget.getAttribute('data-repository-id')\n  const userListMenuRoot = currentTarget.closest<HTMLElement>('.js-user-list-menu-content-root')\n  const filter = userListMenuRoot?.querySelector<HTMLInputElement>('.js-user-lists-menu-filter')\n  const placeholderName = filter?.value.trim()\n\n  const userListMenuDetailsElement = userListMenuRoot?.closest<HTMLDetailsElement>('.js-user-list-menu')\n\n  if (!template || !(template instanceof HTMLTemplateElement) || !repositoryId) {\n    // No template rendered on the page, or malformed button markup.\n    // Disable the button as something marginally better than silently doing nothing.\n    if (currentTarget instanceof HTMLButtonElement) {\n      currentTarget.disabled = true\n    }\n    return\n  }\n\n  const label = template.getAttribute('data-label')!\n\n  // Submit the form first if there are any dirty fields.\n  if (userListMenuRoot && hasDirtyFields(userListMenuRoot)) {\n    const userListMenuForm = userListMenuRoot.querySelector<HTMLFormElement>('.js-user-list-menu-form')\n    if (userListMenuForm) await requestUserListMenuFormSubmit(userListMenuForm)\n  }\n\n  const content = new TemplateInstance(template, {repositoryId, placeholderName})\n  const dialogElement = await dialog({content, label})\n\n  // The Lists menu was keeping focus so close it so the Create list menu has focus\n  // when it's opened.\n  if (userListMenuDetailsElement) userListMenuDetailsElement.open = false\n\n  dialogElement.addEventListener('user-list-form:success', async formEvent => {\n    const payload = (formEvent as CustomEvent).detail\n    if (!(payload instanceof DocumentFragment)) return\n\n    // Update the star button.\n    const urlTargetElement = payload.querySelector('.js-target-url')\n\n    const didStar = urlTargetElement?.getAttribute('data-did-star') === 'true'\n    const detailsElement = dialogElement.closest<HTMLDetailsElement>('details')\n\n    if (!didStar) {\n      if (detailsElement) detailsElement.open = false\n      await updateAllUserListMenus()\n\n      return\n    }\n\n    const togglerContainer = currentTarget.closest<HTMLElement>('.js-toggler-container')\n    if (togglerContainer) togglerContainer.classList.add('on')\n\n    const starCount = urlTargetElement?.getAttribute('data-star-count')\n    if (starCount) {\n      const socialContainer = currentTarget.closest<HTMLElement>('.js-social-container')\n      if (socialContainer) updateSocialCounts(socialContainer, starCount)\n    }\n\n    // Update all currently loaded user list menu contents to include the created list.\n    await updateAllUserListMenus()\n\n    // Then, dismiss the dialog.\n    if (detailsElement) detailsElement.open = false\n  })\n})\n","import {hasDirtyFields} from '@github-ui/has-interactions'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Add the 'data-warn-unsaved-changes' attribute to any form/container element\n// and it will be monitored for changes. If the user attempts to\n// navigate away from the page without first saving their changes, an alert\n// will warn them.\nobserve('[data-warn-unsaved-changes]', {\n  add(container) {\n    container.addEventListener('input', prepareUnsavedChangesWarning)\n    container.addEventListener('change', prepareUnsavedChangesWarning)\n    container.addEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.addEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.addEventListener('details-dialog-close', promptOnDialogClosing)\n    }\n  },\n  remove(container) {\n    container.removeEventListener('input', prepareUnsavedChangesWarning)\n    container.removeEventListener('change', prepareUnsavedChangesWarning)\n    container.removeEventListener('submit', disableSaveChangesReminder)\n\n    const dialog = container.closest('details-dialog')\n    if (dialog) {\n      dialog.closest<HTMLElement>('details')!.removeEventListener('toggle', disableSaveChangesReminderOnClosedDialogs)\n      dialog.removeEventListener('details-dialog-close', promptOnDialogClosing)\n      disableSaveChangesReminder()\n    }\n  },\n})\n\nfunction prepareUnsavedChangesWarning(event: Event) {\n  const currentTarget = event.currentTarget as Element\n\n  if (hasDirtyFields(currentTarget)) {\n    enableSaveChangesReminder(currentTarget)\n  } else {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction enableSaveChangesReminder(container: Element) {\n  // This message is ignored by most browsers.\n  // eslint-disable-next-line i18n-text/no-en\n  const message = container.getAttribute('data-warn-unsaved-changes') || 'Changes you made may not be saved.'\n\n  window.onbeforeunload = function (event: BeforeUnloadEvent): string {\n    event.returnValue = message\n    return message\n  }\n}\n\nfunction disableSaveChangesReminder() {\n  window.onbeforeunload = null\n}\n\nfunction disableSaveChangesReminderOnClosedDialogs({currentTarget}: Event) {\n  if (!(currentTarget as Element).hasAttribute('open')) {\n    disableSaveChangesReminder()\n  }\n}\n\nfunction promptOnDialogClosing(event: Event) {\n  const dialog = event.currentTarget as Element\n  const details = dialog.closest('details[open]')\n  if (!details) {\n    return\n  }\n\n  let confirmed = true\n  const confirmationForms = dialog.querySelectorAll<HTMLFormElement>('form[data-warn-unsaved-changes]')\n  for (const form of confirmationForms) {\n    if (hasDirtyFields(form)) {\n      const message = form.getAttribute('data-warn-unsaved-changes')!\n      confirmed = confirm(message)\n      break\n    }\n  }\n\n  if (!confirmed) {\n    event.preventDefault()\n  }\n}\n","// Perform CSS transition once\n//\n// Examples\n//\n//   .foo.will-transition-once {\n//     transition: color ...;\n//   }\n//\n//   .foo.is-successful {\n//     background: green;\n//   }\n//\n\nimport {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('.will-transition-once', {\n  constructor: HTMLElement,\n  subscribe: el => fromEvent(el, 'transitionend', onTransitionEnd),\n})\n\nfunction onTransitionEnd(event: Event) {\n  const target = event.target as Element\n  target.classList.remove('will-transition-once')\n}\n","import {fromEvent} from '@github-ui/subscription'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Load issue/PR/discussion references to display the title for the tooltip from the server on hover.\n// If hovercards are enabled for the referenced type on this part of the DOM,\n// this behavior is bypassed in favor of the hovercard.\nasync function issueLabel(event: Event) {\n  const currentTarget = event.currentTarget as HTMLElement\n  const url = currentTarget.getAttribute('data-url')\n  if (!url || isHovercardEnabled(currentTarget)) {\n    return\n  }\n\n  const id = currentTarget.getAttribute('data-id') || ''\n  const text = currentTarget.textContent\n  const elements = document.querySelectorAll(`.js-issue-link[data-id='${id}']`)\n\n  for (const el of elements) {\n    el.removeAttribute('data-url')\n  }\n\n  try {\n    const titleUrl = `${url}/title`\n    const response = await fetch(titleUrl, {\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        Accept: 'application/json',\n      },\n    })\n    if (!response.ok) {\n      const responseError = new Error()\n      const statusText = response.statusText ? ` ${response.statusText}` : ''\n      responseError.message = `HTTP ${response.status}${statusText}`\n      throw responseError\n    }\n    const data = await response.json()\n    setLabel(elements, `${text}, ${data.title}`)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const status = (error.response != null ? error.response.status : undefined) || 500\n\n    const message = (() => {\n      switch (status) {\n        case 404:\n          return currentTarget.getAttribute('data-permission-text')\n        default:\n          return currentTarget.getAttribute('data-error-text')\n      }\n    })()\n\n    setLabel(elements, message || '')\n  }\n}\n\nfunction setLabel(elements: NodeList, text: string) {\n  for (const el of elements) {\n    if (!(el instanceof HTMLElement)) continue\n    el.classList.add('tooltipped', 'tooltipped-ne')\n    el.setAttribute('aria-label', text)\n  }\n}\n\nfunction isHovercardEnabled(element: HTMLElement): boolean {\n  const hovercardType = element.getAttribute('data-hovercard-type')\n  switch (hovercardType) {\n    case 'issue':\n    case 'pull_request':\n      return !!element.closest('[data-issue-and-pr-hovercards-enabled]')\n    case 'discussion':\n      return !!element.closest('[data-discussion-hovercards-enabled]')\n    default:\n      return false\n  }\n}\n\nobserve('.js-issue-link', {\n  subscribe: el => fromEvent(el, 'mouseenter', issueLabel),\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {fire, on} from 'delegated-events'\nimport {onFocus, onInput, onKey} from '@github-ui/onfocus'\nimport {resetCharactersRemainingCounts, updateInputRemainingCharacters} from '../behaviors/characters-remaining'\nimport type {RGB} from 'color-convert/conversions'\nimport {changeValue} from '@github-ui/form-utils'\nimport convert from 'color-convert'\nimport {debounce} from '@github/mini-throttle'\nimport {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport {getUtf8StringLength} from '@github-ui/text'\nimport {remoteForm} from '@github/remote-form'\nimport {toggleDetailsTarget} from '../behaviors/details'\n\nfunction randomRGBColor(): RGB {\n  return [\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n    Math.floor(Math.random() * (255 - 0) + 0),\n  ]\n}\n\n// Given a button element and a hex color code, this will style the button and\n// the octicon within it based on the given color.\nfunction setColorSwatch(colorButton: HTMLButtonElement, rgb: RGB) {\n  const hsl = convert.rgb.hsl(rgb)\n  colorButton.style.setProperty('--label-r', rgb[0].toString())\n  colorButton.style.setProperty('--label-g', rgb[1].toString())\n  colorButton.style.setProperty('--label-b', rgb[2].toString())\n\n  colorButton.style.setProperty('--label-h', hsl[0].toString())\n  colorButton.style.setProperty('--label-s', hsl[1].toString())\n  colorButton.style.setProperty('--label-l', hsl[2].toString())\n}\n\n// Fill the color input field in the 'new label' modal when a button is clicked.\n// Sets the color of the button that acts as the preview of the chosen color.\nfunction setInputColorFromButton(clickedButton: HTMLButtonElement, rgb: RGB) {\n  // eslint-disable-next-line github/no-blur\n  clickedButton.blur()\n\n  const container = clickedButton.closest<HTMLElement>('form')!\n\n  const colorInput = container.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  changeValue(colorInput, `#${convert.rgb.hex(rgb)}`)\n\n  const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n}\n\nfunction addErrorToField(errorEl: HTMLElement, errorMessage: string) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.add('errored')\n  errorEl.textContent = errorMessage\n  errorEl.hidden = false\n}\n\nfunction removeErrorFromField(errorEl: HTMLElement) {\n  const container = errorEl.closest<HTMLElement>('.js-label-error-container')!\n  container.classList.remove('errored')\n  errorEl.hidden = true\n}\n\nfunction showOrHideLabelError(errorSelector: string, form: HTMLFormElement, errorMessages?: string[] | null) {\n  const errorEl = form.querySelector<HTMLElement>(errorSelector)\n  if (!errorEl) {\n    return\n  }\n\n  if (errorMessages) {\n    addErrorToField(errorEl, errorMessages[0]!)\n  } else {\n    removeErrorFromField(errorEl)\n  }\n}\n\ninterface labelError {\n  name?: string[]\n  description?: string[]\n  color?: string[]\n}\n\nfunction showLabelErrors(form: HTMLFormElement, json: labelError) {\n  showOrHideLabelError('.js-label-name-error', form, json.name)\n  showOrHideLabelError('.js-label-description-error', form, json.description)\n  showOrHideLabelError('.js-label-color-error', form, json.color)\n}\n\nfunction hideLabelErrors(form: HTMLFormElement) {\n  showOrHideLabelError('.js-label-name-error', form, null)\n  showOrHideLabelError('.js-label-description-error', form, null)\n  showOrHideLabelError('.js-label-color-error', form, null)\n}\n\nfunction labelPreviewUrl(\n  baseUrl: string,\n  name: string,\n  color: string,\n  description: string | null,\n  labelID: string | null,\n): string {\n  const url = new URL(`${baseUrl}${encodeURIComponent(name)}`, window.location.origin)\n  const params = new URLSearchParams(url.search.slice(1))\n  params.append('color', color)\n  if (description) {\n    params.append('description', description)\n  }\n  if (labelID) {\n    params.append('id', labelID)\n  }\n  url.search = params.toString()\n  return url.toString()\n}\n\nfunction labelDescriptionFrom(form: HTMLFormElement): string | null {\n  let description = null\n  const descriptionInput = form.querySelector('.js-new-label-description-input')\n  if (descriptionInput instanceof HTMLInputElement && descriptionInput.value.trim().length > 0) {\n    description = descriptionInput.value.trim()\n  }\n  return description\n}\n\nfunction labelColorFrom(form: HTMLFormElement): string {\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  if (colorInput.checkValidity()) {\n    return colorInput.value.trim().replace(/^#/, '')\n  }\n  return 'ededed'\n}\n\nfunction labelNameFrom(form: HTMLFormElement, previewArea: HTMLElement): string {\n  const nameInput = form.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  let name = nameInput.value.trim()\n  if (name.length < 1) {\n    name = previewArea.getAttribute('data-default-name')!\n  }\n  return name\n}\n\nasync function updateLabelPreview(startEl: HTMLElement) {\n  const previewContainer = startEl.closest('.js-label-preview-container')\n  if (!previewContainer) {\n    return\n  }\n\n  const form = startEl.closest<HTMLFormElement>('.js-label-form')!\n  const fullErrorMessageEl = form.querySelector<HTMLElement>('.js-new-label-error')\n  const labelID = form.getAttribute('data-label-id')\n  const previewArea = previewContainer.querySelector<HTMLElement>('.js-label-preview')!\n  const name = labelNameFrom(form, previewArea)\n\n  // Default case of \"Label preview\" is also counted as 'invalid' but we still want to update the preview.\n  if (!form.checkValidity() && name !== 'Label preview') {\n    return\n  }\n\n  const color = labelColorFrom(form)\n  const description = labelDescriptionFrom(form)\n\n  const urlTemplate = previewArea.getAttribute('data-url-template')!\n  const url = labelPreviewUrl(urlTemplate, name, color, description, labelID)\n\n  if (previewContainer.hasAttribute('data-last-preview-url')) {\n    const lastPreviewUrl = previewContainer.getAttribute('data-last-preview-url')!\n    if (url === lastPreviewUrl) {\n      return\n    }\n  }\n\n  let fragment\n  try {\n    fragment = await fetchSafeDocumentFragment(document, url)\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = await error.response.json()\n    showLabelErrors(form, json)\n\n    if (fullErrorMessageEl) {\n      fullErrorMessageEl.textContent = json.message\n      fullErrorMessageEl.hidden = false\n    }\n\n    return\n  }\n\n  if (fullErrorMessageEl) {\n    fullErrorMessageEl.textContent = ''\n    fullErrorMessageEl.hidden = true\n  }\n\n  hideLabelErrors(form)\n\n  previewArea.textContent = ''\n  previewArea.appendChild(fragment)\n  previewContainer.setAttribute('data-last-preview-url', url)\n}\n\nfunction onLabelFormInputChange(event: Event) {\n  updateLabelPreview(event.target as HTMLInputElement)\n}\n\nfunction toggleBlankSlate(el: Element, show: boolean) {\n  const detailsContainer = el.closest<HTMLElement>('.js-details-container')!\n  detailsContainer.classList.toggle('is-empty', show)\n}\n\nfunction updateCount(delta: number) {\n  const counter = document.querySelector<HTMLElement>('.js-labels-count')!\n  const oldCount = Number(counter.textContent!)\n  const newCount = oldCount + delta\n  counter.textContent = newCount.toString()\n\n  const label = document.querySelector<HTMLElement>('.js-labels-label')!\n  label.textContent = label.getAttribute(newCount === 1 ? 'data-singular-string' : 'data-plural-string')\n  return newCount\n}\n\n// Update the preview text of the new label based on what the user types in the\n// label filter input.\nonInput('.js-label-filter-field', function (event) {\n  const filterInput = event.target as HTMLInputElement\n  const container = filterInput.closest<HTMLElement>('details-menu')!\n  const labelNameEl = container.querySelector('.js-new-label-name')\n  if (!labelNameEl) {\n    return\n  }\n  const labelName = filterInput.value.trim()\n  labelNameEl.textContent = labelName\n})\n\n// As the user filters existing labels, make sure the 'Add new label' and 'Edit labels'\n// links are visible as appropriate.\non('filterable:change', '.js-filterable-issue-labels', function (event) {\n  const menu = event.currentTarget.closest<HTMLElement>('details-menu')!\n  const addLabelButton = menu.querySelector<HTMLElement>('.js-add-label-button')\n  if (!addLabelButton) return\n\n  const filterInput = event.detail.inputField\n  const newLabelName = filterInput.value.trim().toLowerCase()\n\n  // TODO This could use namedItems.\n  let matchingExistingLabel = false\n  for (const input of menu.querySelectorAll('input[data-label-name]')) {\n    const labelName = input.getAttribute('data-label-name') || ''\n    if (labelName.toLowerCase() === newLabelName) {\n      matchingExistingLabel = true\n      break\n    }\n  }\n\n  addLabelButton.hidden = newLabelName.length === 0 || matchingExistingLabel\n})\n\n// Show the color swatches when the user focuses the color input field.\nonFocus('.js-new-label-color-input', function (input) {\n  const container = input.closest<HTMLElement>('form')!\n  const swatchesContainer = container.querySelector<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = false\n\n  input.addEventListener(\n    'blur',\n    function () {\n      swatchesContainer.hidden = true\n    },\n    {once: true},\n  )\n})\n\n// Update the color swatch as the user types new hex color codes manually into\n// the input.\nonInput('.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n  if (color.length < 1) {\n    return\n  }\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    input.classList.remove('color-fg-danger')\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  } else {\n    input.classList.add('color-fg-danger')\n  }\n})\n\n// Disable save button as the user types if they enter an invalid hex color code.\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  let color = input.value.trim()\n\n  if (color.indexOf('#') !== 0) {\n    color = `#${color}`\n    input.value = color\n  }\n\n  if (input.checkValidity()) {\n    const container = input.closest<HTMLElement>('form')!\n    const colorButton = container.querySelector<HTMLButtonElement>('.js-new-label-color')!\n    setColorSwatch(colorButton, convert.hex.rgb(color))\n  }\n  fire(input, 'change', false)\n\n  const form = input.closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-description-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\nonKey('keyup', '.js-new-label-color-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const form = input.form!\n  hideLabelErrors(form)\n})\n\n// Get a random color for the new label when the user hits the button that acts as\n// a preview of the selected color.\non('click', '.js-new-label-color', async function (event) {\n  const colorButton = event.currentTarget as HTMLButtonElement\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(colorButton)\n})\n\n// Choose one of the predefined colors when it's clicked.\non('mousedown', '.js-new-label-color-swatch', function (event) {\n  const swatchButton = event.currentTarget as HTMLButtonElement\n  const color = swatchButton.getAttribute('data-color')!\n  setInputColorFromButton(swatchButton, convert.hex.rgb(color))\n  updateLabelPreview(swatchButton)\n\n  const swatchesContainer = swatchButton.closest<HTMLElement>('.js-new-label-swatches')!\n  swatchesContainer.hidden = true\n})\n\non(\n  'toggle',\n  '.js-new-label-modal',\n  function (event) {\n    if ((event.target as Element).hasAttribute('open')) {\n      initLabelModal(event.target as Element)\n    }\n  },\n  {capture: true},\n)\n\n// When the new label form is displayed in the modal, set the label and its color\n// in the form fields. Also update the color of the color swatch.\nasync function initLabelModal(modal: Element) {\n  const labelNameInput = modal.querySelector<HTMLInputElement>('.js-new-label-name-input')\n  if (!labelNameInput) return\n\n  const colorInput = modal.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const rgb = randomRGBColor()\n  const hex = `#${convert.rgb.hex(rgb)}`\n  colorInput.value = hex\n  const colorButton = modal.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(colorButton, rgb)\n\n  const labelNameEl = document.querySelector<HTMLElement>('.js-new-label-name')!\n  const labelName = labelNameEl.textContent!\n  changeValue(labelNameInput, labelName)\n  updateInputRemainingCharacters(labelNameInput)\n\n  updateLabelPreview(colorButton)\n}\n\n// When the user creates a new label, close the modal containing the 'new label'\n// form. Also update the list of available labels to choose from, so the user\n// can immediately apply their new label.\nremoteForm('.js-new-label-modal-form', async function (form, wants) {\n  const errorEl = form.querySelector<HTMLElement>('.js-new-label-error')!\n\n  let response\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    errorEl.textContent = json.message\n    errorEl.hidden = false\n  }\n\n  if (!response) {\n    return\n  }\n\n  errorEl.hidden = true // Hide error message for the form\n\n  // close modal containing the label form\n  document.querySelector<HTMLElement>('.js-new-label-modal')!.removeAttribute('open')\n\n  const menuContent = document.querySelector<HTMLElement>('.js-issue-labels-menu-content')!\n  const list = menuContent.querySelector<HTMLElement>('.js-filterable-issue-labels')!\n  const input = response.html.querySelector('input')\n  list.prepend(response.html)\n\n  // indicate to the filter-sort-list module that the list content has changed\n  list.classList.add('filter-sort-list-refresh')\n\n  // A selected menu item is inserted programmatically so we need to trigger a\n  // change event, which when trigger a details-menu-selected event.\n  if (input) input.dispatchEvent(new Event('change', {bubbles: true}))\n\n  const field = menuContent.querySelector<HTMLInputElement>('.js-label-filter-field')!\n  field.value = field.defaultValue\n  field.focus()\n})\n\n// New and Edit remote form\n// Click \"Cancel\" leaves \"edit mode\"\non('click', '.js-edit-label-cancel', function (event) {\n  const form = (event.target as Element).closest<HTMLFormElement>('form')!\n  hideLabelErrors(form)\n  form.reset()\n\n  // Grab the color we just resetted to and set the background color of the\n  // refresh button to that color since resetting the form doesn't do that for us\n  const colorInput = form.querySelector<HTMLInputElement>('.js-new-label-color-input')!\n  const color = colorInput.value\n  const refreshButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  setColorSwatch(refreshButton, convert.hex.rgb(color))\n\n  resetCharactersRemainingCounts(form)\n  updateLabelPreview(colorInput)\n\n  // If editing an existing label, hide the form on Cancel:\n  const item = event.currentTarget.closest('.js-labels-list-item')\n  if (item) {\n    const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n    /* eslint-disable-next-line github/no-d-none */\n    editForm.classList.add('d-none')\n\n    const labelPreview = item.querySelector('.js-label-preview')\n    if (labelPreview) {\n      /* eslint-disable-next-line github/no-d-none */\n      labelPreview.classList.add('d-none')\n\n      const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n      /* eslint-disable-next-line github/no-d-none */\n      labelLink.classList.remove('d-none')\n    }\n\n    const elementsToShow = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n    for (const el of elementsToShow) {\n      el.hidden = !el.hidden\n    }\n  }\n})\n\n// Replace item row with contents from server on Edit\nremoteForm('.js-update-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  hideLabelErrors(form)\n\n  const item = form.closest<HTMLElement>('.js-labels-list-item')!\n  item.replaceWith(response.html)\n})\n\n// Add new label to list and clear out the form\nremoteForm('.js-create-label', async function (form, wants) {\n  let response\n\n  try {\n    response = await wants.html()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    const json = error.response.json\n    showLabelErrors(form, json)\n    return\n  }\n\n  form.reset()\n  hideLabelErrors(form)\n\n  document.querySelector<HTMLElement>('.js-label-list')!.prepend(response.html)\n\n  updateCount(+1)\n\n  toggleBlankSlate(form, false)\n\n  const colorButton = form.querySelector<HTMLButtonElement>('.js-new-label-color')!\n  const rgb = randomRGBColor()\n  setInputColorFromButton(colorButton, rgb)\n  updateLabelPreview(form.querySelector<HTMLInputElement>('.js-new-label-name-input')!)\n\n  resetCharactersRemainingCounts(form)\n\n  const detailsContainer = form.closest('.js-details-container')\n  if (detailsContainer instanceof HTMLElement) {\n    toggleDetailsTarget(detailsContainer)\n  }\n})\n\n// Click 'New label' button\non('click', '.js-details-target-new-label', function () {\n  const createForm = document.querySelector<HTMLElement>('.js-create-label')!\n  const nameInput = createForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n})\n\n// Click \"Edit\" enters \"edit mode\"\non('click', '.js-edit-label', function (event) {\n  const item = event.currentTarget.closest<HTMLElement>('.js-labels-list-item')!\n  const editForm = item.querySelector<HTMLElement>('.js-update-label')!\n  /* eslint-disable-next-line github/no-d-none */\n  editForm.classList.remove('d-none')\n  const nameInput = editForm.querySelector<HTMLInputElement>('.js-new-label-name-input')!\n  nameInput.focus()\n\n  const labelPreview = item.querySelector('.js-label-preview')\n  if (labelPreview) {\n    /* eslint-disable-next-line github/no-d-none */\n    labelPreview.classList.remove('d-none')\n\n    const labelLink = item.querySelector<HTMLElement>('.js-label-link')!\n    /* eslint-disable-next-line github/no-d-none */\n    labelLink.classList.add('d-none')\n  }\n\n  const elementsToHide = item.querySelectorAll<HTMLElement>('.js-hide-on-label-edit')\n  for (const el of elementsToHide) {\n    el.hidden = !el.hidden\n  }\n})\n\n// Delete remote form\nremoteForm('.js-delete-label', async function (form, wants) {\n  const row = form.closest<HTMLElement>('.js-labels-list-item')!\n  row.querySelector<HTMLElement>('.js-label-delete-spinner')!.hidden = false\n  await wants.text()\n  const newCount = updateCount(-1)\n  toggleBlankSlate(form, newCount === 0)\n  row.remove()\n})\n\nconst delayedOnLabelFormInputChange = debounce(onLabelFormInputChange, 500)\n\n// Handle the user typing in label fields:\non('suggester:complete', '.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-name-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-description-input', delayedOnLabelFormInputChange)\nonInput('.js-new-label-color-input', delayedOnLabelFormInputChange)\n\n// Limit length of label names in the way Rails does with model validations; allows emoji:\nonKey('keypress', '.js-new-label-name-input', function (event) {\n  const input = event.target as HTMLInputElement\n  const limit = parseInt(input.getAttribute('data-maxlength')!)\n\n  if (getUtf8StringLength(input.value) >= limit) {\n    event.preventDefault()\n  }\n})\n\n// Exclude labels on the issues page label filter\non('click', '.js-issues-label-select-menu-item', function (event) {\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (!event.altKey && !event.shiftKey) return\n\n  event.preventDefault()\n  event.stopPropagation()\n\n  if (event.altKey) {\n    window.location.href = new URL(\n      event.currentTarget.getAttribute('data-excluded-url')!,\n      window.location.origin,\n    ).toString()\n  }\n\n  // Users can shift click to add more labels to a group\n  if (event.shiftKey) {\n    window.location.href = new URL(\n      event.currentTarget.getAttribute('data-included-url')!,\n      window.location.origin,\n    ).toString()\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\nonKey('keydown', '.js-issues-label-select-menu-item', function (event: KeyboardEvent) {\n  // TODO: Refactor to use data-hotkey\n  /* eslint eslint-comments/no-use: off */\n  /* eslint-disable @github-ui/ui-commands/no-manual-shortcut-logic */\n  if (event.key !== 'Enter') return\n  if (!event.altKey && !event.shiftKey) return\n\n  const anchor = event.currentTarget\n  event.preventDefault()\n  event.stopPropagation()\n  if (anchor instanceof HTMLAnchorElement) {\n    if (event.altKey) {\n      window.location.href = new URL(anchor.getAttribute('data-excluded-url')!, window.location.origin).toString()\n    }\n\n    if (event.shiftKey) {\n      window.location.href = new URL(anchor.getAttribute('data-included-url')!, window.location.origin).toString()\n    }\n  }\n  /* eslint-enable @github-ui/ui-commands/no-manual-shortcut-logic */\n})\n\non(\n  'click',\n  '.js-open-label-creation-modal',\n  async function (event) {\n    // Prevent menu from closing\n    event.stopImmediatePropagation()\n    const modal = await dialog({\n      content: document.querySelector<HTMLTemplateElement>('.js-label-creation-template')!.content.cloneNode(true),\n      detailsClass: 'js-new-label-modal',\n    })\n    initLabelModal(modal)\n  },\n  {capture: true},\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Show/hide event settings when the user's overall thread subscription option changes.\non('change', '.js-thread-notification-setting', toggleEventSettings)\n\n// Validate event settings when the user's event selection changes.\non('change', '.js-custom-thread-notification-option', toggleEventSettings)\n\n// Show/hide event settings when the user dismisses the form.\non('reset', '.js-custom-thread-settings-form', toggleEventSettings)\n\nfunction toggleEventSettings() {\n  const eventSettingsVisible = document.querySelector<HTMLInputElement>('.js-reveal-custom-thread-settings')!.checked\n  const noEventSelected = !document.querySelector('.js-custom-thread-notification-option:checked')\n\n  const eventSettingsContainer = document.querySelector<HTMLElement>('.js-custom-thread-settings')!\n  const checkbox = document.querySelector<HTMLInputElement>('[data-custom-option-required-text]')!\n  const message =\n    eventSettingsVisible && noEventSelected ? checkbox.getAttribute('data-custom-option-required-text')! : ''\n\n  checkbox.setCustomValidity(message)\n  eventSettingsContainer.hidden = !eventSettingsVisible\n}\n","import {controller, target} from '@github/catalyst'\n\n/**\n * CollapsibleSidebarWidget creates a widget in the sidebar of which\n * content is collapsible and is loaded upon opening.\n *\n * Four classes must be set, they are scoped to the HTML element <collapsible-sidebar-widget>\n *  - .collapsible-sidebar-widget-button (the button toggling open/close state)\n *  - .collapsible-sidebar-widget-content (the inner HTML to load)\n *  - .collapsible-sidebar-widget-loader (the element that is shown while loading)\n *  - .collapsible-sidebar-widget-indicator (the element that indicates open/close)\n *\n * One class is optional\n * - .collapsible-sidebar-widget-active-hidden (hides an element when the content is open)\n *\n * Notice: This is not done in pure CSS, because we need to guard\n * the loading of the content.\n *\n * @example\n * ```html\n * <collapsible-sidebar-widget url=\"/your/url\">\n *  <div>\n *   <button type=\"button\" class=\"collapsible-sidebar-widget-button\" data-action=\"mousedown:collapsible-sidebar-widget#onMouseDown keydown:collapsible-sidebar-widget#onKeyDown\">Open</button>\n *    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"collapsible-sidebar-widget-indicator\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\"><path fill-rule=\"evenodd\" d=\"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z\"></path></svg>\n *    <svg class=\"collapsible-sidebar-widget-loader anim-rotate\" viewBox=\"0 0 16 16\" fill=\"none\" width=\"16\" height=\"16\" ><circle cx=\"8\" cy=\"8\" r=\"7\" stroke=\"currentColor\" stroke-opacity=\"0.25\" stroke-width=\"2\" vector-effect=\"non-scaling-stroke\"></circle><path d=\"M15 8a7.002 7.002 0 00-7-7\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" vector-effect=\"non-scaling-stroke\"></path></svg>\n *    <div class=\"collapsible-sidebar-widget-active-hidden\">Hidden content when active</div>\n *   </button>\n *   <div class=\"collapsible-sidebar-widget-content\" data-target=\"collapsible-sidebar-widget.collapsible\">Lorem Ipsum</div>\n *  </div>\n * </collapsible-sidebar-widget>\n * ```\n */\n@controller\nclass CollapsibleSidebarWidgetElement extends HTMLElement {\n  @target collapsible: HTMLElement\n\n  pendingRequest: AbortController | null\n\n  get activeClass(): string {\n    return this.getAttribute('active-class') || 'collapsible-sidebar-widget-active'\n  }\n\n  get loadingClass(): string {\n    return this.getAttribute('loading-class') || 'collapsible-sidebar-widget-loading'\n  }\n\n  get url(): string {\n    return this.getAttribute('url') || ''\n  }\n\n  get isOpen(): boolean {\n    return this.hasAttribute('open')\n  }\n\n  set isOpen(open: boolean) {\n    if (open) {\n      this.setAttribute('open', '')\n    } else {\n      this.removeAttribute('open')\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      e.preventDefault()\n\n      return this.load()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onMouseDown(e: MouseEvent) {\n    e.preventDefault()\n\n    return this.load()\n  }\n\n  load() {\n    if (this.pendingRequest) {\n      return this.pendingRequest.abort()\n    }\n\n    if (!this.collapsible.hasAttribute('loaded')) {\n      this.setLoading()\n\n      return this.updateCollapsible()\n    }\n\n    if (!this.isOpen) {\n      return this.setOpen()\n    }\n\n    return this.setClose()\n  }\n\n  setLoading() {\n    this.classList.add(this.loadingClass)\n    this.classList.remove(this.activeClass)\n  }\n\n  setOpen() {\n    this.classList.add(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = true\n  }\n\n  setClose() {\n    this.classList.remove(this.activeClass)\n    this.classList.remove(this.loadingClass)\n    this.isOpen = false\n  }\n\n  handleAbort() {\n    this.pendingRequest = null\n    this.setClose()\n  }\n\n  async updateCollapsible() {\n    try {\n      this.pendingRequest = new AbortController()\n      this.pendingRequest.signal.addEventListener('abort', () => this.handleAbort())\n\n      const response = await fetch(this.url, {\n        signal: this.pendingRequest?.signal,\n        headers: {\n          Accept: 'text/html',\n          'X-Requested-With': 'XMLHttpRequest',\n        },\n      })\n      this.pendingRequest = null\n\n      if (!response.ok) {\n        return this.setClose()\n      }\n\n      const content = await response.text()\n      this.collapsible.innerHTML = content\n      this.collapsible.setAttribute('loaded', '')\n\n      this.setOpen()\n    } catch {\n      // The errors are not yet surfaced.\n      this.pendingRequest = null\n      return this.setClose()\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\n\n/**\n * A web component that allows inline editing of <input> fields.\n * The fields work without an outer <form>.\n *\n * @type HTMLElement\n * @example\n * ```html\n * <sidebar-memex-input update-url=\"http://localhost\" csrf-token=\"1234567890\" column-id=\"1\">\n *  <input type=\"date name=\"memexProjectColumnValues[][value]\" value=\"\" data-target=\"sidebar-memex-input.read\" data-action=\" blur:sidebar-memex-input#onBlur keydown:sidebar-memex-input#onKeyDown disabled />\n * </sidebar-memex-input>\n * ```\n */\n@controller\nclass SidebarMemexInputElement extends HTMLElement {\n  static attrPrefix = ''\n  @attr updateUrl = ''\n  @attr csrfToken = ''\n  @attr instrumentType = ''\n  @attr columnId = 1\n\n  @targets inputs: NodeListOf<HTMLInputElement>\n  @target read: HTMLInputElement\n  @target write: HTMLElement\n  @targets parameters: NodeListOf<HTMLInputElement>\n\n  get isDisabled(): boolean {\n    return this.read?.hasAttribute('disabled')\n  }\n\n  set hasErrored(value: boolean) {\n    if (value) {\n      this.setAttribute('errored', '')\n    } else {\n      this.removeAttribute('errored')\n    }\n  }\n\n  set disabled(value: boolean) {\n    if (value) {\n      this.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n    }\n  }\n\n  get hasExpanded(): boolean {\n    return this.read.getAttribute('aria-expanded') === 'true'\n  }\n\n  get detailsElement() {\n    return this.querySelector('details') ?? null\n  }\n\n  connectedCallback() {\n    this.disabled = this.read?.disabled ?? true\n\n    // Resetting disabled attribute of the element to true after closing the dropdown, so that\n    // iteration field still has cursor pointer on the pencil on subsequent hoverings (cursor style is dependant on the `disabled` attribute).\n    // As the filter text input is not focused when opening the iteration field dropdown, `onBlur` does not\n    // run when user closes the menu, so that `disabled` is not reset, like for text-based fields.\n    this.detailsElement?.addEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  disconnectedCallback() {\n    this.detailsElement?.removeEventListener('toggle', () => this.handleSelectMenuToggle())\n  }\n\n  handleSelectMenuToggle() {\n    if (this.detailsElement && !this.detailsElement?.open) {\n      this.disabled = true\n    } else if (this.detailsElement && this.detailsElement?.open) {\n      this.disabled = false\n    }\n  }\n\n  handleDetailsSelect(e: Event) {\n    const custom = e as CustomEvent\n    const details = e.target as HTMLElement\n    const el = custom.detail?.relatedTarget as HTMLElement\n    const opened = details.closest('details')\n    const button = opened?.querySelector('[data-menu-button]')\n    const summary = opened?.querySelector('summary')\n\n    if (el.getAttribute('aria-checked') === 'true') {\n      el.setAttribute('aria-checked', 'false')\n      e.preventDefault()\n\n      for (const input of this.inputs) {\n        if (el.contains(input)) {\n          this.updateCell(input.name, '')\n\n          if (button?.innerHTML) {\n            button.innerHTML = input.placeholder\n          }\n\n          break\n        }\n      }\n\n      opened?.removeAttribute('open')\n      /**\n       * This function modifies the default behavior of the <details-menu> so that clicking on a\n       *  selected item clears an existing value. This causes focus to be lost from the <summary>\n       * which results in this element being replaced upon live update. Manually refocusing the\n       * summary element here prevents this from happening.\n       */\n      summary?.focus()\n    }\n  }\n\n  handleDetailsSelected(e: Event) {\n    const custom = e as CustomEvent\n    const el = custom.detail?.relatedTarget as HTMLElement\n    for (const input of this.inputs) {\n      if (el.contains(input)) {\n        this.updateCell(input.name, input.value)\n        break\n      }\n    }\n  }\n\n  mouseDownFocus(e: Event) {\n    if (!this.isDisabled) {\n      return\n    }\n    this.onFocus(e)\n  }\n\n  keyDownFocus(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Space') {\n      if (this.detailsElement) {\n        this.onSelectMenuOpen()\n      }\n      if (this.read !== document.activeElement) {\n        this.onFocus(e)\n      }\n    }\n  }\n\n  // to handle the clicks on the header (incl. pencil), so that the general mouseDownFocus doesn't interfere with opening the\n  // dropdown summary\n  mouseDownFocusHeader() {\n    if (this.detailsElement) {\n      this.onSelectMenuOpen()\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onChange(e: Event) {\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      return\n    }\n\n    this.updateCell(this.read?.name, this.read?.value)\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onFocus(e: KeyboardEvent | Event) {\n    e.preventDefault()\n\n    this.disabled = false\n    this.read.disabled = false\n    this.read.focus()\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onSelectMenuOpen() {\n    if (this.detailsElement) {\n      this.detailsElement.open = true\n    }\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onBlur(e: Event) {\n    if (this.hasExpanded) {\n      e.preventDefault()\n      return\n    }\n\n    const el = e.target as HTMLElement\n    if (el.getAttribute('type') === 'date') {\n      this.updateCell(this.read?.name, this.read?.value)\n    }\n\n    this.read.disabled = true\n    this.disabled = true\n  }\n\n  /* eslint-disable-next-line custom-elements/no-method-prefixed-with-on */\n  onKeyDown(e: KeyboardEvent) {\n    if (e.code === 'Enter' || e.code === 'Tab') {\n      e.preventDefault()\n      e.stopPropagation()\n\n      if (this.hasExpanded) {\n        return\n      }\n\n      // eslint-disable-next-line github/no-blur\n      this.read.blur()\n    }\n  }\n\n  async updateCell(name = '', value = '') {\n    const data = new FormData()\n    data.set(name, value)\n    data.set('ui', this.instrumentType)\n\n    for (const input of this.parameters) {\n      data.set(input.name, input.value)\n    }\n\n    try {\n      // this is an opportunistic update\n      if (this.write) {\n        const update = this.read.value\n        const formatted = this.read.type === 'date' && update ? this.format.format(Date.parse(update)) : update\n        this.write.textContent = update ? formatted : this.read.placeholder\n      }\n\n      const response = await fetch(this.updateUrl, {\n        method: 'PUT',\n        body: data,\n        headers: {\n          Accept: 'application/json',\n          'X-Requested-With': 'XMLHttpRequest',\n          'Scoped-CSRF-Token': `${this.csrfToken}`,\n        },\n      })\n\n      if (!response.ok) {\n        throw new Error('connection error')\n      }\n\n      // if there is no target to update,\n      // break here and leave the opportunistic update of the field\n      if (!this.write) {\n        return\n      }\n\n      // this is the reconciliation\n      const content = await response.json()\n      const column = content['memexProjectItem']['memexProjectColumnValues'].find(\n        (e: Record<string, unknown>) => e['memexProjectColumnId'] === Number(this.columnId),\n      )\n\n      const commit = column['value']\n      const formatted = this.parseAndFormatUpdate(commit)\n      this.write.innerHTML = value ? formatted : this.read.placeholder\n    } catch {\n      this.hasErrored = true\n    }\n  }\n\n  parseAndFormatUpdate(commit: {value?: string; html?: string}) {\n    switch (this.read.type) {\n      case 'date': {\n        const update = commit.value ? Date.parse(commit.value) : undefined\n        return update ? this.format.format(update) : ''\n      }\n      case 'number': {\n        return commit.value == null ? '' : commit.value\n      }\n      default: {\n        return commit.html ?? ''\n      }\n    }\n  }\n\n  private format = Intl.DateTimeFormat('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    timeZone: 'UTC',\n  })\n}\n","import '../notifications/configure-thread-subscription-dialog'\nimport './sidebar-widget'\nimport './sidebar-memex-input'\n\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nfunction submitForm(form: Element, skipTeamsCheck = false) {\n  if (skipTeamsCheck || !reviewerTeamsCheckRequired(form)) {\n    if (form instanceof HTMLFormElement) {\n      requestSubmit(form)\n    } else {\n      previewSubmit(form)\n    }\n  }\n}\n\nfunction submitOnMenuClose(event: Event) {\n  const currentTarget = event.currentTarget as Element\n  const form = currentTarget.closest('.js-issue-sidebar-form') || currentTarget.querySelector('.js-issue-sidebar-form')\n  submitForm(form!)\n}\n\n// On item selection, submit the form\non(\n  'details-menu-selected',\n  '.js-discussion-sidebar-menu',\n  function (event) {\n    const item = event.detail.relatedTarget\n    const menu = event.currentTarget\n    const form = item.closest('.js-issue-sidebar-form')\n    const multiple = menu.hasAttribute('data-multiple')\n\n    if (item.hasAttribute('data-clear-assignees')) {\n      const selectedInputs = menu.querySelectorAll<HTMLInputElement>('input[name=\"issue[user_assignee_ids][]\"]:checked')\n      for (const el of selectedInputs) {\n        el.disabled = false\n        el.checked = false\n      }\n\n      submitForm(form)\n    } else if (multiple) {\n      menu.closest<HTMLElement>('details')!.addEventListener('toggle', submitOnMenuClose, {once: true})\n    } else {\n      submitForm(form)\n    }\n  },\n  {capture: true},\n)\n\nfunction updateSidebar(container: Element, html: string) {\n  container.replaceWith(parseHTML(document, html))\n}\n\nfunction returnFocusToTrigger(container: HTMLElement, menuTriggerId: string) {\n  const currentSidebarTriggerEl = container.querySelector<HTMLElement>(`[data-menu-trigger=\"${menuTriggerId}\"]`)\n\n  // Returns focus to triggering element after HTML is replaced\n  currentSidebarTriggerEl?.focus()\n}\n\n// TODO Replace with data-replace-remote-form behavior.\nremoteForm('.js-issue-sidebar-form', async function (form, wants) {\n  let error: Error | undefined\n\n  try {\n    const response = await wants.html()\n    // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n    const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n    // Gets the unique ID of the current sidebar element to use to reference the trigger\n    const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n    const container = currentSidebarItemEl?.parentElement\n\n    currentSidebarItemEl!.replaceWith(response.html)\n\n    if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n  } catch (err) {\n    if (err instanceof Error) {\n      error = err\n      throw error\n    }\n  } finally {\n    form.dispatchEvent(new CustomEvent('submit:complete', {bubbles: true, detail: {error}}))\n  }\n})\n\n// Prevent suggested reviewer button on new pull request form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-suggested-reviewer', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  event.preventDefault()\n})\n\n// Prevent \"assign yourself\" button on the issue#new form from submitting the main form.\non('click', 'div.js-issue-sidebar-form .js-issue-assign-self', function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n\n  const form = button.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'post', {name: button.name, value: button.value})\n  button.remove()\n  // do not persist in the UI\n  document.querySelector('form#new_issue .js-submit-button-value')?.remove()\n  event.preventDefault()\n})\n\n// Allow \"unassign me\" to submit form with method DELETE\non('click', '.js-issue-unassign-self', function (event) {\n  const form = event.currentTarget.closest<HTMLElement>('.js-issue-sidebar-form')!\n  previewSubmit(form, 'delete')\n  event.preventDefault()\n})\n\nfunction getCacheKey(el: Element, pageId: string) {\n  const formName = el.getAttribute('data-cache-name')\n  return `${pageId}:sidebar:${formName}`\n}\n\nfunction cacheValues(form: Element, formData: FormData, cacheKey: string) {\n  const formName = form.getAttribute('data-cache-name')\n  if (!formName) return\n\n  const data: Array<[string, FormDataEntryValue]> = []\n  for (const [key, value] of formData.entries()) {\n    if (key.indexOf(formName) === -1) continue\n    data.push([key, value])\n  }\n\n  const updated = data.filter(datum => datum[1] !== '')\n  if (updated.length > 0) {\n    sessionStorage.setItem(cacheKey, JSON.stringify(updated))\n  } else {\n    sessionStorage.removeItem(cacheKey)\n  }\n}\n\nconst hasFired = new Set<string>()\nfunction clearHasFired() {\n  hasFired.clear()\n}\n\nasync function restoreCachedValues(el: Element, cacheKey: string) {\n  const formName = el.getAttribute('data-cache-name')\n  const cache = sessionStorage.getItem(cacheKey)\n  if (!formName || !cache || hasFired.has(formName)) return\n  hasFired.add(formName)\n  const formData: Array<[string, FormDataEntryValue]> = JSON.parse(cache)\n  const inputs: HTMLInputElement[] = []\n  for (const [key, value] of formData) {\n    // Only cache string values\n    if (Object.prototype.toString.call(value) !== '[object String]') continue\n\n    const newInput = document.createElement('input')\n    newInput.type = 'hidden'\n    // The guard clause above ensures that this is a string, but the TS complier doesn't know that.\n    newInput.value = value as string\n    newInput.name = key\n    el.appendChild(newInput)\n    inputs.push(newInput)\n  }\n  try {\n    await requestPreview(el)\n    for (const input of inputs) {\n      input.remove()\n    }\n  } catch {\n    hasFired.delete(formName)\n  }\n}\n\nlet isSubmitting = false\nfunction cacheValuesOnHide(form: Element, cacheKey: string) {\n  if (isSubmitting) return\n\n  const body = scopedFormData(form)\n  cacheValues(form, body, cacheKey)\n  clearHasFired()\n}\n\nobserve('[data-cacher]', {\n  add(el) {\n    const cacheKey = getCacheKey(el, getPageID())\n    restoreCachedValues(el, cacheKey)\n    window.addEventListener('pagehide', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener('turbo:before-visit', () => cacheValuesOnHide(el, cacheKey))\n    window.addEventListener(\n      'submit',\n      event => {\n        if (!event.defaultPrevented) {\n          isSubmitting = true\n          // Defer the write operation to the next tick\n          setTimeout(() => {\n            for (const key of Object.keys(sessionStorage)) {\n              if (key.indexOf(cacheKey) === -1) continue\n              sessionStorage.removeItem(key)\n              clearHasFired()\n            }\n          }, 0)\n        }\n      },\n      {capture: true},\n    )\n  },\n})\n\n// Submit dummy sidebar preview \"form\".\n//\n// form - DIV element tagged with .js-issue-sidebar-form\n// extra - Array of extra form data to pass along\nasync function previewSubmit(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  await requestPreview(form, method, extra)\n  // Gets the specific sidebar element (i.e. assignees, labels) before the HTML is replaced inside\n  const currentSidebarItemEl = form.closest<HTMLElement>('.js-discussion-sidebar-item')\n  // Gets the unique ID of the current sidebar element to use to reference the trigger\n  const currentSidebarDetailsId = currentSidebarItemEl?.querySelector<HTMLElement>('.select-menu')?.getAttribute('id')\n  const container = currentSidebarItemEl?.parentElement\n\n  if (container && currentSidebarDetailsId) returnFocusToTrigger(container, currentSidebarDetailsId)\n}\n\nasync function requestPreview(form: Element, method = 'post', extra?: {name: string; value: string}) {\n  const body = scopedFormData(form)\n  if (extra) {\n    body.append(extra.name, extra.value)\n  }\n\n  const url = form.getAttribute('data-url')!\n  if (!url) return\n\n  const token = form.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  const response = await fetch(url, {\n    method,\n    body: method === 'delete' ? '' : body,\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  const html = await response.text()\n  updateSidebar(form.closest<HTMLElement>('.js-discussion-sidebar-item')!, html)\n}\n\n// Returns true (and triggers a reviewer check for \"notification spam\") if the\n// form (or div, in new PRs) contains at least one new review request for a team\nfunction reviewerTeamsCheckRequired(form: Element) {\n  // We only care about reviewers...\n  const url = form.getAttribute('data-reviewers-team-size-check-url')\n  if (!url) return false\n\n  // ...and whether there is at least one newly-selected team\n  const previouslyRequestedTeams = [...document.querySelectorAll<HTMLElement>('.js-reviewer-team')].map(elem =>\n    elem.getAttribute('data-id'),\n  )\n  const formData = form instanceof HTMLFormElement ? new FormData(form) : scopedFormData(form)\n  const allSelectedTeams = new URLSearchParams(formData as FormData & Record<string, string>).getAll(\n    'reviewer_team_ids[]',\n  )\n  const newlySelectedTeams = allSelectedTeams.filter(team => !previouslyRequestedTeams.includes(team))\n  if (newlySelectedTeams.length === 0) return false\n\n  const params = new URLSearchParams(newlySelectedTeams.map(s => ['reviewer_team_ids[]', s]))\n  triggerTeamReviewerCheck(form, `${url}?${params}`)\n  return true\n}\n\n// Asks the server if any of the newly-selected teams is too large;\n// show the dialog if so, move on and request reviews otherwise.\nasync function triggerTeamReviewerCheck(form: Element, reviewerCheckUrl: string) {\n  const response = await fetch(reviewerCheckUrl)\n  if (!response.ok) {\n    return\n  }\n\n  const dialogHtml = await response.text()\n  if (dialogHtml.match(/[^\\w-]js-large-team[^\\w-]/)) {\n    showTeamReviewerConfirmationDialog(form, dialogHtml)\n  } else {\n    submitForm(form, true)\n    return\n  }\n}\n\n// Shows dialog that requests confirmation for review requests to large teams\nfunction showTeamReviewerConfirmationDialog(form: Element, dialogHtml: string) {\n  // Add dialog to DOM\n  const container = form.querySelector<HTMLElement>('.js-large-teams-check-warning-container')!\n  while (container.firstChild) {\n    container.removeChild(container.firstChild)\n  }\n  container.appendChild(parseHTML(document, dialogHtml))\n\n  // Wire dialog actions and open it\n  const dialog = container.querySelector<HTMLDetailsElement>('details')!\n  function dialogAction(event: Event) {\n    if (!(event.target instanceof Element)) return\n    dialog.open = false\n    // Unless the user explicitly confirms, un-select the large teams before submitting\n    if (!event.target.classList.contains('js-large-teams-confirm-button')) {\n      const reviewerInputs = form.querySelectorAll<HTMLInputElement>(\"input[name='reviewer_team_ids[]']\")\n      for (const reviewerInput of reviewerInputs) {\n        if (container.querySelector(`.js-large-team[data-id='${reviewerInput.value}']`)) {\n          reviewerInput.checked = false\n        }\n      }\n    }\n    submitForm(form, true)\n    event.preventDefault()\n  }\n  container\n    .querySelector<HTMLElement>('.js-large-teams-confirm-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  container\n    .querySelector<HTMLElement>('.js-large-teams-cancel-button')!\n    .addEventListener('click', dialogAction, {once: true})\n  dialog.addEventListener('details-dialog-close', dialogAction, {once: true})\n  dialog.open = true\n}\n\non('click', 'div.js-project-column-menu-container .js-project-column-menu-item button', async function (event) {\n  const currentTarget = event.currentTarget\n  updateProjectColumnMenuSummary(currentTarget)\n  const moveUrl = currentTarget.getAttribute('data-url')!\n  const token = currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const cardId = currentTarget.getAttribute('data-card-id')!\n  const form = new FormData()\n\n  form.append('card_id', cardId)\n  form.append('use_automation_prioritization', 'true')\n\n  event.preventDefault()\n  const response = await fetch(moveUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  if (!response.ok) {\n    return\n  }\n  // blur any active elements if they are contained within the detail\n  // to allow update-content to reload the dropdown\n  const activeElement = document.activeElement as HTMLElement\n  const container = currentTarget.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  if (activeElement && container.contains(activeElement)) {\n    try {\n      // eslint-disable-next-line github/no-blur\n      activeElement.blur()\n    } catch {\n      // ignore\n    }\n  }\n})\n\nfunction updateProjectColumnMenuSummary(element: Element) {\n  const dropdown = element.closest<HTMLElement>('.js-project-column-menu-dropdown')!\n  const summary = dropdown.querySelector<HTMLElement>('.js-project-column-menu-summary')!\n  const columnName = element.getAttribute('data-column-name')!\n\n  summary.textContent = columnName\n}\n\non('click', '.js-prompt-dismiss', function (event) {\n  event.currentTarget.closest<HTMLElement>('.js-prompt')!.remove()\n})\n\n// Similar to serializeArray, but maybe scoped to a non-form.\n//\n// container - Element contained by a form to serialize the child fields for\nfunction scopedFormData(container: Element): FormData {\n  const form = container.closest<HTMLFormElement>('form')!\n  if (!form) return new FormData()\n  const formData = new FormData(form)\n  const params = formData.entries()\n  const results = new FormData()\n  for (const [name, value] of params) {\n    if (form.contains(findParam(form, name, value.toString()))) {\n      results.append(name, value)\n    }\n  }\n  return results\n}\n\nfunction findParam(form: HTMLFormElement, name: string, value: string): Element | null {\n  for (const el of form.elements) {\n    if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || el instanceof HTMLButtonElement) {\n      if (el.name === name && el.value === value) {\n        return el\n      }\n    }\n  }\n  return null\n}\n\non('click', '.js-convert-to-draft', function (event) {\n  const convertToDraftUrl = event.currentTarget.getAttribute('data-url')!\n  const token = event.currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  fetch(convertToDraftUrl, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n})\n\non('click', '.js-dismiss-copilot-popover', function (event) {\n  const dismissUrl = event.currentTarget.getAttribute('data-url')!\n  const token = event.currentTarget.parentElement!.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n\n  fetch(dismissUrl, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n  event.currentTarget.closest<HTMLElement>('.js-notice')!.remove()\n  event.preventDefault()\n})\n\non('click', 'div.js-restore-item', async function (event) {\n  const unarchiveItemUrl = event.currentTarget.getAttribute('data-url')!\n  const projectItemID = event.currentTarget.getAttribute('data-column')!\n  const token = event.currentTarget.querySelector<HTMLInputElement>('.js-data-url-csrf')!\n  const form = new FormData()\n\n  form.set('memexProjectItemIds[]', projectItemID)\n\n  const result = await fetch(unarchiveItemUrl, {\n    method: 'PUT',\n    mode: 'same-origin',\n    body: form,\n    headers: {\n      'Scoped-CSRF-Token': token.value,\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  })\n\n  if (!result.ok) {\n    throw new Error('connection error')\n  }\n\n  submitOnMenuClose(event)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nobserve('#clear-project-search-button', button => {\n  button?.setAttribute('type', 'button')\n\n  button?.addEventListener('click', () => {\n    const input = document.getElementById('project-search-input') as HTMLInputElement\n    if (input) {\n      input.value = ''\n      input.focus()\n    }\n  })\n})\n","export const SOFT_NAV_EXTERNAL_EVENTS = Object.freeze({\n  INITIAL: 'soft-nav:external:initial',\n  START: 'soft-nav:external:start',\n  SUCCESS: 'soft-nav:external:success',\n  ERROR: 'soft-nav:external:error',\n  RENDER: 'soft-nav:external:render',\n})\n","import type {\n  CLSMetricWithAttribution,\n  FCPMetricWithAttribution,\n  FIDMetricWithAttribution,\n  INPMetricWithAttribution,\n  LCPMetricWithAttribution,\n  TTFBMetricWithAttribution,\n} from 'web-vitals/attribution'\nimport type {HPCTimingEvent} from './hpc-events'\nimport type {INPMetric} from './inp/metric'\n\nexport type WebVitalMetric =\n  | CLSMetricWithAttribution\n  | FCPMetricWithAttribution\n  | FIDMetricWithAttribution\n  | INPMetricWithAttribution\n  | LCPMetricWithAttribution\n  | TTFBMetricWithAttribution\n  | INPMetric\n\nexport type SoftWebVitalMetric =\n  | CLSMetricWithAttribution\n  | FCPMetricWithAttribution\n  | FIDMetricWithAttribution\n  | INPMetricWithAttribution\n  | LCPMetricWithAttribution\n  | TTFBMetricWithAttribution\n\nexport type MetricOrHPC = WebVitalMetric | HPCTimingEvent\n\nexport function isReactLazyPayload() {\n  return Boolean(document.querySelector('react-app[data-lazy=\"true\"]'))\n}\n\nexport function isReactAlternate() {\n  return Boolean(document.querySelector('react-app[data-alternate=\"true\"]'))\n}\n\nexport function isHeaderRedesign() {\n  return Boolean(document.querySelector('header.AppHeader'))\n}\n\nexport function hasFetchedGQL(): boolean {\n  return performance.getEntriesByType('resource').some(e => e.initiatorType === 'fetch' && e.name.includes('_graphql?'))\n}\n\nexport function hasFetchedJS(): boolean {\n  return performance.getEntriesByType('resource').some(e => e.initiatorType === 'script')\n}\n","const BUCKETS = {\n  xlg: 8,\n  lg: 4,\n  md: 2,\n  sm: 0,\n}\n\nexport function getCPUBucket() {\n  if (!('hardwareConcurrency' in navigator)) return 'unknown'\n\n  const concurrency = navigator.hardwareConcurrency\n\n  for (const [bucket, min] of Object.entries(BUCKETS)) {\n    if (concurrency > min) {\n      return bucket\n    }\n  }\n\n  return 'unknown'\n}\n","import {isReactLazyPayload, isReactAlternate, isHeaderRedesign} from './web-vitals'\nimport type {MetricOrHPC, SoftWebVitalMetric} from './web-vitals'\nimport {loaded} from '@github-ui/document-ready'\nimport {ssrSafeDocument, wasServerRendered} from '@github-ui/ssr-utils'\nimport {sendStats} from '@github-ui/stats'\nimport {sendStatToHydro} from './hydro-stats'\nimport {isFeatureEnabled} from '@github-ui/feature-flags'\nimport {getCurrentReactAppName, getLatestMechanism} from '@github-ui/soft-nav/utils'\nimport {MECHANISM_MAPPING} from '@github-ui/soft-nav/stats'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {getCPUBucket} from '@github-ui/cpu-bucket'\n\n// Load app state when hard navigating\nlet appName = getCurrentReactAppName() || 'rails'\nlet renderIsSSR = wasServerRendered()\nlet renderIsLazy = isReactLazyPayload()\nlet renderIsAlternate = isReactAlternate()\n\n// We update the app state after each soft navigation to ensure\n// INP is correctly tagged.\nssrSafeDocument?.addEventListener(SOFT_NAV_STATE.END, () => {\n  appName = getCurrentReactAppName() || 'rails'\n  renderIsSSR = wasServerRendered()\n  renderIsLazy = isReactLazyPayload()\n  renderIsAlternate = isReactAlternate()\n})\n\ninterface NetworkInformation extends EventTarget {\n  readonly effectiveType: string\n}\n\nexport function sendSoftVitals(metric: SoftWebVitalMetric) {\n  if (metric.navigationType !== 'soft-navigation') return\n  sendVitals(metric, {experimentalSoftNav: true})\n}\n\ninterface SendVitalsOptions {\n  experimentalSoftNav?: boolean\n  url?: string\n}\nexport function sendVitals(metric: MetricOrHPC, opts: SendVitalsOptions = {}) {\n  const {name, value} = metric\n  const stat: PlatformBrowserPerformanceWebVitalTiming = {\n    name: opts.url || window.location.href,\n    cpu: getCPUBucket(),\n  }\n  stat[name.toLowerCase() as Lowercase<typeof name>] = value\n\n  if (isFeatureEnabled('SAMPLE_NETWORK_CONN_TYPE')) {\n    stat.networkConnType = getConnectionType()\n  }\n\n  if (opts.experimentalSoftNav) {\n    stat.mechanism = MECHANISM_MAPPING[getLatestMechanism()]\n  }\n\n  if (name === 'HPC') {\n    stat.soft = metric.soft\n    stat.ssr = metric.ssr\n    stat.mechanism = MECHANISM_MAPPING[metric.mechanism]\n    stat.lazy = metric.lazy\n    stat.alternate = metric.alternate\n    stat.hpcFound = metric.found\n    stat.hpcGqlFetched = metric.gqlFetched\n    stat.hpcJsFetched = metric.jsFetched\n    stat.headerRedesign = isHeaderRedesign()\n    stat.app = metric.app\n  } else {\n    stat.ssr = renderIsSSR\n    stat.lazy = renderIsLazy\n    stat.alternate = renderIsAlternate\n    stat.app = appName\n  }\n\n  const syntheticTest = document.querySelector('meta[name=\"synthetic-test\"]')\n  if (syntheticTest) {\n    stat.synthetic = true\n  }\n\n  sendStats({webVitalTimings: [stat]})\n\n  sendStatToHydro(metric, stat.ssr)\n\n  updateStaffBar(name, value)\n}\n\nfunction updateStaffBar(name: string, value: number) {\n  const staffBarContainer = document.querySelector('#staff-bar-web-vitals')\n  const metricContainer = staffBarContainer?.querySelector(`[data-metric=${name.toLowerCase()}]`)\n\n  if (!metricContainer) {\n    return\n  }\n\n  metricContainer.textContent = value.toPrecision(6)\n}\n\nfunction isTimingSuppported(): boolean {\n  return !!(window.performance && window.performance.timing && window.performance.getEntriesByType)\n}\n\nfunction getConnectionType() {\n  if (\n    'connection' in navigator &&\n    navigator.connection &&\n    'effectiveType' in (navigator.connection as NetworkInformation)\n  ) {\n    return (navigator.connection as NetworkInformation).effectiveType\n  }\n\n  return 'N/A'\n}\n\nexport async function sendTimingResults() {\n  if (!isTimingSuppported()) return\n\n  await loaded\n  await new Promise(resolve => setTimeout(resolve))\n\n  sendResourceTimings()\n  sendNavigationTimings()\n}\n\nconst sendResourceTimings = () => {\n  const resourceTimings = window.performance.getEntriesByType('resource').map(\n    (timing): PlatformBrowserPerformanceNavigationTiming => ({\n      name: timing.name,\n      entryType: timing.entryType,\n      startTime: timing.startTime,\n      duration: timing.duration,\n      initiatorType: timing.initiatorType,\n      nextHopProtocol: timing.nextHopProtocol,\n      workerStart: timing.workerStart,\n      redirectStart: timing.redirectStart,\n      redirectEnd: timing.redirectEnd,\n      fetchStart: timing.fetchStart,\n      domainLookupStart: timing.domainLookupStart,\n      domainLookupEnd: timing.domainLookupEnd,\n      connectStart: timing.connectStart,\n      connectEnd: timing.connectEnd,\n      secureConnectionStart: timing.secureConnectionStart,\n      requestStart: timing.requestStart,\n      responseStart: timing.responseStart,\n      responseEnd: timing.responseEnd,\n      transferSize: timing.transferSize,\n      encodedBodySize: timing.encodedBodySize,\n      decodedBodySize: timing.decodedBodySize,\n    }),\n  )\n\n  if (resourceTimings.length) {\n    sendStats({resourceTimings}, false, 0.05)\n  }\n}\n\nconst sendNavigationTimings = () => {\n  const navigationTimings = window.performance.getEntriesByType('navigation').map(\n    (timing): PlatformBrowserPerformanceNavigationTiming => ({\n      activationStart: timing.activationStart,\n      name: timing.name,\n      entryType: timing.entryType,\n      startTime: timing.startTime,\n      duration: timing.duration,\n      initiatorType: timing.initiatorType,\n      nextHopProtocol: timing.nextHopProtocol,\n      workerStart: timing.workerStart,\n      redirectStart: timing.redirectStart,\n      redirectEnd: timing.redirectEnd,\n      fetchStart: timing.fetchStart,\n      domainLookupStart: timing.domainLookupStart,\n      domainLookupEnd: timing.domainLookupEnd,\n      connectStart: timing.connectStart,\n      connectEnd: timing.connectEnd,\n      secureConnectionStart: timing.secureConnectionStart,\n      requestStart: timing.requestStart,\n      responseStart: timing.responseStart,\n      responseEnd: timing.responseEnd,\n      transferSize: timing.transferSize,\n      encodedBodySize: timing.encodedBodySize,\n      decodedBodySize: timing.decodedBodySize,\n      unloadEventStart: timing.unloadEventStart,\n      unloadEventEnd: timing.unloadEventEnd,\n      domInteractive: timing.domInteractive,\n      domContentLoadedEventStart: timing.domContentLoadedEventStart,\n      domContentLoadedEventEnd: timing.domContentLoadedEventEnd,\n      domComplete: timing.domComplete,\n      loadEventStart: timing.loadEventStart,\n      loadEventEnd: timing.loadEventEnd,\n      type: timing.type,\n      redirectCount: timing.redirectCount,\n    }),\n  )\n\n  if (navigationTimings.length) {\n    sendStats({navigationTimings}, false, 0.05)\n  }\n}\n","/*\n * From https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/lib/getSelector.ts\n * I want to make sure we get element names the same way as web-vitals does.\n */\n\nconst getName = (node: Node) => {\n  const name = node.nodeName\n  return node.nodeType === 1 ? name.toLowerCase() : name.toUpperCase().replace(/^#/, '')\n}\n\nexport const getSelector = (node: Node | null | undefined, maxLen?: number) => {\n  let sel = ''\n\n  try {\n    while (node && node.nodeType !== 9) {\n      const el: Element = node as Element\n      const part = el.id\n        ? `#${el.id}`\n        : getName(el) +\n          (el.classList && el.classList.value && el.classList.value.trim() && el.classList.value.trim().length\n            ? `.${el.classList.value.trim().replace(/\\s+/g, '.')}`\n            : '')\n      if (sel.length + part.length > (maxLen || 100) - 1) return sel || part\n      sel = sel ? `${part}>${sel}` : part\n      if (el.id) break\n      node = el.parentNode\n    }\n  } catch {\n    // Do nothing...\n  }\n  return sel\n}\n","import type {SoftNavMechanism} from '@github-ui/soft-nav/events'\nimport {getSelector} from './get-selector'\n\nexport interface HPCEventTarget extends EventTarget {\n  addEventListener(\n    type: 'hpc:timing',\n    listener: (event: HPCTimingEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  addEventListener(\n    type: 'hpc:dom-insertion',\n    listener: (event: HPCDomInsertionEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  addEventListener(type: string, listener: (event: Event) => void, options?: boolean | AddEventListenerOptions): void\n\n  removeEventListener(\n    type: 'hpc:timing',\n    listener: (event: HPCTimingEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  removeEventListener(\n    type: 'hpc:dom-insertion',\n    listener: (event: HPCDomInsertionEvent) => void,\n    options?: boolean | AddEventListenerOptions,\n  ): void\n  removeEventListener(type: string, listener: (event: Event) => void, options?: boolean | AddEventListenerOptions): void\n}\n\nexport class HPCTimingEvent extends Event {\n  name = 'HPC' as const\n  value: number\n  attribution: {\n    element?: string\n  }\n\n  constructor(\n    public soft: boolean,\n    public ssr: boolean,\n    public lazy: boolean,\n    public alternate: boolean,\n    public mechanism: SoftNavMechanism | 'hard',\n    public found: boolean,\n    public gqlFetched: boolean,\n    public jsFetched: boolean,\n    public app: string,\n    start: number,\n    element: Element | null,\n  ) {\n    super('hpc:timing')\n    this.value = performance.now() - start\n    this.attribution = {\n      element: getSelector(element),\n    }\n  }\n}\n\nexport class HPCDomInsertionEvent extends Event {\n  constructor(public element: Element | null) {\n    super('hpc:dom-insertion')\n  }\n}\n","import {wasServerRendered} from '@github-ui/ssr-utils'\nimport {onLCP} from 'web-vitals/attribution'\nimport {hasFetchedGQL, hasFetchedJS, isReactAlternate, isReactLazyPayload} from './web-vitals'\nimport {sendVitals} from './timing-stats'\nimport type {SoftNavMechanism} from '@github-ui/soft-nav/events'\nimport {HPCDomInsertionEvent, HPCTimingEvent, type HPCEventTarget} from './hpc-events'\nimport {getCurrentReactAppName} from '@github-ui/soft-nav/utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\n\nconst INSERTION_TIMEOUT = 10000\n\nfunction getAppName() {\n  return getCurrentReactAppName() || 'rails'\n}\n\nfunction isVisible(element: HTMLElement) {\n  // Safari doesn't support `checkVisibility` yet.\n  if (typeof element.checkVisibility === 'function') return element.checkVisibility()\n\n  return Boolean(element.offsetParent || element.offsetWidth || element.offsetHeight)\n}\n\nfunction setLCPasHPC(soft: boolean, found: boolean) {\n  onLCP(({value, attribution}) => {\n    window.performance.measure('HPC', {start: 'navigationStart', end: value})\n    sendVitals({\n      name: 'HPC',\n      value,\n      soft,\n      found,\n      gqlFetched: hasFetchedGQL(),\n      jsFetched: hasFetchedJS(),\n      ssr: wasServerRendered(),\n      lazy: isReactLazyPayload(),\n      alternate: isReactAlternate(),\n      mechanism: 'hard',\n      app: getAppName(),\n      attribution: {\n        element: attribution?.element,\n      },\n    } as HPCTimingEvent)\n  })\n}\n\ninterface HPCObserverAttributes {\n  soft: boolean\n  mechanism: SoftNavMechanism | 'hard'\n  latestHPCElement: Element | null\n}\n\nexport class HPCObserver {\n  abortController = new AbortController()\n  tabHidden = false\n  insertionFound = false\n  hpcElement: Element | null = null\n\n  soft: boolean\n  mechanism: SoftNavMechanism | 'hard'\n  latestHPCElement: Element | null\n  hpcStart: DOMHighResTimeStamp\n  hpcTarget: HPCEventTarget = new EventTarget() as HPCEventTarget\n  animationFrame?: number\n  dataHPCanimationFrame?: number\n  emulatedHPCTimer?: ReturnType<typeof setTimeout>\n  listenerOpts: AddEventListenerOptions\n  hpcDOMInsertionObserver: MutationObserver | null = null\n\n  constructor({soft, mechanism, latestHPCElement}: HPCObserverAttributes) {\n    this.soft = soft\n    this.mechanism = mechanism\n    this.latestHPCElement = latestHPCElement\n    this.hpcStart = soft ? performance.now() : 0\n    this.listenerOpts = {capture: true, passive: true, once: true, signal: this.abortController.signal}\n  }\n\n  connect() {\n    if (!this.soft) {\n      // In a hard-load, if the script is evaluated after the `data-hpc` element is rendered,\n      // we default the HPC value to LCP.\n      const hpcElement = document.querySelector('[data-hpc]')\n      if (hpcElement) {\n        this.hpcElement = hpcElement\n        setLCPasHPC(this.soft, true)\n        return\n      }\n\n      // if the element is not in the page yet, listen for mutations.\n      setTimeout(() => {\n        // if no mutations happen after INSERTION_TIMEOUT, default to LCP again\n        if (!this.insertionFound) setLCPasHPC(this.soft, false)\n      }, INSERTION_TIMEOUT)\n    }\n\n    this.setupListeners()\n    this.hpcDOMInsertionObserver = this.buildMutationObserver()\n    this.hpcDOMInsertionObserver.observe(document, {childList: true, subtree: true})\n  }\n\n  disconnect() {\n    this.cleanupListeners()\n    this.hpcDOMInsertionObserver?.disconnect()\n  }\n\n  // Observer to listen to ALL mutations to the DOM. We need to check all added nodes\n  // for the `data-hpc` attribue. If none are found, we keep listening until all mutations are done.\n  private buildMutationObserver() {\n    return new MutationObserver(mutations => {\n      let hasDataHPC = false\n      let visibleElement = false\n      let hpcElement: Element | null = null\n      let insertionElement: Element | null = null\n\n      // if the mutation didn't add any nodes, we don't track its HPC\n      if (mutations.every(mutation => mutation.addedNodes.length === 0)) return\n\n      for (const mutation of mutations) {\n        if (mutation.type !== 'childList') continue\n\n        for (const node of mutation.addedNodes) {\n          if (!(node instanceof Element)) continue\n\n          hpcElement = node.hasAttribute('data-hpc') ? node : node.querySelector('[data-hpc]')\n          if (hpcElement) {\n            this.hpcElement = hpcElement\n            if (this.animationFrame) cancelAnimationFrame(this.animationFrame)\n            hasDataHPC = true\n            break\n          }\n\n          // we only care about visible elements\n          if (isVisible(node as HTMLElement)) {\n            insertionElement = node\n            if (this.animationFrame) cancelAnimationFrame(this.animationFrame)\n            visibleElement = true\n          }\n        }\n\n        if (hasDataHPC) break\n      }\n\n      if (hasDataHPC && hpcElement) {\n        this.reportHPC(hpcElement)\n      } else if (visibleElement) {\n        const insertionEvent = new HPCDomInsertionEvent(insertionElement)\n        this.animationFrame = requestAnimationFrame(() => {\n          this.hpcTarget.dispatchEvent(insertionEvent)\n        })\n      }\n    })\n  }\n\n  private reportHPC(element: Element) {\n    window.performance.measure('HPC', 'navigationStart')\n    // data-hpc found, we can stop listening to mutations.\n    this.hpcDOMInsertionObserver?.disconnect()\n    // only cancel the animation frame if the controller aborts.\n    const timingEvent = new HPCTimingEvent(\n      this.soft,\n      wasServerRendered(),\n      isReactLazyPayload(),\n      isReactAlternate(),\n      this.mechanism,\n      true,\n      hasFetchedGQL(),\n      hasFetchedJS(),\n      getAppName(),\n      this.hpcStart,\n      element,\n    )\n\n    this.dataHPCanimationFrame = requestAnimationFrame(() => {\n      this.hpcTarget.dispatchEvent(timingEvent)\n    })\n  }\n\n  private cleanupListeners() {\n    document.removeEventListener('touchstart', this.stop, this.listenerOpts)\n    document.removeEventListener('mousedown', this.stop, this.listenerOpts)\n    document.removeEventListener('keydown', this.stop, this.listenerOpts)\n    document.removeEventListener('pointerdown', this.stop, this.listenerOpts)\n    document.removeEventListener('visibilitychange', this.onVisibilityChange)\n    document.removeEventListener(SOFT_NAV_STATE.RENDER, this.onSoftNavRender)\n\n    this.hpcTarget.removeEventListener('hpc:dom-insertion', this.onDOMInsertion)\n    this.hpcTarget.removeEventListener('hpc:timing', this.onHPCTiming)\n\n    this.abortController.signal.removeEventListener('abort', this.onAbort)\n  }\n\n  private setupListeners() {\n    // Stop listening for HPC events if the user has interacted, as interactions\n    // can cause DOM mutations, which we want to avoid capturing for HPC.\n    // eslint-disable-next-line github/require-passive-events\n    document.addEventListener('touchstart', this.stop, this.listenerOpts)\n    document.addEventListener('mousedown', this.stop, this.listenerOpts)\n    document.addEventListener('keydown', this.stop, this.listenerOpts)\n    document.addEventListener('pointerdown', this.stop, this.listenerOpts)\n\n    // Process HPC events\n    this.hpcTarget.addEventListener('hpc:dom-insertion', this.onDOMInsertion, {\n      signal: this.abortController.signal,\n    })\n    this.hpcTarget.addEventListener('hpc:timing', this.onHPCTiming, {signal: this.abortController.signal})\n    document.addEventListener(SOFT_NAV_STATE.RENDER, this.onSoftNavRender)\n\n    // If the user changes tab, we don't want to send the recorded metrics since it may send garbage data.\n    document.addEventListener('visibilitychange', this.onVisibilityChange, {\n      signal: this.abortController.signal,\n    })\n\n    // If the stop event is triggered, we want to stop listening to DOM mutations.\n    this.abortController.signal.addEventListener('abort', this.onAbort)\n  }\n\n  stop = () => {\n    this.abortController.abort()\n  }\n\n  onDOMInsertion = (e: HPCDomInsertionEvent) => {\n    this.insertionFound = true\n    clearTimeout(this.emulatedHPCTimer)\n    // Whenever we see a DOM insertion, we keep track of when it happened.\n    const event = new HPCTimingEvent(\n      this.soft,\n      wasServerRendered(),\n      isReactLazyPayload(),\n      isReactAlternate(),\n      this.mechanism,\n      false,\n      hasFetchedGQL(),\n      hasFetchedJS(),\n      getAppName(),\n      this.hpcStart,\n      e.element,\n    )\n\n    // If no mutations happen after the timeout, we assume that the DOM is fully loaded, so we send the\n    // last seen mutation values.\n    this.emulatedHPCTimer = setTimeout(() => this.hpcTarget.dispatchEvent(event), INSERTION_TIMEOUT)\n  }\n\n  onHPCTiming = (e: HPCTimingEvent) => {\n    if (!this.tabHidden && e.value < 60_000) sendVitals(e)\n\n    this.abortController.abort()\n  }\n\n  onVisibilityChange = () => {\n    this.tabHidden = true\n    this.abortController.abort()\n  }\n\n  onSoftNavRender = () => {\n    const currentHPCElement = document.querySelector('[data-hpc]')\n    this.hpcElement = currentHPCElement\n\n    // In case the soft navigation doesn't change the root data-hpc element, the MutationObserver\n    // won't catch it, so we use the soft navigation timing as HPC.\n    if (!currentHPCElement || currentHPCElement !== this.latestHPCElement) return\n\n    this.reportHPC(currentHPCElement)\n  }\n\n  onAbort = () => {\n    if (this.dataHPCanimationFrame) cancelAnimationFrame(this.dataHPCanimationFrame)\n    if (this.animationFrame) cancelAnimationFrame(this.animationFrame)\n    clearTimeout(this.emulatedHPCTimer)\n    this.disconnect()\n  }\n}\n","// Based on https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/lib/polyfills/interactionCountPolyfill.ts\ndeclare global {\n  interface Performance {\n    interactionCount: number\n  }\n}\n\n/*\n * The InteractionCountObserver tracks the number of interactions that have occurred on the page. This\n * is used to estimate INP's p98 value.\n */\nexport class InteractionCountObserver {\n  interactionCountEstimate = 0\n  minKnownInteractionId = Infinity\n  maxKnownInteractionId = 0\n  observer?: PerformanceObserver\n\n  get interactionCount() {\n    return this.observer ? this.interactionCountEstimate : performance.interactionCount || 0\n  }\n\n  teardown() {\n    if (this.observer) {\n      // take the records so a new observer will start empty\n      this.observer.takeRecords()\n      this.observer.disconnect()\n      this.observer = undefined\n    }\n  }\n\n  // from https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/lib/polyfills/interactionCountPolyfill.ts#L29-L40\n  updateEstimate = (entries: PerformanceEventTiming[]) => {\n    for (const e of entries) {\n      if (e.interactionId) {\n        this.minKnownInteractionId = Math.min(this.minKnownInteractionId, e.interactionId)\n        this.maxKnownInteractionId = Math.max(this.maxKnownInteractionId, e.interactionId)\n\n        this.interactionCountEstimate = this.maxKnownInteractionId\n          ? (this.maxKnownInteractionId - this.minKnownInteractionId) / 7 + 1\n          : 0\n      }\n    }\n  }\n\n  observe() {\n    if ('interactionCount' in performance || this.observer) return\n\n    this.observer = new PerformanceObserver(async list => {\n      // Delay by a microtask to workaround a bug in Safari where the\n      // callback is invoked immediately, rather than in a separate task.\n      // See: https://github.com/GoogleChrome/web-vitals/issues/277\n      await Promise.resolve()\n\n      this.updateEstimate(list.getEntries() as PerformanceEventTiming[])\n    })\n\n    this.observer.observe({\n      type: 'event',\n      buffered: true,\n      durationThreshold: 0,\n    })\n  }\n}\n","export interface Interaction {\n  id: string\n  latency: number\n  entries: PerformanceEventTiming[]\n}\n\n/*\n * The InteractionList is a list of interactions that are sorted by latency DESCENDING.\n * The list has a maximum size and will remove the shortest interaction if the list is full.\n */\nexport class InteractionList {\n  interactions: Interaction[] = []\n  interactionsMap: Map<string, Interaction> = new Map()\n  maxSize: number\n\n  constructor(size: number) {\n    this.maxSize = size\n  }\n\n  get shortestInteraction() {\n    return this.interactions[this.interactions.length - 1]\n  }\n\n  get(id: string) {\n    return this.interactionsMap.get(id)\n  }\n\n  update(interaction: Interaction, entry: PerformanceEventTiming) {\n    const newLatency = Math.max(interaction.latency, entry.duration)\n    interaction.entries.push(entry)\n\n    if (newLatency !== interaction.latency) {\n      interaction.latency = Math.max(interaction.latency, entry.duration)\n      // the new value may change sorting order so we need to sort the list\n      this.sort()\n    }\n  }\n\n  add(interaction: Interaction) {\n    const shortestInteraction = this.shortestInteraction\n\n    // Only add interaction if list is not full or if the interaction is longer than the shortest one\n    if (\n      this.interactions.length <= this.maxSize ||\n      !shortestInteraction ||\n      interaction.latency > shortestInteraction.latency\n    ) {\n      this.interactionsMap.set(interaction.id, interaction)\n      this.interactions.push(interaction)\n      this.sort()\n\n      // Remove the shortest interaction if list reached the limit\n      if (this.interactions.length > this.maxSize) {\n        this.interactions.pop()\n      }\n    }\n  }\n\n  sort() {\n    this.interactions.sort((a, b) => b.latency - a.latency)\n  }\n\n  findEntry(entry: PerformanceEventTiming) {\n    return this.interactions.some((interaction: Interaction) => {\n      return interaction.entries.some(prevEntry => {\n        return entry.duration === prevEntry.duration && entry.startTime === prevEntry.startTime\n      })\n    })\n  }\n\n  // from https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/onINP.ts#L112-L123\n  estimateP98(numOfPageInteractions: number) {\n    const candidateInteractionIndex = Math.min(this.interactions.length - 1, Math.floor(numOfPageInteractions / 50))\n\n    return this.interactions[candidateInteractionIndex]\n  }\n}\n","import {getSelector} from '../get-selector'\n\ninterface INPAttribution {\n  eventTarget?: string\n}\n\n/*\n * The INP metric. This class is compatible with web-vitals' INPMetric interface that we expect to report to DataDog and Hydro.\n */\nexport class INPMetric {\n  name = 'INP' as const\n  value: number\n  entries: PerformanceEventTiming[]\n  attribution: INPAttribution\n\n  constructor(value: number, entries: PerformanceEventTiming[]) {\n    this.value = value\n    this.entries = entries\n\n    const firstEntryWithTarget = entries.find(entry => entry.target)\n    this.attribution = {\n      eventTarget: getSelector(firstEntryWithTarget?.target),\n    }\n  }\n}\n","import {InteractionCountObserver} from './interaction-count'\nimport {InteractionList, type Interaction} from './interaction-list'\nimport {INPMetric} from './metric'\n\nconst MAX_INTERACTION_ENTRIES = 10\n/*\n * The InteractionProcessor is responsible for processing PerformanceEventTiming entries and keeping track of the current INP.\n */\nexport class InteractionProcessor {\n  interactions: InteractionList = new InteractionList(MAX_INTERACTION_ENTRIES)\n  interactionCountObserver: InteractionCountObserver\n\n  constructor() {\n    this.interactionCountObserver = new InteractionCountObserver()\n    this.interactionCountObserver.observe()\n  }\n\n  get inp() {\n    const interaction = this.interactions.estimateP98(this.interactionCountObserver.interactionCount)\n\n    // Pages without interactions report INP = 0\n    if (!interaction) {\n      return new INPMetric(0, [])\n    }\n\n    return new INPMetric(interaction.latency, interaction.entries)\n  }\n\n  teardown() {\n    this.interactionCountObserver.teardown()\n  }\n\n  processEntries(entries: PerformanceEventTiming[]) {\n    for (const entry of entries) {\n      // This is a `event` type entry\n      if (entry.interactionId) {\n        this.processEntry(entry)\n        continue\n      }\n\n      // see https://github.com/GoogleChrome/web-vitals/blob/7b44bea0d5ba6629c5fd34c3a09cc683077871d0/src/onINP.ts#L169-L189\n      if (entry.entryType === 'first-input') {\n        if (!this.interactions.findEntry(entry)) {\n          this.processEntry(entry)\n        }\n      }\n    }\n  }\n\n  processEntry(entry: PerformanceEventTiming) {\n    const existingInteraction = this.interactions.get(String(entry.interactionId))\n\n    // multiple events may be fired for the same interaction, so we'll only keep\n    // the longest duration.\n    if (existingInteraction) {\n      return this.interactions.update(existingInteraction, entry)\n    }\n\n    const interaction: Interaction = {\n      id: String(entry.interactionId),\n      latency: entry.duration,\n      entries: [entry],\n    }\n\n    this.interactions.add(interaction)\n  }\n}\n","import {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {ssrSafeDocument, ssrSafeWindow} from '@github-ui/ssr-utils'\nimport type {INPMetric} from './metric'\nimport {InteractionProcessor} from './interaction-processor'\n\nconst supportsINP =\n  // eslint-disable-next-line compat/compat\n  ssrSafeWindow && 'PerformanceEventTiming' in ssrSafeWindow && 'interactionId' in PerformanceEventTiming.prototype\n\ntype INPCallback = (inp: INPMetric, opts: {url?: string}) => void\n\n/*\n * The INPObserver is responsible for listening to Performance events and routing them to the InteractionProcessor.\n * It also manages resetting INP and reporting it when navigating or hiding a page.\n */\nexport class INPObserver {\n  cb: INPCallback\n  interactionProcessor: InteractionProcessor\n  observer?: PerformanceObserver\n  url?: string\n\n  constructor(cb: INPCallback) {\n    this.cb = cb\n    this.interactionProcessor = new InteractionProcessor()\n    this.setupListeners()\n  }\n\n  setupListeners() {\n    if (!supportsINP) return\n\n    const onHiddenOrPageHide = (event: Event) => {\n      if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\n        this.report()\n      }\n    }\n\n    // Similar to web-vitals, we report the current INP when hard navigating or\n    // when the page is hidden\n    ssrSafeDocument?.addEventListener('visibilitychange', onHiddenOrPageHide, true)\n    ssrSafeDocument?.addEventListener('pagehide', onHiddenOrPageHide, true)\n\n    // SOFT_NAV_STATE.RENDER is dispatched when the soft navigation finished rendering.\n    // That means that the previous page is fully hidden so we can stop listening for its events.\n    ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.RENDER, () => {\n      this.report()\n      this.reset()\n    })\n  }\n\n  observe(initialLoad = true) {\n    if (!supportsINP) return\n\n    this.url = ssrSafeWindow?.location.href\n    this.observer = new PerformanceObserver(list => {\n      this.interactionProcessor.processEntries(list.getEntries() as PerformanceEventTiming[])\n    })\n\n    this.observer.observe({type: 'first-input', buffered: initialLoad})\n    this.observer.observe({\n      type: 'event',\n      // threshold set by web-vitals library\n      durationThreshold: 40,\n      // buffered events are important on first page load since we may have missed\n      // a few until the observer was set up.\n      buffered: initialLoad,\n    })\n  }\n\n  report() {\n    this.cb(this.interactionProcessor.inp, {url: this.url})\n  }\n\n  teardown() {\n    this.observer?.takeRecords()\n    this.observer?.disconnect()\n  }\n\n  reset() {\n    this.teardown()\n    this.interactionProcessor.teardown()\n    this.interactionProcessor = new InteractionProcessor()\n    this.observe(false)\n  }\n}\n","import {announce} from '@github-ui/aria-live'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {SOFT_NAV_EXTERNAL_EVENTS} from './external'\nimport {failSoftNav, initSoftNav, renderedSoftNav, startSoftNav, succeedSoftNav} from './state'\nimport {SOFT_NAV_STATE} from './states'\n\nexport function setup() {\n  /** Ensure that when a turbo drive navigation happens, the page title is announced */\n  ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.SUCCESS, function (event) {\n    if (event.mechanism === 'turbo') {\n      announce(`${document.title}`)\n    }\n  })\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.INITIAL, initSoftNav)\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.START, e => {\n    startSoftNav((e as CustomEvent).detail.mechanism)\n  })\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.SUCCESS, () => succeedSoftNav())\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.ERROR, () => failSoftNav())\n  ssrSafeDocument?.addEventListener(SOFT_NAV_EXTERNAL_EVENTS.RENDER, () => renderedSoftNav())\n}\n","/*\n * Hi! The modules in this file are loaded on **every** page on github.com.\n * Please only add files here if the code does indeed need to be on every page.\n * If the code is needed on only some pages, please load it more sparingly by\n * following the docs at https://thehub.github.com/epd/engineering/dev-practicals/frontend/erb-pvc-catalyst/client-side-behaviors-with-catalyst/\n * To create a dynamically-loaded Catalyst component for your behavior instead.\n *\n */\n\nimport './github/behaviors/ajax-error'\nimport './github/behaviors/ajax-loading'\nimport './github/behaviors/ajax-pagination'\nimport './github/behaviors/analytics-events'\nimport './github/behaviors/animated-image'\nimport './github/behaviors/autocheck'\nimport './github/behaviors/autocomplete'\nimport './github/behaviors/autosearch-form'\nimport './github/behaviors/autoselect'\nimport './github/behaviors/autosubmit'\nimport './github/behaviors/avatar-reset-text'\nimport './github/behaviors/batch-deferred-content'\nimport './github/behaviors/billing-addons'\nimport './github/behaviors/blob-csv'\nimport './github/repositories/blob-header'\nimport './github/behaviors/branch-protection-integration-select'\nimport './github/behaviors/bulk-actions'\nimport './github/behaviors/bundle-download-stats'\nimport './github/behaviors/buttons'\nimport './github/behaviors/characters-remaining'\nimport './github/behaviors/check-all'\nimport './github/behaviors/clear-data-on-logout'\nimport './github/behaviors/clipboard-copy'\nimport './github/behaviors/code-nav'\nimport './github/behaviors/commenting/ajax'\nimport './github/behaviors/commenting/close'\nimport './github/behaviors/commenting/edit'\nimport './github/behaviors/commenting/focus'\nimport './github/behaviors/commenting/markdown'\nimport './github/behaviors/commenting/preview'\nimport './github/behaviors/commenting/reaction-suggestion'\nimport './github/behaviors/commits'\nimport './github/behaviors/confirm'\nimport './github/behaviors/company-name-input'\nimport './github/behaviors/company-owned'\nimport './github/behaviors/details'\nimport './github/behaviors/details-element'\nimport './github/behaviors/details-menu'\nimport './github/behaviors/dialog-helpers'\nimport './github/behaviors/disable-with'\nimport './github/behaviors/document-dropzone'\nimport './github/behaviors/encrypt'\nimport './github/behaviors/favicon'\nimport './github/behaviors/feature-preview-indicator'\nimport './github/behaviors/feature-preview-trigger'\nimport './github/behaviors/file-attachment'\nimport './github/behaviors/filter-input'\nimport './github/behaviors/filterable'\nimport './github/behaviors/fixed-offset-fragment-navigation-observer'\nimport './github/behaviors/flash'\nimport './github/behaviors/flash-observer'\nimport './github/behaviors/focus-delay'\nimport './github/behaviors/form-toggle'\nimport './github/behaviors/fuzzy-list'\nimport './github/behaviors/gfm'\nimport './github/behaviors/hash-change'\nimport './github/behaviors/header'\nimport './github/behaviors/hooks'\nimport './github/behaviors/hotkey-map'\nimport './github/behaviors/hovercards'\nimport './github/behaviors/html-validation'\nimport './github/behaviors/hydro-analytics-pageview'\nimport './github/behaviors/hydro-analytics-tracking'\nimport './github/behaviors/hydro-click-tracking'\nimport './github/behaviors/immediate-updates'\nimport './github/behaviors/include-fragment'\nimport './github/behaviors/indeterminate'\nimport './github/behaviors/keyboard-shortcuts'\nimport './github/behaviors/length-limited-input-with-warning'\nimport './github/behaviors/member-search-filter'\nimport './github/behaviors/notice'\nimport './github/behaviors/open-in-github-dev'\nimport './github/behaviors/permalink'\nimport './github/behaviors/permission-menu-form'\nimport './github/behaviors/turbo-timing'\nimport './github/behaviors/print-popup'\nimport './github/behaviors/poll-include-fragment'\nimport './github/behaviors/quick-submit'\nimport './github/behaviors/quote-selection'\nimport './github/behaviors/reactions'\nimport './github/behaviors/remote-form'\nimport './github/behaviors/removed-contents'\nimport './github/behaviors/render-editor'\nimport './github/behaviors/enrichable-markdown-render'\nimport './github/behaviors/replace-remote-form'\nimport './github/behaviors/report-long-tasks'\nimport './github/behaviors/responsive-underlinenav'\nimport './github/behaviors/saved-replies'\nimport './github/behaviors/scanning'\nimport './github/behaviors/session-resume'\nimport './github/behaviors/side-navigation'\nimport './github/behaviors/site-notifications'\nimport './github/behaviors/site-search'\nimport './github/behaviors/size-to-fit'\nimport './github/behaviors/smooth-scroll-anchor'\nimport './github/behaviors/snippet-clipboard-copy'\nimport './github/behaviors/social'\nimport './github/behaviors/socket-channel'\nimport './github/behaviors/sso-auto-replay'\nimport './github/behaviors/stale-session'\nimport './github/behaviors/statuses'\nimport './github/behaviors/sticky'\nimport './github/behaviors/sticky-is-stuck'\nimport './github/behaviors/sudo-required'\nimport './github/behaviors/suggesters/emoji-suggester'\nimport './github/behaviors/suggesters/issue-suggester'\nimport './github/behaviors/suggesters/mention-suggester'\nimport './github/behaviors/survey'\nimport './github/behaviors/sync-details-text'\nimport './github/behaviors/tab-container'\nimport './github/behaviors/tag-input'\nimport './github/behaviors/targetable-elements'\nimport './github/behaviors/task-list'\nimport './github/behaviors/team-members'\nimport './github/behaviors/timeline/marker'\nimport './github/behaviors/timeline/progressive'\nimport './github/behaviors/timeline/timeline-accessibility'\nimport './github/behaviors/toggler'\nimport './github/behaviors/register-service-worker'\nimport '@github-ui/turbo'\nimport './github/behaviors/tz-cookie'\nimport './github/behaviors/sudo-credential-options'\nimport './github/behaviors/unread-comments'\nimport './github/behaviors/unread-item-counter'\nimport './github/behaviors/updatable-content-observer'\nimport './github/behaviors/updatable-content-stale-object'\nimport './github/behaviors/upload-avatar'\nimport './github/behaviors/user-content'\nimport './github/behaviors/user-select-contain-polyfill'\nimport './github/behaviors/user-status-loader'\nimport './github/behaviors/user-lists'\nimport './github/behaviors/warn-unsaved-changes'\nimport './github/behaviors/will-transition-once'\nimport './github/issues/issue-link'\nimport './github/issues/labels'\nimport './github/issues/sidebar'\nimport './github/memex/search'\nimport {setup as setupSoftNav} from '@github-ui/soft-nav/setup'\nimport {setupWebVitals} from '@github-ui/web-vitals/setup'\nimport {setupCPUCookie} from '@github-ui/cpu-cookie'\n\nsetupSoftNav()\nsetupWebVitals()\nsetupCPUCookie()\n","import {onCLS, onFCP, onFID, onLCP, onTTFB} from 'web-vitals/attribution'\nimport {sendSoftVitals, sendTimingResults, sendVitals} from './timing-stats'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {HPCObserver} from './hpc'\nimport {INPObserver} from './inp/observer'\n\nexport function setupWebVitals() {\n  sendTimingResults()\n  onCLS(sendVitals)\n  onFCP(sendVitals)\n  onFID(sendVitals)\n  onLCP(sendVitals)\n  onTTFB(sendVitals)\n\n  onLCP(sendSoftVitals, {reportSoftNavs: true})\n  onCLS(sendSoftVitals, {reportSoftNavs: true})\n\n  const inpObserver = new INPObserver(sendVitals)\n  inpObserver.observe()\n\n  // Start HPC at page load.\n  let hpcObserver = new HPCObserver({soft: false, mechanism: 'hard', latestHPCElement: null})\n  hpcObserver.connect()\n  // Any time we trigger a new soft navigation, we want to reset HPC.\n  ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.START, ({mechanism}) => {\n    hpcObserver.disconnect()\n    hpcObserver = new HPCObserver({soft: true, mechanism, latestHPCElement: document.querySelector('[data-hpc]')})\n    hpcObserver.connect()\n  })\n\n  ssrSafeDocument?.addEventListener(SOFT_NAV_STATE.REPLACE_MECHANISM, ({mechanism}) => {\n    hpcObserver.mechanism = mechanism\n  })\n}\n","import {setCookie} from '@github-ui/cookies'\nimport {getCPUBucket} from '@github-ui/cpu-bucket'\n\nexport function setupCPUCookie() {\n  setCookie('cpu_bucket', getCPUBucket())\n}\n","type AutoFlushingQueueEntry<ElementType> = [ElementType, string]\nclass AutoFlushingQueue<ElementType = HTMLElement> {\n  timeout: number\n  limit: number\n  elements: Array<AutoFlushingQueueEntry<ElementType>> = []\n  timer: number | null = null\n  callbacks: Array<(elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>> = []\n  index: number\n\n  constructor(timeout = 50, limit = 30) {\n    this.timeout = timeout // flush timeout in milliseconds\n    this.limit = limit // max number of elements before autoflushing\n    this.index = 0\n  }\n\n  push(element: ElementType): string {\n    const key = `item-${this.index++}`\n\n    if (this.timer) {\n      window.clearTimeout(this.timer)\n      this.timer = null\n    }\n    if (this.elements.length >= this.limit) {\n      this.flush()\n    }\n\n    this.timer = window.setTimeout(() => {\n      this.timer = null\n      this.flush()\n    }, this.timeout)\n\n    this.elements.push([element, key])\n    return key\n  }\n\n  onFlush(callback: (elementsToFlush: Array<AutoFlushingQueueEntry<ElementType>>) => Promise<void>): void {\n    this.callbacks.push(callback)\n  }\n\n  private async flush(): Promise<void> {\n    const elementsToFlush = this.elements.splice(0, this.limit)\n    if (elementsToFlush.length === 0) return\n\n    await Promise.all(this.callbacks.map(callback => callback(elementsToFlush)))\n  }\n}\n\ninterface HTMLElementWithInputs extends HTMLElement {\n  inputs: HTMLInputElement[]\n}\n\nexport class BatchLoader<ResponseType> {\n  autoFlushingQueue: AutoFlushingQueue<HTMLElementWithInputs>\n  url: string\n  callbacks: Map<string, (value: ResponseType) => void>\n  validate: (value: unknown) => asserts value is ResponseType\n\n  constructor(url: string, validator: (value: unknown) => asserts value is ResponseType) {\n    this.url = url\n    this.callbacks = new Map()\n    this.autoFlushingQueue = new AutoFlushingQueue()\n    this.autoFlushingQueue.onFlush(async elements => {\n      this.load(elements)\n    })\n    this.validate = validator\n  }\n\n  loadInBatch(element: HTMLElementWithInputs): Promise<ResponseType> {\n    const key = this.autoFlushingQueue.push(element)\n    return new Promise(resolve => this.callbacks.set(key, resolve))\n  }\n\n  async load(elements: Array<AutoFlushingQueueEntry<HTMLElementWithInputs>>) {\n    const elementsByKey = new Map<string, HTMLElementWithInputs>()\n\n    for (const [batchElement, key] of elements) {\n      elementsByKey.set(key, batchElement)\n    }\n\n    const consolidatedData = new FormData()\n\n    for (const [key, batchElement] of elementsByKey.entries()) {\n      for (const input of batchElement.inputs) {\n        consolidatedData.append(`items[${key}][${input.name}]`, input.value)\n      }\n    }\n\n    if (Array.from(consolidatedData.values()).length === 0) {\n      return\n    }\n\n    consolidatedData.set('_method', 'GET')\n    const response = await fetch(this.url, {\n      method: 'POST',\n      body: consolidatedData,\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    })\n\n    if (response.ok) {\n      const json = await response.json()\n\n      if (!json || typeof json !== 'object' || Array.isArray(json)) {\n        throw new Error('Malformed batch response')\n      }\n\n      for (const key in json) {\n        const callback = this.callbacks.get(key)\n        if (callback) {\n          const value = json[key]\n          this.validate(value)\n          callback(value)\n        }\n      }\n    }\n  }\n}\n","// Batch Deferred Content Behavior\n//\n// Automatically fetches content for multiple placeholders with a single request.\n// Placeholders are represented as <batch-deferred-content>'s so that per-placeholder arguments can be\n// passed along to the backend for rendering. Once the response is received, each placeholder\n// will be replaced with it's relevant content.\n//\n// Batching is handled by an autoflushing queue. Once an upper limit (default 30) of placeholders\n// are found, or new placeholders stop being added to the queue, after a timeout (default 50ms),\n// a single request will be made to fetch the content for those items.\n//\n// Example Markup\n//\n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"42\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"abcdef0\">\n//   </batch-deferred-content>\n//   \n//   <batch-deferred-content data-url=\"/my/batched/content/endpoint\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"repo_id\" value=\"88\">\n//     <input data-targets=\"batch-deferred-content.inputs\" type=\"hidden\" name=\"commit_oid\" value=\"f000001\">\n//   </batch-deferred-content>\n//\n// Example Request\n//\n//   POST /my/batched/content/endpoint\n//   BODY {\n//     items: {\n//       item-0: {repo_id: 42, commit_oid: \"abcdef0\"},\n//       item-1: {repo_id: 88, commit_oid: \"f000001\"},\n//     }\n//   }\n//\n// Example Response\n//\n//   Content-Type: application/json\n//   BODY {\n//     item-0: \"<div>Some markup</div>\",\n//     item-1: \"<div>More markup</div>\",\n//   }\n\nimport {controller, targets} from '@github/catalyst'\nimport {parseHTML} from '@github-ui/parse-html'\nimport {BatchLoader} from './batch-deferred-content/batch-loader'\n\nexport abstract class BaseBatchDeferredContentElement<ResponseType> extends HTMLElement {\n  inputs: HTMLInputElement[]\n  batchLoaders: Map<string, BatchLoader<ResponseType>>\n\n  abstract update(content: ResponseType): void\n  abstract validate(value: unknown): asserts value is ResponseType\n\n  async connectedCallback() {\n    const content = await this.batchLoader.loadInBatch(this)\n    this.update(content)\n  }\n\n  get batchLoader(): BatchLoader<ResponseType> {\n    const url = this.getAttribute('data-url')\n\n    if (!url) {\n      throw new Error(`${this.tagName} element requires a data-url attribute`)\n    }\n\n    let loader = this.batchLoaders.get(url)\n    if (!loader) {\n      loader = new BatchLoader(url, (value: unknown) => this.validate(value))\n      this.batchLoaders.set(url, loader)\n    }\n    return loader\n  }\n}\n\nconst batchDeferredContentLoaders: Map<string, BatchLoader<string>> = new Map()\n\n@controller\nclass BatchDeferredContentElement extends BaseBatchDeferredContentElement<string> {\n  @targets override inputs: HTMLInputElement[]\n\n  override batchLoaders = batchDeferredContentLoaders\n\n  validate(value: unknown): asserts value is string {\n    if (typeof value !== 'string') {\n      throw new Error('Batch deferred content was not a string')\n    }\n  }\n\n  update(content: string): void {\n    const docFragment = parseHTML(document, content)\n    this.replaceWith(docFragment)\n  }\n}\n","import {getUtf8StringLength} from '@github-ui/text'\nimport {onFocus} from '@github-ui/onfocus'\n\nfunction showRemainingCharacterCount(value: string, limit: number, field: HTMLTextAreaElement | HTMLInputElement) {\n  const container = field.closest('.js-characters-remaining-container')\n  if (!container) {\n    return\n  }\n\n  const remainingEl = container.querySelector<HTMLElement>('.js-characters-remaining')!\n  const suffix = String(remainingEl.getAttribute('data-suffix'))\n  const valueLength = getUtf8StringLength(value)\n  const remainingCount = limit - valueLength\n\n  if (remainingCount <= 20) {\n    remainingEl.textContent = `${remainingCount} ${suffix}`\n    remainingEl.classList.toggle('color-fg-danger', remainingCount <= 5)\n    remainingEl.setAttribute('role', 'status')\n    remainingEl.hidden = false\n  } else {\n    remainingEl.setAttribute('role', 'none')\n    remainingEl.hidden = true\n  }\n}\n\nfunction getFieldLimit(input: HTMLTextAreaElement | HTMLInputElement): number {\n  if (input.hasAttribute('data-maxlength')) {\n    return parseInt(input.getAttribute('data-maxlength') || '')\n  }\n\n  return input.maxLength\n}\n\nexport function hasExceededCharacterLimit(input: HTMLTextAreaElement | HTMLInputElement): boolean {\n  const limit = getFieldLimit(input)\n  const valueLength = getUtf8StringLength(input.value)\n  const remainingCount = limit - valueLength\n\n  return remainingCount < 0\n}\n\nexport function updateInputRemainingCharacters(input: HTMLTextAreaElement | HTMLInputElement) {\n  const limit = getFieldLimit(input)\n  showRemainingCharacterCount(input.value, limit, input)\n}\n\nexport function resetCharactersRemainingCounts(container: Element) {\n  const charContainers = container.querySelectorAll('.js-characters-remaining-container')\n\n  for (const charContainer of charContainers) {\n    const input = charContainer.querySelector<HTMLInputElement>('.js-characters-remaining-field')!\n    updateInputRemainingCharacters(input)\n  }\n}\n\nonFocus('.js-characters-remaining-field', function (input) {\n  function onInput() {\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      updateInputRemainingCharacters(input)\n    }\n  }\n  onInput()\n\n  input.addEventListener('input', onInput)\n  input.addEventListener(\n    'blur',\n    () => {\n      input.removeEventListener('input', onInput)\n    },\n    {once: true},\n  )\n})\n","// Confirm\n//\n// Prompts native confirm dialog before activating link.\n//\n// data-confirm - Message to pass to confirm().\n//\n//   <button type=\"submit\" data-confirm=\"Are you sure?\">Delete</a>\n\ndocument.addEventListener(\n  'click',\n  function (event) {\n    if (!(event.target instanceof Element)) return\n\n    const selector =\n      'a[data-confirm], input[type=submit][data-confirm], input[type=checkbox][data-confirm], button[data-confirm]'\n\n    const currentTarget = event.target.closest(selector)\n    if (!currentTarget) return\n\n    const message = currentTarget.getAttribute('data-confirm')\n    if (!message) return\n\n    if (\n      currentTarget instanceof HTMLInputElement &&\n      currentTarget.hasAttribute('data-confirm-checked') &&\n      !currentTarget.checked\n    ) {\n      return\n    }\n\n    if (!confirm(message)) {\n      event.stopImmediatePropagation()\n      event.preventDefault()\n    }\n  },\n  true,\n)\n","// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\n// Entire document is drop target.\nobserve('.js-document-dropzone', {\n  constructor: HTMLElement,\n  add(el) {\n    document.body.addEventListener('dragstart', onDragstart)\n    document.body.addEventListener('dragend', onDragend)\n    document.body.addEventListener('dragenter', onDragenter)\n    document.body.addEventListener('dragover', onDragenter)\n    document.body.addEventListener('dragleave', onBodyDragleave)\n    el.addEventListener('drop', onDrop)\n  },\n  remove(el) {\n    document.body.removeEventListener('dragstart', onDragstart)\n    document.body.removeEventListener('dragend', onDragend)\n    document.body.removeEventListener('dragenter', onDragenter)\n    document.body.removeEventListener('dragover', onDragenter)\n    document.body.removeEventListener('dragleave', onBodyDragleave)\n    el.removeEventListener('drop', onDrop)\n  },\n})\n\nexport function hasFile(transfer: DataTransfer): boolean {\n  return Array.from(transfer.types).indexOf('Files') >= 0\n}\n\nlet dragging: number | null = null\n\n// Highlight textarea and change drop cursor. Ensure drop target styles\n// are cleared after dragging back outside of window.\nfunction onDragenter(event: DragEvent) {\n  if (ignorePageElementDrag) return\n\n  const target = event.currentTarget as Element\n\n  if (dragging) {\n    window.clearTimeout(dragging)\n  }\n  dragging = window.setTimeout(() => target.classList.remove('dragover'), 200)\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  transfer.dropEffect = 'copy'\n  target.classList.add('dragover')\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\nfunction onBodyDragleave(event: DragEvent) {\n  // Ignore leave events from children to prevent flicker.\n  if (!(event.target instanceof Element)) return\n  if (event.target.classList.contains('js-document-dropzone')) {\n    const currentTarget = event.currentTarget as Element\n    currentTarget.classList.remove('dragover')\n  }\n}\n\nfunction onDrop(event: DragEvent) {\n  const container = event.currentTarget as Element\n\n  container.classList.remove('dragover')\n  document.body.classList.remove('dragover')\n\n  const transfer = event.dataTransfer\n  if (!transfer || !hasFile(transfer)) return\n\n  fire(container, 'document:drop', {transfer})\n\n  event.stopPropagation()\n  event.preventDefault()\n}\n\n// Ignore image or link drags from within the page itself. Allow them to be\n// dragged onto the desktop, but ignore any drops back onto the page.\nlet ignorePageElementDrag = false\n\nfunction onDragstart() {\n  ignorePageElementDrag = true\n}\n\nfunction onDragend() {\n  ignorePageElementDrag = false\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\n// Encrypt plain text with a public key.\nexport async function encrypt(publicKey: Uint8Array, value: string): Promise<Uint8Array> {\n  const encoder = new TextEncoder()\n  const messageBytes = encoder.encode(value)\n  const {seal} = await import('../tweetsodium')\n  return seal(messageBytes, publicKey)\n}\n\n// Decode base64 data into a byte array.\nexport function decode(encoded: string): Uint8Array {\n  const bytes = atob(encoded)\n    .split('')\n    .map(x => x.charCodeAt(0))\n  return Uint8Array.from(bytes)\n}\n\n// Encode a byte array as a base64 string.\nexport function encode(bytes: Uint8Array): string {\n  let str = ''\n  for (const byte of bytes) {\n    str += String.fromCharCode(byte)\n  }\n  return btoa(str)\n}\n\non('submit', 'form.js-encrypt-submit', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n\n  if (event.defaultPrevented || !form.checkValidity()) return\n  const plainText = form.elements.namedItem('secret_value') as HTMLTextAreaElement\n\n  // Prevent serializing plain text value in form submission.\n  plainText.disabled = true\n\n  if (!plainText.value) return\n\n  event.preventDefault()\n\n  // Submit encrypted value in hidden input.\n  const publicKey = decode(form.getAttribute('data-public-key')!)\n\n  ;(form.elements.namedItem('encrypted_value') as HTMLInputElement).value = encode(\n    await encrypt(publicKey, plainText.value),\n  )\n\n  form.submit()\n})\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is disabled.\non('submit', 'form.js-encrypt-bulk-submit', submitBulk(true))\n\n// Submit multiple encrypted values in hidden inputs. If an unencrypted field is empty,\n// its associated hidden encrypted field is not disabled.\non('submit', 'form.js-encrypt-bulk-submit-enable-empty', submitBulk(false))\n\n// Submit multiple encrypted values. If an unencrypted field is empty,\n// its associated hidden encrypted field is enabled or disabled depending on \"disableEmptyValues\".\nfunction submitBulk(disableEmptyValues: boolean) {\n  return async function (event: Event) {\n    const form = event.currentTarget as HTMLFormElement\n\n    if (event.defaultPrevented || !form.checkValidity()) return\n\n    // Submit encrypted value in hidden input.\n    const publicKey = decode(form.getAttribute('data-public-key')!)\n\n    event.preventDefault()\n    for (const element of form.elements) {\n      // Prevent serializing plain text value in form submission.\n      const formElement = element as HTMLInputElement\n      if (formElement.id.endsWith('secret')) {\n        formElement.disabled = true\n\n        if (formElement.required && !formElement.value) {\n          const message = `${formElement.name} is invalid!`\n          const template = document.querySelector<HTMLTemplateElement>('template.js-flash-template')!\n          template.after(new TemplateInstance(template, {className: 'flash-error', message}))\n          return\n        }\n\n        const encryptedValueElementName = `${formElement.name}_encrypted_value`\n        if (!formElement.value) {\n          ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).disabled = disableEmptyValues\n          continue\n        }\n\n        ;(form.elements.namedItem(encryptedValueElementName) as HTMLInputElement).value = encode(\n          await encrypt(publicKey, formElement.value),\n        )\n      }\n    }\n    form.submit()\n  }\n}\n","import {fromEvent} from '@github-ui/subscription'\nimport {loaded} from '@github-ui/document-ready'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport {positionedOffset} from '@primer/behaviors'\n\nobserve('.js-responsive-underlinenav', {\n  constructor: HTMLElement,\n  subscribe: nav => {\n    asyncCalculateVisibility(nav)\n    return fromEvent(window, 'resize', () => calculateVisibility(nav))\n  },\n})\n\nexport async function asyncCalculateVisibility(nav: HTMLElement) {\n  await loaded\n  calculateVisibility(nav)\n}\n\nfunction toggleItem(item: HTMLElement, hidden: boolean) {\n  // Set visibility to hidden, instead of .hidden attribute\n  // so we can still calculate distance accurately\n  item.style.visibility = hidden ? 'hidden' : ''\n  // Get tab-item name, if present, so we can match it up with the dropdown menu\n  const itemName = item.getAttribute('data-tab-item')\n  if (itemName) {\n    const itemToHide = document.querySelector<HTMLElement>(`[data-menu-item=${itemName}]`)\n    if (itemToHide instanceof HTMLElement) {\n      itemToHide.hidden = !hidden\n    }\n  }\n}\n\nfunction calculateVisibility(nav: HTMLElement) {\n  const items = nav.querySelectorAll<HTMLElement>('.js-responsive-underlinenav-item')\n  const overflowContainer = nav.querySelector<HTMLElement>('.js-responsive-underlinenav-overflow')!\n  const overflowOffset = positionedOffset(overflowContainer, nav)\n  if (!overflowOffset) {\n    return\n  }\n\n  let anyHidden = false\n  for (const item of items) {\n    const itemOffset = positionedOffset(item, nav)\n    if (itemOffset) {\n      const hidden = itemOffset.left + item.offsetWidth >= overflowOffset.left\n      toggleItem(item, hidden)\n      anyHidden = anyHidden || hidden\n    }\n  }\n  overflowContainer.style.visibility = anyHidden ? '' : 'hidden'\n}\n","import {persistResumableFields, restoreResumableFields, setForm} from '@github/session-resume'\nimport {debounce} from '@github/mini-throttle'\nimport {getPageID} from '../session-resume-helpers'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\nimport safeStorage from '@github-ui/safe-storage'\n\n// For some fields we'll save them to localStorage instead of sessionStorage\nconst safeLocalStorage = safeStorage('localStorage', {\n  ttl: 1000 * 60 * 5,\n  throwQuotaErrorsOnSet: false,\n  sendCacheStats: true,\n})\n\nexport const restoreFieldsFromAllBackends = () => {\n  restoreResumableFields(getPageID())\n  restoreResumableFields(getPageID(), {storage: safeLocalStorage})\n}\n\nconst sessionResumableSelector = '.js-session-resumable'\nconst localStorageResumableSelector = '.js-local-storage-resumable'\n\nconst persistFieldstoAllBackends = () => {\n  persistResumableFields(getPageID(), {selector: sessionResumableSelector})\n  persistResumableFields(getPageID(), {selector: localStorageResumableSelector, storage: safeLocalStorage})\n}\n\nconst debouncedRestoreResumableFields = debounce(function () {\n  restoreFieldsFromAllBackends()\n}, 50)\n\n/**\n * Returns true while turbo is showing a \"preview\" of the route from cache: in other words between\n * the time a route is visited and the time it is loaded\n * @returns boolean\n */\nfunction isTurboRenderingCachePreview(): boolean {\n  return document.querySelector('html')?.hasAttribute('data-turbo-preview') ?? false\n}\n\n// Session Resume.\n//\n// Annotate fields to be persisted on navigation away from the current page.\n// Fields be automatically restored when the user revists the page again in\n// their current browser session (excludes seperate tabs).\n//\n// Not design for persisted crash recovery.\n\n// Listen for all form submit events and to see if their default submission\n// behavior is invoked.\nwindow.addEventListener('submit', setForm, {capture: true})\n\n// Resume field content on regular page loads.\nwindow.addEventListener('pageshow', function () {\n  restoreFieldsFromAllBackends()\n})\n\n// Resume field content on elements that are added later\n// We use a debounced version to avoid repeatedly calling it if multiple\n// fields are added\nobserve('.js-session-resumable', function () {\n  // we don't want to restore fields on turbo-cache previews as that empties the cache\n  // causing the fields to be lost when turbo re-renders with the fetched page\n  if (!isTurboRenderingCachePreview()) {\n    debouncedRestoreResumableFields()\n  }\n})\n\n// Persist resumable fields when page is unloaded\nwindow.addEventListener('pagehide', function () {\n  persistFieldstoAllBackends()\n})\n\n// preserve fields before navigating away\nwindow.addEventListener('turbo:before-fetch-response', function () {\n  persistFieldstoAllBackends()\n})\n\n// restore fields once turbo navigation has finished\nwindow.addEventListener('turbo:load', function () {\n  restoreFieldsFromAllBackends()\n})\n","// Deal with selected_link_to on repository and gist pages\nfunction updateSelectedRepoTab(meta: HTMLMetaElement) {\n  const selection = meta && meta.getAttribute('value')\n\n  if (!selection) return\n\n  for (const item of document.querySelectorAll('.js-sidenav-container-pjax .js-selected-navigation-item')) {\n    const isSelected = (item.getAttribute('data-selected-links') || '').split(' ').indexOf(selection) >= 0\n    if (isSelected) {\n      item.setAttribute('aria-current', 'page')\n    } else {\n      item.removeAttribute('aria-current')\n    }\n    item.classList.toggle('selected', isSelected)\n  }\n}\n\nconst observer = new MutationObserver(mutations => {\n  for (const mutation of mutations) {\n    for (const node of mutation.addedNodes) {\n      if (!(node instanceof HTMLMetaElement)) continue\n\n      if (node.getAttribute('name') === 'selected-link') {\n        updateSelectedRepoTab(node)\n      }\n    }\n  }\n})\n\nobserver.observe(document.head, {childList: true})\n\n// This is to make sure that the selected tab is updated when using back/forward buttons.\ndocument.addEventListener('turbo:load', () => {\n  const selectedLink = document.head.querySelector<HTMLMetaElement>('meta[name=\"selected-link\"]')\n\n  if (!selectedLink) return\n\n  updateSelectedRepoTab(selectedLink)\n})\n","// Populate a form input from a suggested list of tags.\n//\n// Markup example:\n//\n//    <!-- Tag input container -->\n//    <div class=\"tag-input-container js-tag-input-container\">\n//\n//      <!-- Tag <input> wrapper -->\n//      <div class=\"tag-input js-tag-input-wrapper\">\n//\n//        <!-- List of selected tags -->\n//        <ul class=\"js-tag-input-selected-tags\">\n//\n//          <!-- Template used to generate new selected tags -->\n//          <li class=\"js-tag-input-tag js-template d-none\">\n//            <span class=\"js-placeholder-tag-name\"></span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"tag-value\">\n//          </li>\n//\n//          <!-- List of pre-selected tags (optional) -->\n//          <li class=\"js-tag-input-tag\">\n//            <span class=\"js-tag-input-tag-name\">ruby-on-rails</span>\n//            <a class=\"remove js-remove\" tabindex=\"-1\">&times;</a>\n//            <input type=\"hidden\" name=\"attribute[]\" value=\"ruby-on-rails\">\n//          </li>\n//        </ul>\n//\n//        <auto-complete src=\"<%= url %>\" for=\"popup\">\n//          <input type=\"text\" class=\"tag-input-inner\" autocomplete=\"off\" autofocus>\n//          <div class=\"js-navigation-container js-active-navigation-container\">\n//            <ul class=\"suggester\" id=\"popup\"></ul>\n//          </div>\n//        </auto-complete>\n//      </div>\n//    </div>\n//\n\nimport type AutocompleteElement from '@github/auto-complete-element'\nimport {eventToHotkeyString} from '@github-ui/hotkey'\n// eslint-disable-next-line no-restricted-imports\nimport {fire} from 'delegated-events'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\ninterface TagInputOptions {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement | null\n  multiTagInput: boolean\n}\n\nclass TagInput {\n  container: HTMLElement\n  selections: HTMLElement\n  inputWrap: HTMLElement\n  input: HTMLInputElement\n  form: HTMLFormElement\n  tagTemplate: HTMLElement\n  autoComplete: AutocompleteElement | null\n  multiTagInput: boolean\n\n  constructor(options: TagInputOptions) {\n    this.container = options.container\n    this.selections = options.selections\n    this.inputWrap = options.inputWrap\n    this.input = options.input\n    this.tagTemplate = options.tagTemplate\n    this.form = this.input.form!\n    this.autoComplete = options.autoComplete\n    this.multiTagInput = options.multiTagInput\n  }\n\n  // Bind a tag input to the DOM.\n  setup() {\n    this.container.addEventListener('click', (event: MouseEvent) => {\n      const target = event.target as Element\n      if (target.closest('.js-remove')) {\n        this.removeTag(event)\n      } else {\n        this.onFocus()\n      }\n    })\n    this.container.addEventListener('keydown', (event: KeyboardEvent) => {\n      // If the event isn't prevented that means the autocomplete is open but the user hasn't selected anything\n      // Handle that like the autocomplete is closed\n      // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n      if (event.key === 'Enter' && !(event.defaultPrevented || !this.input.value)) {\n        event.preventDefault()\n        this.selectTag(this.input.value)\n        if (this.autoComplete) {\n          this.autoComplete.open = false\n        }\n      }\n    })\n    this.input.addEventListener('focus', this.onFocus.bind(this))\n    this.input.addEventListener('blur', this.onBlur.bind(this))\n    this.input.addEventListener('keydown', this.onKeyDown.bind(this))\n    this.form.addEventListener('submit', this.onSubmit.bind(this))\n\n    this.autoComplete?.addEventListener('auto-complete-change', () => {\n      this.selectTag(this.autoComplete!.value)\n    })\n  }\n\n  // Make the tag input container look like a focused input.\n  onFocus() {\n    this.inputWrap.classList.add('focus')\n    if (this.input !== document.activeElement) this.input.focus()\n  }\n\n  // Make the tag input container *not* look like a focused input. Also submit\n  // the form if there is text in the input and the suggester is hidden.\n  onBlur() {\n    this.inputWrap.classList.remove('focus')\n    if (!this.autoComplete || (this.autoComplete && !this.autoComplete.open)) {\n      this.onSubmit()\n    }\n  }\n\n  // Taggify the last thing the user typed in case they didn't hit Enter, Tab,\n  // or a comma before clicking the form's submit button.\n  onSubmit() {\n    if (this.input.value) {\n      this.selectTag(this.input.value)\n\n      if (this.autoComplete) {\n        this.autoComplete.open = false\n      }\n    }\n  }\n\n  onKeyDown(event: KeyboardEvent) {\n    switch (eventToHotkeyString(event)) {\n      case 'Backspace':\n        this.onBackspace()\n        break\n      case 'Enter':\n      case 'Tab':\n        this.taggifyValueWhenSuggesterHidden(event)\n        break\n      case ',':\n      case 'Space':\n        this.taggifyValue(event)\n        break\n    }\n  }\n\n  // Taggifies the entered value when the suggester is not visible. Called after an Enter\n  // or Tab is entered.\n  taggifyValueWhenSuggesterHidden(event: Event) {\n    if (this.autoComplete && !this.autoComplete.open && this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n    }\n  }\n\n  // Taggifies the entered value if it exists; called after a comma or space is entered.\n  taggifyValue(event: Event) {\n    if (this.input.value) {\n      event.preventDefault()\n      this.selectTag(this.input.value)\n\n      if (this.autoComplete) {\n        this.autoComplete.open = false\n      }\n    }\n  }\n\n  // Add a new tag to the list of selections if it has not already been added.\n  selectTag(text: string) {\n    const tags = this.normalizeTag(text)\n    const selections = this.selectedTags()\n\n    let tagsAdded = false\n    for (let i = 0; i < tags.length; i++) {\n      const tag = tags[i]!\n      if (selections.indexOf(tag) < 0) {\n        this.selections.appendChild(this.templateTag(tag))\n        tagsAdded = true\n      }\n    }\n\n    if (tagsAdded) {\n      this.input.value = ''\n      fire(this.form, 'tags:changed')\n    }\n  }\n\n  // Remove a tag from the list of selections.\n  removeTag(event: Event) {\n    const target = event.target as Element\n    event.preventDefault()\n    const inputTag = target.closest<HTMLElement>('.js-tag-input-tag')!\n    inputTag.remove()\n    fire(this.form, 'tags:changed')\n  }\n\n  // Generate a new tag Node.\n  templateTag(tag: string): Element {\n    const el = this.tagTemplate.cloneNode(true) as Element\n\n    el.querySelector<HTMLInputElement>('input')!.value = tag\n    const tagName = el.querySelector<HTMLElement>('.js-placeholder-tag-name')!\n    tagName.replaceWith(tag)\n    /* eslint-disable-next-line github/no-d-none */\n    el.classList.remove('d-none', 'js-template')\n\n    return el\n  }\n\n  // Sanitize user input to remove invalid tag characters.\n  normalizeTag(text: string): string[] {\n    const sanitizedText = text.toLowerCase().trim()\n\n    if (!sanitizedText) return []\n    if (this.multiTagInput) return sanitizedText.split(/[\\s,']+/)\n\n    return [sanitizedText.replace(/[\\s,']+/g, '-')]\n  }\n\n  // Remove a tag on backspace if the input is empty.\n  onBackspace() {\n    if (!this.input.value) {\n      const lastSelection = this.selections.querySelector('li:last-child .js-remove')\n      if (lastSelection instanceof HTMLElement) lastSelection.click()\n    }\n  }\n\n  // Map matched input content to a suggester query.\n  selectedTags(): string[] {\n    const inputs = this.selections.querySelectorAll<HTMLInputElement>('input')\n    return Array.from(inputs)\n      .map(el => el.value)\n      .filter(value => value.length > 0)\n  }\n}\n\nobserve('.js-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete'),\n      multiTagInput: false,\n    }).setup()\n  },\n})\n\nobserve('.js-multi-tag-input-container', {\n  constructor: HTMLElement,\n  initialize(el) {\n    new TagInput({\n      container: el,\n      inputWrap: el.querySelector<HTMLElement>('.js-tag-input-wrapper')!,\n      input: el.querySelector<HTMLInputElement>('input[type=\"text\"], input:not([type])')!,\n      selections: el.querySelector<HTMLElement>('.js-tag-input-selected-tags')!,\n      tagTemplate: el.querySelector<HTMLElement>('.js-template')!,\n      autoComplete: el.querySelector<AutocompleteElement>('auto-complete'),\n      multiTagInput: true,\n    }).setup()\n  },\n})\n","function supportsUserSelectContain() {\n  const el = document.createElement('div')\n  el.style.cssText = '-ms-user-select: element; user-select: contain;'\n  return (\n    el.style.getPropertyValue('-ms-user-select') === 'element' ||\n    el.style.getPropertyValue('-ms-user-select') === 'contain' ||\n    el.style.getPropertyValue('user-select') === 'contain'\n  )\n}\nfunction handleUserSelectContain(event: Event) {\n  if (!(event.target instanceof Element)) return\n  const currentTarget = event.target.closest('.user-select-contain')\n  if (!currentTarget) return\n\n  const selection = window.getSelection()\n  if (!selection) return\n  if (!selection.rangeCount) return\n  if (!selection.rangeCount || selection.type !== 'Range') return\n\n  const container = selection.getRangeAt(0).commonAncestorContainer\n  if (currentTarget.contains(container)) return\n  selection.selectAllChildren(currentTarget)\n}\n\nif (!supportsUserSelectContain()) {\n  document.addEventListener('click', handleUserSelectContain)\n}\n","export interface BlobOffset {\n  // Line number\n  // Lines start at 1.\n  line: number\n\n  // Optional column number.\n  // Like lines, columns are 1-indexed.\n  column: number | null\n}\n\nexport interface BlobRange {\n  // Starting offset of range.\n  start: BlobOffset\n\n  // End offset of range.\n  // End offset may be the same as the start. This indicates a collapsed range.\n  // Should always be initialized to a value that is equal or greater than the\n  // start range such the range is always in ascending order. Reversed ranges\n  // have undefined behavior.\n  end: BlobOffset\n}\n\n// Inverse of `formatBlobRange`.\n//\n// Examples\n//\n//   parseBlobRange(\"#L3\")\n//   // => {start: {line: 3}}\n//\n//   parseBlobRange(\"L3-L5\")\n//   // => {start: {line: 3}, end: {line: 5}}\n//\n//   parseBlobRange(\"\")\n//   // => null\nexport function parseBlobRange(str: string): BlobRange | undefined {\n  const lines = str.match(/#?(?:L)(\\d+)((?:C)(\\d+))?/g)\n  if (!lines) {\n    return\n  } else if (lines.length === 1) {\n    const offset = parseBlobOffset(lines[0])\n    if (!offset) return\n    return Object.freeze({start: offset, end: offset})\n  } else if (lines.length === 2) {\n    const startOffset = parseBlobOffset(lines[0])\n    const endOffset = parseBlobOffset(lines[1]!)\n    if (!startOffset || !endOffset) return\n\n    return ascendingBlobRange(\n      Object.freeze({\n        start: startOffset,\n        end: endOffset,\n      }),\n    )\n  } else {\n    return\n  }\n}\n\n// Inverse of `parseBlobRange`.\n//\n// Examples\n//\n//   formatBlobRange({start: {line: 3}})\n//   // => \"L3\"\n//\n//   formatBlobRange({start: {line: 3}, end: {line: 5}})\n//   // => \"L3-L5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5, column: 5}})\n//   // => \"L3C1-L5C5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5,}})\n//   // => \"L3C1-L5\"\nexport function formatBlobRange(blobRange: BlobRange): string {\n  const {start, end} = ascendingBlobRange(blobRange)\n\n  if (start.column != null && end.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}C${end.column}`\n  } else if (start.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}`\n  } else if (end.column != null) {\n    return `L${start.line}-L${end.line}C${end.column}`\n  } else if (start.line === end.line) {\n    return `L${start.line}`\n  } else {\n    return `L${start.line}-L${end.line}`\n  }\n}\n\n// Returns a String containing the file prefix with trailing dash.\n//\n// Examples\n//\n//   parseAnchorPrefix(\"#file-zshrc-L3\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"file-zshrc-L3-L5\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"\")\n//   // => \"\"\nfunction parseAnchorPrefix(str: string): string {\n  const match = str.length < 5000 && str.match(/(file-.+?-)L\\d+?/i)\n  return match ? match[1]! : ''\n}\n\nexport type AnchorInfo = {\n  blobRange: BlobRange\n  anchorPrefix: string\n}\n\n// Examples\n//\n//   parseFileAnchor(\"#file-zshrc-L3\")\n//   // => { blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"file-zshrc-L3-L5\")\n//   // => { blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"\")\n//   // => { blobRange: null, anchorPrefix: undefined }\nexport function parseFileAnchor(str: string): AnchorInfo {\n  const blobRange = parseBlobRange(str)!\n  const anchorPrefix = parseAnchorPrefix(str)\n  return {blobRange, anchorPrefix}\n}\n\n// Formats line number range pair as an anchor String.\n//\n// Examples\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"\"})\n//   // => \"#L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3, column: 1}, end: {line: 5, column: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3C1-L5C5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"\"})\n//   // => \"#\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#\"\nexport function formatBlobRangeAnchor({anchorPrefix, blobRange}: AnchorInfo): string {\n  if (!blobRange) return '#'\n  return `#${anchorPrefix}${formatBlobRange(blobRange)}`\n}\n\nfunction parseBlobOffset(str: string): BlobOffset | null {\n  const lineMatch = str.match(/L(\\d+)/)\n  const columnMatch = str.match(/C(\\d+)/)\n  if (lineMatch) {\n    return Object.freeze({\n      line: parseInt(lineMatch[1]!),\n      column: columnMatch ? parseInt(columnMatch[1]!) : null,\n    })\n  } else {\n    return null\n  }\n}\n\nexport function DOMRangeFromBlob(\n  blobRange: BlobRange,\n  getLineElement: (line: number) => Node | null,\n): Range | undefined {\n  const [startContainer, _startOffset] = findRangeOffset(blobRange.start, true, getLineElement)\n  const [endContainer, _endOffset] = findRangeOffset(blobRange.end, false, getLineElement)\n  if (!startContainer || !endContainer) return\n\n  // Treat -1 as full line selection\n  let startOffset = _startOffset\n  let endOffset = _endOffset\n  if (startOffset === -1) startOffset = 0\n  if (endOffset === -1) endOffset = endContainer.childNodes.length\n  if (!startContainer.ownerDocument) throw new Error(`DOMRange needs to be inside document`)\n\n  const range = startContainer.ownerDocument.createRange()\n  range.setStart(startContainer, startOffset)\n  range.setEnd(endContainer, endOffset)\n  return range\n}\n\nfunction findRangeOffset(\n  offset: BlobOffset,\n  lookAhead: boolean,\n  getLineElement: (n: number) => Node | null,\n): [Node | null, number] {\n  const error: [null, number] = [null, 0]\n\n  const lineElement = getLineElement(offset.line)\n  if (!lineElement) return error\n\n  if (offset.column == null) {\n    return [lineElement, -1]\n  }\n\n  let column = offset.column - 1\n\n  const textNodes = getAllTextNodes(lineElement)\n  for (let i = 0; i < textNodes.length; i++) {\n    const textNode = textNodes[i]!\n\n    // TODO: length might be buggy with emoji\n    const nextC = column - (textNode.textContent || '').length\n\n    if (nextC === 0) {\n      const nextTextNode = textNodes[i + 1]\n      if (lookAhead && nextTextNode) {\n        return [nextTextNode, 0]\n      } else {\n        return [textNode, column]\n      }\n    } else if (nextC < 0) {\n      return [textNode, column]\n    }\n\n    column = nextC\n  }\n\n  return error\n}\n\n// Get a flat list of text nodes in depth first order.\nfunction getAllTextNodes(el: Node): Node[] {\n  if (el.nodeType === Node.TEXT_NODE) {\n    return [el]\n  }\n  if (!el.childNodes || !el.childNodes.length) return []\n  let list: Node[] = []\n  for (const node of el.childNodes) {\n    list = list.concat(getAllTextNodes(node))\n  }\n  return list\n}\n\n// Sorts range start and end offsets to be in ascending order.\nfunction ascendingBlobRange(range: BlobRange): BlobRange {\n  const offsets = [range.start, range.end]\n  offsets.sort(compareBlobOffsets)\n\n  if (offsets[0] === range.start && offsets[1] === range.end) {\n    return range\n  } else {\n    return Object.freeze({\n      start: offsets[0]!,\n      end: offsets[1]!,\n    })\n  }\n}\n\n// Compare line offsets. May be used with Array.sort\nfunction compareBlobOffsets(a: BlobOffset, b: BlobOffset): number {\n  if (a.line === b.line && a.column === b.column) {\n    return 0\n  } else if (a.line === b.line && typeof a.column === 'number' && typeof b.column === 'number') {\n    return a.column - b.column\n  } else {\n    return a.line - b.line\n  }\n}\n","import type {CodeEditor} from './editor/code-editor'\n// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\n\nconst codeEditors: WeakMap<HTMLElement, CodeEditor> = new WeakMap()\n\nexport function getCodeEditor(el: HTMLElement): CodeEditor | undefined {\n  return codeEditors.get(el)\n}\n\nexport async function getAsyncCodeEditor(el: HTMLElement): Promise<CodeEditor> {\n  return codeEditors.get(el) || onEditorFromEvent(await nextEvent(el, 'codeEditor:ready'))\n}\n\nfunction onEditorFromEvent(event: Event): CodeEditor {\n  if (!(event instanceof CustomEvent)) throw new Error('assert: event is not a CustomEvent')\n  const editor: CodeEditor = event.detail.editor\n  if (!event.target) throw new Error('assert: event.target is null')\n  codeEditors.set(event.target as HTMLElement, editor)\n  return editor\n}\n\non('codeEditor:ready', '.js-code-editor', onEditorFromEvent)\n\nfunction nextEvent(target: EventTarget, event: string): Promise<Event> {\n  return new Promise(resolve => {\n    target.addEventListener(event, resolve, {once: true})\n  })\n}\n","import {score as fuzzyScore, hasMatch, positions} from 'fzy.js'\n\nconst getScore = (value: string, text: string, minScore: number) => {\n  if (!hasMatch(value, text)) return -Infinity\n  const score = fuzzyScore(value, text)\n  if (score < minScore) return -Infinity\n  return score\n}\nconst highlightElement = (node: HTMLElement, value: string, text: string) => {\n  node.textContent = ''\n\n  let lastPosition = 0\n  for (const i of positions(value, text)) {\n    const slice = text.slice(lastPosition, i)\n    if (slice !== '') {\n      node.appendChild(document.createTextNode(text.slice(lastPosition, i)))\n    }\n    lastPosition = i + 1\n    const mark = document.createElement('mark')\n    mark.textContent = text[i]!\n    node.appendChild(mark)\n  }\n\n  node.appendChild(document.createTextNode(text.slice(lastPosition)))\n}\n\ninterface sortAbort {\n  aborted: boolean\n}\nconst sorting: WeakMap<FuzzyListElement, sortAbort> = new WeakMap()\n\ntype FuzzyListLazyRenderCallback = (text: string) => Node\ninterface state {\n  timer: number | null\n  handler: MutationObserver\n  items: Set<Node>\n  lazyItems: Map<string, FuzzyListLazyRenderCallback>\n}\nconst states: WeakMap<FuzzyListElement, state> = new WeakMap()\n\nconst textCache: WeakMap<Node, string> = new WeakMap()\nconst getTextCache = (item: Node) => {\n  if (!textCache.has(item) && item instanceof HTMLElement) {\n    const value = (item.getAttribute('data-value') || item.textContent || '').trim()\n    textCache.set(item, value)\n    return value\n  }\n  return textCache.get(item) || ''\n}\n\nclass FuzzyListElement extends HTMLElement {\n  connectedCallback() {\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const items = new Set(list.querySelectorAll('li'))\n\n    /* eslint-disable-next-line custom-elements/no-dom-traversal-in-connectedcallback */\n    const inputEl = this.querySelector('input')\n    if (inputEl instanceof HTMLInputElement) {\n      inputEl.addEventListener('input', () => {\n        this.value = inputEl.value\n      })\n    }\n\n    const handler = new MutationObserver(mutations => {\n      let update = false\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList' && mutation.addedNodes.length) {\n          for (const item of mutation.addedNodes) {\n            if (item instanceof HTMLLIElement && !items.has(item)) {\n              const text = getTextCache(item)\n              update = update || hasMatch(this.value, text)\n              items.add(item)\n            }\n          }\n        }\n      }\n      if (update) this.sort()\n    })\n    handler.observe(list, {childList: true})\n\n    const state = {handler, items, lazyItems: new Map(), timer: null}\n    states.set(this, state)\n  }\n\n  disconnectedCallback() {\n    const state = states.get(this)\n    if (state) {\n      state.handler.disconnect()\n      states.delete(this)\n    }\n  }\n\n  addLazyItems(dataset: string[], render: FuzzyListLazyRenderCallback) {\n    const state = states.get(this)\n    if (!state) return\n    const {lazyItems} = state\n    const {value} = this\n    let update = false\n    for (const item of dataset) {\n      lazyItems.set(item, render)\n      update = update || (Boolean(value) && hasMatch(value, item))\n    }\n    if (update) this.sort()\n  }\n\n  sort() {\n    const oldSortAbort = sorting.get(this)\n    if (oldSortAbort) oldSortAbort.aborted = true\n    const sortAbort = {aborted: false}\n    sorting.set(this, sortAbort)\n    const {minScore, markSelector, maxMatches, value} = this\n    const state = states.get(this)\n    if (!state) return\n    if (!this.dispatchEvent(new CustomEvent('fuzzy-list-will-sort', {cancelable: true, detail: value}))) return\n    const {items, lazyItems} = state\n    const shouldMark = this.hasAttribute('mark-selector')\n\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    const itemsToRender: Array<\n      {render: FuzzyListLazyRenderCallback; text: string; score: number} | {item: Node; score: number}\n    > = []\n\n    if (value) {\n      for (const item of items) {\n        const text = getTextCache(item)\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({item, score})\n      }\n      for (const [text, render] of lazyItems) {\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({text, render, score})\n      }\n      itemsToRender.sort((a, b) => b.score - a.score).splice(maxMatches)\n    } else {\n      let i = itemsToRender.length\n      for (const item of items) {\n        if (i >= maxMatches) break\n        itemsToRender.push({item, score: 1})\n        i += 1\n      }\n      for (const [text, render] of lazyItems) {\n        if (i >= maxMatches) break\n        itemsToRender.push({text, render, score: 1})\n        i += 1\n      }\n    }\n\n    requestAnimationFrame(() => {\n      if (sortAbort.aborted) return\n\n      // Store a reference to the checked input (if there is one) as when we\n      // append other (stale) items they could be checked, and we want to keep\n      // the originally checked item as the only checked item\n      const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n\n      list.textContent = ''\n      let offset = 0\n\n      const nextBatch = () => {\n        if (sortAbort.aborted) return\n        const end = Math.min(itemsToRender.length, offset + 100)\n        const fragment = document.createDocumentFragment()\n        for (let i = offset; i < end; i += 1) {\n          const itemToRender = itemsToRender[i]!\n          let item = null\n          if ('render' in itemToRender && 'text' in itemToRender) {\n            const {render, text} = itemToRender\n            item = render(text)\n            items.add(item)\n            textCache.set(item, text)\n            lazyItems.delete(text)\n          } else if ('item' in itemToRender) {\n            item = itemToRender.item\n          }\n          if (item instanceof HTMLElement) {\n            if (shouldMark) {\n              highlightElement(\n                markSelector ? item.querySelector(markSelector) || item : item,\n                shouldMark ? value : '',\n                getTextCache(item),\n              )\n            }\n            fragment.appendChild(item)\n          }\n        }\n        offset = end\n\n        // Loop through all items that are about to be rendered - if there are\n        // any radios that are checked that conflict with the one checked item,\n        // then reset them to unchecked state\n        let inputStateReset = false\n        if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n          for (const checkedInput of fragment.querySelectorAll('input[type=\"radio\"]:checked')) {\n            if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n              checkedInput.checked = false\n              inputStateReset = true\n            }\n          }\n        }\n\n        if (this.getAttribute('data-tab-only-first')) {\n          // Only make first button tabbable, others are navigable by arrow keys\n          // https://github.com/github/accessibility-audits/issues/6591\n          const buttons = this.querySelectorAll('button.js-emoji-button')\n          for (const button of buttons) {\n            button.setAttribute('tabindex', '-1')\n          }\n          buttons.item(0)?.setAttribute('tabindex', '0')\n        } else {\n          // Make sure that the fragments we're appending are accessible by 'tab'\n          for (const button of fragment.querySelectorAll('button[tabindex=\"-1\"]')) {\n            button.setAttribute('tabindex', '0')\n          }\n        }\n\n        list.appendChild(fragment)\n\n        // If any checked items were changed then a change event should be\n        // fired to let other observers know\n        if (checkedInputBeforeFilter && inputStateReset) {\n          checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n        }\n\n        if (end < itemsToRender.length) {\n          requestAnimationFrame(nextBatch)\n        } else {\n          list.hidden = itemsToRender.length === 0\n          const emptyEl = this.querySelector<HTMLElement>('[data-fuzzy-list-show-on-empty]')\n          if (emptyEl) {\n            emptyEl.hidden = itemsToRender.length > 0\n          }\n\n          this.dispatchEvent(new CustomEvent('fuzzy-list-sorted', {detail: itemsToRender.length}))\n        }\n      }\n\n      nextBatch()\n    })\n  }\n\n  get value(): string {\n    return this.getAttribute('value') || ''\n  }\n\n  set value(value: string) {\n    this.setAttribute('value', value)\n  }\n\n  get markSelector(): string {\n    return this.getAttribute('mark-selector') || ''\n  }\n\n  set markSelector(value: string) {\n    if (value) {\n      this.setAttribute('mark-selector', value)\n    } else {\n      this.removeAttribute('mark-selector')\n    }\n  }\n\n  get minScore(): number {\n    return Number(this.getAttribute('min-score') || 0)\n  }\n\n  set minScore(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('min-score', String(value))\n  }\n\n  get maxMatches(): number {\n    return Number(this.getAttribute('max-matches') || Infinity)\n  }\n\n  set maxMatches(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('max-matches', String(value))\n  }\n\n  get ariaLiveElement(): HTMLElement | undefined {\n    const targetId = this.getAttribute('data-aria-live-element')\n    if (!targetId) return\n\n    const element = document.getElementById(targetId)\n    if (!element) return\n\n    return element\n  }\n\n  static get observedAttributes(): string[] {\n    return ['value', 'mark-selector', 'min-score', 'max-matches']\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return\n    const state = states.get(this)\n    if (!state) return\n    if (state.timer) window.clearTimeout(state.timer)\n    state.timer = window.setTimeout(() => this.sort(), 100)\n  }\n}\n\nexport default FuzzyListElement\n\nif (!window.customElements.get('fuzzy-list')) {\n  window.FuzzyListElement = FuzzyListElement\n  window.customElements.define('fuzzy-list', FuzzyListElement)\n}\n\ndeclare global {\n  interface Window {\n    FuzzyListElement: typeof FuzzyListElement\n  }\n}\n","import {sendStats} from '@github-ui/stats'\n\nexport function sendData(hydroEventPayload: string, hydroEventHmac: string, hydroClientContext: string): void {\n  const data = {\n    hydroEventPayload,\n    hydroEventHmac,\n    visitorPayload: '',\n    visitorHmac: '',\n    hydroClientContext,\n  }\n\n  const visitorPayload = document.querySelector('meta[name=visitor-payload]')\n  if (visitorPayload instanceof HTMLMetaElement) {\n    data['visitorPayload'] = visitorPayload.content\n  }\n  const visitorHmac = document.querySelector('meta[name=visitor-hmac]') || ''\n  if (visitorHmac instanceof HTMLMetaElement) {\n    data['visitorHmac'] = visitorHmac.content\n  }\n\n  sendStats(data, true)\n}\n\nexport function trackView(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-view') || ''\n  const hmac = el.getAttribute('data-hydro-view-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n\nexport function sendHydroEvent(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-click-payload') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n","import {getItem, removeItem, setItem} from '@github-ui/safe-storage/session-storage'\n\ntype ShelfReferrerParams = {\n  notification_referrer_id?: string\n  notifications_before?: string\n  notifications_after?: string\n  notifications_query?: string\n}\n\nconst shelfParams: Array<keyof ShelfReferrerParams> = [\n  'notification_referrer_id',\n  'notifications_before',\n  'notifications_after',\n  'notifications_query',\n]\n\nconst sessionStorageKey = 'notification_shelf'\n\n/*\n * Stores url params for the shelf in session storage if present, and returns\n * search params without any shelf params.\n */\nexport function storeAndStripShelfParams(\n  searchParams: URLSearchParams,\n  pathname: string | null = null,\n): URLSearchParams | null {\n  if (searchParams.has('notification_referrer_id')) {\n    storeShelfParams(searchParams, pathname)\n    return deleteShelfParams(searchParams)\n  }\n  return null\n}\n\n/*\n * Loads the shelf params from sessionStorage if they are there and they match\n * the current pull request page, clear them otherwise.\n */\nexport function getStoredShelfParamsForCurrentPage(pathname: string | null = null): ShelfReferrerParams | null {\n  // If the current page is not a pull request, then the stored data will\n  // not match, so clear it and move on.\n  const currentPullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!currentPullRequestPathname) {\n    removeItem(sessionStorageKey)\n    return null\n  }\n\n  try {\n    const str = getItem(sessionStorageKey)\n    if (!str) return null\n\n    const stored = JSON.parse(str)\n    if (!stored || !stored.pathname) throw new Error('Must have a pathname')\n\n    if (stored.pathname !== currentPullRequestPathname) {\n      throw new Error('Stored pathname does not match current pathname.')\n    }\n\n    const result: ShelfReferrerParams = {}\n\n    for (const key of shelfParams) {\n      result[key] = stored[key]\n    }\n\n    return result\n  } catch {\n    removeItem(sessionStorageKey)\n    return null\n  }\n}\n\nfunction storeShelfParams(searchParams: URLSearchParams, pathname: string | null) {\n  const pullRequestPathname = getCurrentPullRequestPathname(pathname)\n  if (!pullRequestPathname) return\n\n  const params: {[key: string]: string} = {\n    pathname: pullRequestPathname,\n  }\n\n  for (const key of shelfParams) {\n    const value = searchParams.get(key)\n    if (value) params[key] = value\n  }\n\n  setItem(sessionStorageKey, JSON.stringify(params))\n}\n\nfunction deleteShelfParams(searchParams: URLSearchParams): URLSearchParams {\n  for (const key of shelfParams) {\n    searchParams.delete(key)\n  }\n  return searchParams\n}\n\n/*\n * Returns the base pathname of the current page if it's a pull request.\n *\n * `/github/github/pull/123/files` -> `/github/github/pull/123`\n */\nfunction getCurrentPullRequestPathname(pathname: string | null): string | null {\n  pathname = pathname || window.location.pathname\n  const pullRequestPathnameRegex = /^(\\/[^/]+\\/[^/]+\\/pull\\/[^/]+)/\n  const match = pathname.match(pullRequestPathnameRegex)\n  if (!match) return null\n\n  return match[0]\n}\n","/*\n * Applies state updates from a form (e.g. Mark as read/archive/unsubscribe/star) to the element\n * that represents the notification (e.g. The notification item in the list view, or the\n * notification shelf on an Issue page).\n */\nexport function updateNotificationStates(element: HTMLElement, form: HTMLFormElement) {\n  const notification = element.closest<HTMLElement>('[data-notification-id]')!\n\n  // Toggles read/unread/archive status\n  if (form.hasAttribute('data-status')) {\n    toggleNotificationStatus(notification, form.getAttribute('data-status')!)\n  }\n\n  // Toggles subscribed/unsubscribed status\n  if (form.hasAttribute('data-subscription-status')) {\n    toggleNotificationSubscriptionStatus(notification, form.getAttribute('data-subscription-status')!)\n  }\n\n  // Toggles starred/unstarred status\n  if (form.hasAttribute('data-starred-status')) {\n    toggleNotificationStarredStatus(notification, form.getAttribute('data-starred-status')!)\n  }\n}\n\nfunction toggleNotificationStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-archived', status === 'archived')\n  notification.classList.toggle('notification-unread', status === 'unread')\n  notification.classList.toggle('notification-read', status === 'read')\n}\n\nfunction toggleNotificationSubscriptionStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-unsubscribed', status === 'unsubscribed')\n}\n\nfunction toggleNotificationStarredStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-starred', status === 'starred')\n}\n","// More robust version of Range.surroundContents().\nexport function surroundContents(range: Range, newNode: Node) {\n  newNode.appendChild(range.extractContents())\n  range.insertNode(newNode)\n}\n","// Gets the current page's id for persisting fields.\n//\n// The value can be overridden by providing a normalized value in a meta tag.\n//\n//   <meta name=\"session-resume-id\" content=\"/github/github/issues/123\">.\n//\n// Defaults to the current url path.\nexport function getPageID(url?: URL): string {\n  const location = url || window.location\n\n  const metaTag = document.head && document.head.querySelector('meta[name=session-resume-id]')\n  const id = metaTag instanceof HTMLMetaElement && metaTag.content\n\n  return id || location.pathname\n}\n","import {TemplateInstance} from '@github/template-parts'\n// eslint-disable-next-line no-restricted-imports\nimport {observe} from '@github/selector-observer'\n\nconst POLL_WAIT_TIME_MS = 3000\nconst flashClassName = `github-mobile-auth-flash`\n\nfunction addFlashMessage(message: string): void {\n  const template = new TemplateInstance(document.querySelector<HTMLTemplateElement>('template.js-flash-template')!, {\n    className: `flash-error ${flashClassName}`,\n    message,\n  })\n  const node = document.importNode(template, true)\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    removeFlash()\n    flashContainer.appendChild(node)\n  }\n}\n\nfunction removeFlash(): void {\n  const flashContainer = document.querySelector<HTMLElement>('#js-flash-container')\n  // make sure we are on a page that has a flash container\n  if (flashContainer) {\n    // make sure we don't show more than one flash message for github mobile auth at the same time\n    for (const child of flashContainer.children) {\n      if (!child.classList.contains('js-flash-template') && child.classList.contains(flashClassName)) {\n        flashContainer.removeChild(child)\n      }\n    }\n  }\n}\n\nexport function hidePromptAndShowErrorMessage(): void {\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = true\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = false\n  }\n}\n\nexport function resetPrompt(): void {\n  removeFlash()\n  const githubMobileAuthenticatePrompt = document.getElementById('github-mobile-authenticate-prompt')\n  if (githubMobileAuthenticatePrompt) {\n    githubMobileAuthenticatePrompt.hidden = false\n  }\n  const githubMobileAuthenticateErrorAndRetry = document.getElementById('github-mobile-authenticate-error-and-retry')\n  if (githubMobileAuthenticateErrorAndRetry) {\n    githubMobileAuthenticateErrorAndRetry.hidden = true\n  }\n}\n\n// the user has approved the mobile request - reload the page which will trigger the redirects\n//\n// token - An optional parameter - only used during the password reset flow\nfunction approvedHandler(token?: string): void {\n  let url\n  if (token) {\n    // during password reset, when the user approves the mobile request, we need to update the url\n    // to use the new SAT token instead of the old SAT token\n    url = new URL(`password_reset/${encodeURIComponent(token)}`, window.location.origin)\n  } else {\n    url = new URL('', window.location.href)\n  }\n\n  url.searchParams.set('redirect', 'true')\n  window.location.assign(url)\n}\n\n// two_factor_login info erased from session - send them back to login form\nfunction rejectedHandler(): void {\n  document.getElementById('github-mobile-rejected-redirect')!.click()\n}\n\nfunction genericHandler(message: string): void {\n  if (message) {\n    addFlashMessage(message)\n  }\n  hidePromptAndShowErrorMessage()\n}\n\nfunction getErrorAndRetryMessage(attributeName: string): string {\n  return document.getElementById('github-mobile-authenticate-error-and-retry')!.getAttribute(attributeName)!\n}\n\nfunction pollMobileAuthRequestStatus(\n  url: RequestInfo,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  return (async function poll(errorCount: number): Promise<void> {\n    if (checkCancelCallback && checkCancelCallback()) {\n      return\n    }\n\n    let status = 'STATUS_UNKNOWN'\n    let token\n    try {\n      const form = document.getElementById('github-mobile-authenticate-form') as HTMLFormElement\n      const csrfInput = form.querySelector('.js-data-url-csrf') as HTMLInputElement\n      const response = await self.fetch(\n        new Request(url, {\n          method: 'POST',\n          body: new FormData(form),\n          mode: 'same-origin',\n          headers: {\n            Accept: 'application/json',\n            'Scoped-CSRF-Token': csrfInput.value,\n            'X-Requested-With': 'XMLHttpRequest',\n          },\n        }),\n      )\n      if (response.ok) {\n        const responseJSON = await response.json()\n        status = responseJSON.status\n        token = responseJSON.token\n      } else {\n        status = 'STATUS_ERROR'\n      }\n    } catch {\n      status = 'STATUS_ERROR'\n    }\n\n    let message\n\n    switch (status) {\n      case 'STATUS_APPROVED':\n        // stop polling and handle approved case specifically\n        return successCallback ? successCallback() : approvedHandler(token)\n      case 'STATUS_EXPIRED':\n        // stop polling and handle expired case specifically\n        message = getErrorAndRetryMessage('timeout-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n      case 'STATUS_ACTIVE':\n      case 'STATUS_ERROR':\n      case 'STATUS_UNKNOWN':\n        // keep polling\n        break\n      case 'STATUS_REJECTED':\n        // stop polling and handle rejected case specifically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : rejectedHandler()\n      case 'STATUS_NOT_FOUND': // not expected, we shouldn't reach the poller if this is the case\n      case 'STATUS_UNSUPPORTED': // not expected, we shouldn't reach the poller if this is the case\n      default:\n        // stop polling and handle these cases generically\n        message = getErrorAndRetryMessage('error-flash')\n        return failCallback ? failCallback(message) : genericHandler(message)\n    }\n\n    // wait between polls\n    await new Promise(resolve => setTimeout(resolve, POLL_WAIT_TIME_MS))\n    poll(errorCount)\n  })(0)\n}\n\nexport async function initializeMobileAuthRequestStatusPoll(\n  el: Element,\n  successCallback?: () => void,\n  failCallback?: (message: string) => void,\n  checkCancelCallback?: () => boolean,\n): Promise<void> {\n  try {\n    await pollMobileAuthRequestStatus(\n      el.getAttribute('data-poll-url')!,\n      successCallback,\n      failCallback,\n      checkCancelCallback,\n    )\n  } catch {\n    // if an error was thrown that we didn't handle properly in the poller\n    // we need to make sure to still update the UI in a meaningful way\n    const message = getErrorAndRetryMessage('error-flash')\n    return genericHandler(message)\n  }\n}\n\nobserve('.js-poll-github-mobile-two-factor-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-verified-device-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n\nobserve('.js-poll-github-mobile-two-factor-password-reset-authenticate', function (el) {\n  initializeMobileAuthRequestStatusPoll(el)\n})\n","// eslint-disable-next-line no-restricted-imports\nimport {on} from 'delegated-events'\nimport {onInput} from '@github-ui/onfocus'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '@github-ui/form-utils'\n\nexport function smsSending() {\n  document.body.classList.add('is-sending')\n  document.body.classList.remove('is-sent', 'is-not-sent')\n}\n\nexport function smsSuccess() {\n  document.body.classList.add('is-sent')\n  document.body.classList.remove('is-sending')\n}\n\nfunction smsError(message: string) {\n  if (message) {\n    document.querySelector<HTMLElement>('.js-sms-error')!.textContent = message\n  }\n  document.body.classList.add('is-not-sent')\n  document.body.classList.remove('is-sending')\n}\n\nremoteForm('.js-send-auth-code', async (form, wants) => {\n  smsSending()\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    smsError(error.response.text)\n  }\n  if (response) {\n    smsSuccess()\n  }\n})\n\nremoteForm('.js-two-factor-set-sms-fallback', async (form, wants) => {\n  let response\n  try {\n    response = await wants.text()\n  } catch (error) {\n    const pane1 = form.querySelector<HTMLElement>('.js-configure-sms-fallback')!\n    const pane2 = form.querySelector<HTMLElement>('.js-verify-sms-fallback')!\n    const pane = pane1.hidden ? pane2 : pane1\n    const flash = pane.querySelector<HTMLElement>('.flash')!\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 404:\n      case 422:\n      case 429:\n        // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n        flash.textContent = JSON.parse(error.response.text).error\n        flash.hidden = false\n    }\n  }\n  if (response) {\n    switch (response.status) {\n      case 200:\n      case 201:\n        window.location.reload()\n        break\n      case 202:\n        form.querySelector<HTMLElement>('.js-configure-sms-fallback')!.hidden = true\n        form.querySelector<HTMLElement>('.js-verify-sms-fallback')!.hidden = false\n        form.querySelector<HTMLElement>('.js-fallback-otp')!.focus()\n        break\n    }\n  }\n})\n\nonInput('.js-verification-code-input-auto-submit', function (event: Event) {\n  const target = event.currentTarget as HTMLInputElement\n  const pattern = target.pattern || '[0-9]{6}'\n  if (new RegExp(`^(${pattern})$`).test(target.value)) {\n    requestSubmit(target.form!)\n  }\n})\n\non('click', '.js-toggle-redacted-note-content', async event => {\n  const currentButton = event.currentTarget as HTMLButtonElement\n  const noteContainer = currentButton.closest('.note')!\n  if (noteContainer) {\n    const note = noteContainer.getElementsByClassName('js-note')[0]\n    if (note) {\n      const newContent = currentButton.getAttribute('data-content')!.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n      note.innerHTML = newContent\n    }\n  }\n\n  const toggleElements = noteContainer.getElementsByClassName('js-toggle-redacted-note-content')\n  for (const elem of toggleElements) {\n    const button = elem as HTMLButtonElement\n    button.hidden = !button.hidden\n  }\n})\n","type TextField = HTMLInputElement | HTMLTextAreaElement\n\n/**\n * Throttled Input event.\n *\n * Delays firing `input` event until user is done typing.\n *\n * Details.\n *\n * Never fires while a key is down, waits for the next keyup.\n *   NOTE: Native OSX text fields won't repeat keys. FF will repeat key while held down.\n *\n * Never fires for selection changes (pressing left or right keys to move the cursor).\n */\n\nconst throttledInputEvents: WeakMap<\n  HTMLElement,\n  {\n    keypressed: boolean\n    inputed: boolean\n    timer: number | null | undefined\n    listener: ThrottledHandler\n    wait: number\n  }\n> = new WeakMap()\n\nfunction schedule(element: TextField) {\n  const events = throttledInputEvents.get(element)\n  if (!events) return\n  if (events.timer != null) clearTimeout(events.timer)\n\n  events.timer = window.setTimeout(() => {\n    if (events.timer != null) events.timer = null\n    events.inputed = false\n    events.listener.call(null, element)\n  }, events.wait)\n}\n\nfunction onKeydownInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = true\n  if (events.timer != null) {\n    clearTimeout(events.timer)\n  }\n}\n\nfunction onKeyupInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = false\n  if (events.inputed) {\n    schedule(currentTarget)\n  }\n}\n\nfunction onInputInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.inputed = true\n  if (!events.keypressed) {\n    schedule(currentTarget)\n  }\n}\n\ntype ThrottledHandler = (arg0: TextField) => unknown\n\nexport function addThrottledInputEventListener(\n  target: TextField,\n  listener: ThrottledHandler,\n  options: {wait: number | null} = {wait: null},\n) {\n  throttledInputEvents.set(target, {\n    keypressed: false,\n    inputed: false,\n    timer: undefined,\n    listener,\n    wait: options.wait != null ? options.wait : 100,\n  })\n\n  target.addEventListener('keydown', onKeydownInput)\n  target.addEventListener('keyup', onKeyupInput)\n  target.addEventListener('input', onInputInput)\n}\n\nexport function removeThrottledInputEventListener(target: TextField, listener: ThrottledHandler) {\n  target.removeEventListener('keydown', onKeydownInput)\n  target.removeEventListener('keyup', onKeyupInput)\n  target.removeEventListener('input', onInputInput)\n\n  const events = throttledInputEvents.get(target)\n  if (events) {\n    if (events.timer != null && events.listener === listener) {\n      clearTimeout(events.timer)\n    }\n    throttledInputEvents.delete(target)\n  }\n}\n\nexport function dispatchThrottledInputEvent(target: TextField) {\n  const events = throttledInputEvents.get(target)\n  if (events) events.listener.call(null, target)\n}\n","import type {updateContent} from '@github-ui/updatable-content'\n\nexport class BatchedUpdatableContent {\n  intervals: {\n    [key: number]: {\n      interval: ReturnType<typeof setTimeout> | null\n      targets: Set<HTMLElement>\n    }\n  } = {}\n\n  // Append each websocket update to the batch.\n  onEvent(target: HTMLElement, windowSize: number, updaterFunction: typeof updateContent) {\n    let config = this.intervals[windowSize]\n\n    if (!config) {\n      config = this.intervals[windowSize] = {\n        interval: null,\n        targets: new Set(),\n      }\n    }\n\n    config.targets.add(target)\n\n    // Early return if we've already started.\n    if (config.interval) return\n\n    const fn = () => this.onInterval(windowSize, updaterFunction)\n\n    // Start the interval loop if it hasn't been started yet.\n    config.interval = setInterval(fn, windowSize)\n  }\n\n  // Function run on the interval run.\n  onInterval = (windowSize: number, updaterFunction: typeof updateContent) => {\n    // Move the reference.\n    const config = this.intervals[windowSize]\n\n    if (!config) return\n\n    const targets = config.targets\n\n    if (targets.size === 0) return\n\n    // Clear the set so new messages can be batched up for the next iteration.\n    config.targets = new Set()\n\n    // Dispatch all queued updates.\n    for (const target of targets) {\n      // Only execute if we're attached to the DOM.\n      if (document.body.contains(target)) {\n        updaterFunction(target)\n      }\n    }\n\n    // Clear references.\n    targets.clear()\n  }\n\n  // Clear the buffer so that intervals are not run after turbolinks navigations.\n  clear = () => {\n    for (const key in this.intervals) {\n      if (Object.prototype.hasOwnProperty.call(this.intervals, key)) {\n        const config = this.intervals[key]\n        if (config) {\n          // Stop the interval.\n          if (config.interval) {\n            clearInterval(config.interval)\n            config.interval = null\n          }\n\n          config.targets.clear()\n        }\n      }\n    }\n  }\n}\n","import {updateContent} from '@github-ui/updatable-content'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\nimport {SOFT_NAV_STATE} from '@github-ui/soft-nav/states'\nimport {BatchedUpdatableContent} from './updatable-content-batcher'\n\nconst MINIMUM_INTERVAL = 1000\n\nconst batcher = new BatchedUpdatableContent()\n\nssrSafeWindow?.addEventListener(SOFT_NAV_STATE.END, batcher.clear)\n\nexport function makeSocketMessageHandler(updaterFunction: typeof updateContent = updateContent) {\n  return function handleSocketMessage(event: Event) {\n    const {gid, wait, event_updates} = (event as CustomEvent).detail.data\n    const container = event.target as HTMLElement\n    const target = gid ? findByGid(container, gid) : container\n\n    /**\n     * TODO: Ideally we'd have a better unique identifier to use to enable better scheduling. We'd have to introduce\n     * a DOM attribute to give a unique identifier.\n     */\n    if (target) {\n      const batched = target.getAttribute('data-batched')\n\n      const eventName = target.getAttribute('data-channel-event-name')\n      if (eventName) {\n        // If the event name is not in the event updates, we don't need to update the content.\n        if (event_updates === undefined || !event_updates.hasOwnProperty(eventName)) {\n          return\n        }\n      }\n\n      if (batched) {\n        const windowSize = Math.max(parseInt(batched) || 0, MINIMUM_INTERVAL)\n        batcher.onEvent(target, windowSize, updaterFunction)\n      } else {\n        setTimeout(updaterFunction, wait || 0, target)\n      }\n    }\n  }\n}\n\nfunction findByGid(root: HTMLElement, gid: string): HTMLElement | null {\n  if (root.getAttribute('data-gid') === gid) return root\n  for (const el of root.querySelectorAll<HTMLElement>(`[data-url][data-gid]`)) {\n    if (el.getAttribute('data-gid') === gid) {\n      return el\n    }\n  }\n  return null\n}\n","import type {AliveEvent, MetadataUpdate, Notifier, Subscription} from '@github/alive-client'\nimport {PresenceMetadataSet, SubscriptionSet, isPresenceChannel} from '@github/alive-client'\nimport {AliveSession} from './session'\nimport {debounce} from '@github/mini-throttle'\nimport {ready} from '@github-ui/document-ready'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isSafari} from '@braintree/browser-detection'\n\nexport interface Dispatchable {\n  dispatchEvent: (e: Event) => unknown\n}\n\nfunction isSharedWorkerSupported(): boolean {\n  // There is currently a bug in safari that causes shared workers to stop working after a while\n  // see https://github.com/github/web-systems/issues/965\n  if (isSafari()) return false\n  return 'SharedWorker' in window && safeStorage('localStorage').getItem('bypassSharedWorker') !== 'true'\n}\n\nexport function workerSrc(): string | null {\n  const url = document.head.querySelector<HTMLLinkElement>(`link[rel=shared-web-socket-src]`)?.getAttribute('href')\n\n  // ensure we have a valid URL, otherwise don't use the worker\n  if (!url || !url.startsWith('/')) {\n    return null\n  }\n\n  return url\n}\n\nfunction socketUrl(): string | null {\n  return document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.href ?? null\n}\n\nfunction socketRefreshUrl(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-refresh-url') ??\n    null\n  )\n}\n\nfunction sessionIdentifier(): string | null {\n  return (\n    document.head.querySelector<HTMLLinkElement>('link[rel=shared-web-socket]')?.getAttribute('data-session-id') ?? null\n  )\n}\n\n/**\n * dispatches events of type: 'socket:message' | 'socket:presence'\n */\nfunction notify(subscribers: Iterable<Dispatchable>, {channel, type, data}: AliveEvent) {\n  for (const el of subscribers) {\n    el.dispatchEvent(\n      new CustomEvent(`socket:${type}`, {\n        bubbles: false,\n        cancelable: false,\n        detail: {name: channel, data},\n      }),\n    )\n  }\n}\n\nclass AliveSessionProxy {\n  private worker: SharedWorker\n  private subscriptions = new SubscriptionSet<Dispatchable>()\n  private presenceMetadata = new PresenceMetadataSet<Dispatchable>()\n  private notify: Notifier<Dispatchable>\n\n  constructor(src: string, url: string, refreshUrl: string, sessionId: string, notifier: Notifier<Dispatchable>) {\n    this.notify = notifier\n    // eslint-disable-next-line ssr-friendly/no-dom-globals-in-constructor\n    this.worker = new SharedWorker(src, `github-socket-worker-v2-${sessionId}`)\n    this.worker.port.onmessage = ({data}) => this.receive(data)\n    this.worker.port.postMessage({connect: {url, refreshUrl}})\n  }\n\n  subscribe(subs: Array<Subscription<Dispatchable>>) {\n    const added = this.subscriptions.add(...subs)\n    if (added.length) {\n      this.worker.port.postMessage({subscribe: added})\n    }\n\n    // We may be adding a subscription to a presence channel which is already subscribed.\n    // In this case, we need to explicitly ask the SharedWorker to send us the presence data.\n    const addedChannels = new Set(added.map(topic => topic.name))\n    const redundantPresenceChannels = subs.reduce((redundantChannels, subscription) => {\n      const channel = subscription.topic.name\n\n      if (isPresenceChannel(channel) && !addedChannels.has(channel)) {\n        redundantChannels.add(channel)\n      }\n\n      return redundantChannels\n    }, new Set<string>())\n\n    if (redundantPresenceChannels.size) {\n      this.worker.port.postMessage({requestPresence: Array.from(redundantPresenceChannels)})\n    }\n  }\n\n  unsubscribeAll(...subscribers: Dispatchable[]) {\n    const removed = this.subscriptions.drain(...subscribers)\n    if (removed.length) {\n      this.worker.port.postMessage({unsubscribe: removed})\n    }\n\n    const updatedPresenceChannels = this.presenceMetadata.removeSubscribers(subscribers)\n    this.sendPresenceMetadataUpdate(updatedPresenceChannels)\n  }\n\n  updatePresenceMetadata(metadataUpdates: Array<MetadataUpdate<Dispatchable>>) {\n    const updatedChannels = new Set<string>()\n\n    for (const update of metadataUpdates) {\n      // update the local metadata for this specific element\n      this.presenceMetadata.setMetadata(update)\n      updatedChannels.add(update.channelName)\n    }\n\n    // Send the full local metadata for these channels to the SharedWorker\n    this.sendPresenceMetadataUpdate(updatedChannels)\n  }\n\n  sendPresenceMetadataUpdate(channelNames: Set<string>) {\n    if (!channelNames.size) {\n      return\n    }\n\n    const updatesForSharedWorker: Array<Omit<MetadataUpdate<Element>, 'subscriber'>> = []\n\n    for (const channelName of channelNames) {\n      // get all metadata for this channel (from all elements) to send to the SharedWorker\n      updatesForSharedWorker.push({\n        channelName,\n        metadata: this.presenceMetadata.getChannelMetadata(channelName),\n      })\n    }\n\n    // Send the full metadata updates to the SharedWorker\n    this.worker.port.postMessage({updatePresenceMetadata: updatesForSharedWorker})\n  }\n\n  online() {\n    this.worker.port.postMessage({online: true})\n  }\n\n  offline() {\n    this.worker.port.postMessage({online: false})\n  }\n\n  hangup() {\n    this.worker.port.postMessage({hangup: true})\n  }\n\n  private notifyPresenceDebouncedByChannel = new Map<string, Notifier<Dispatchable>>()\n  private receive(event: AliveEvent) {\n    const {channel} = event\n\n    if (event.type === 'presence') {\n      // There are times when we get a flood of messages from the SharedWorker, such as a tab that has been idle for a long time and then comes back to the foreground.\n      // Since each presence message for a channel contains the full list of users, we can debounce the events and only notify subscribers with the last one\n      let debouncedNotify = this.notifyPresenceDebouncedByChannel.get(channel)\n      if (!debouncedNotify) {\n        debouncedNotify = debounce((subscribers, debouncedEvent) => {\n          this.notify(subscribers, debouncedEvent)\n          this.notifyPresenceDebouncedByChannel.delete(channel)\n        }, 100)\n        this.notifyPresenceDebouncedByChannel.set(channel, debouncedNotify)\n      }\n\n      debouncedNotify(this.subscriptions.subscribers(channel), event)\n      return\n    }\n\n    // For non-presence messages, we can send them through immediately since they may contain different messages/data\n    this.notify(this.subscriptions.subscribers(channel), event)\n  }\n}\n\nasync function connect() {\n  const src = workerSrc()\n  if (!src) return\n\n  const url = socketUrl()\n  if (!url) return\n\n  const refreshUrl = socketRefreshUrl()\n  if (!refreshUrl) return\n\n  const sessionId = sessionIdentifier()\n  if (!sessionId) return\n\n  const createSession = () => {\n    if (isSharedWorkerSupported()) {\n      try {\n        return new AliveSessionProxy(src, url, refreshUrl, sessionId, notify)\n      } catch {\n        // ignore errors.  CSP will some times block SharedWorker creation. Fall back to standard AliveSession.\n      }\n    }\n\n    return new AliveSession(url, refreshUrl, false, notify)\n  }\n  const session = createSession()\n\n  window.addEventListener('online', () => session.online())\n  window.addEventListener('offline', () => session.offline())\n  window.addEventListener('pagehide', () => {\n    if ('hangup' in session) session.hangup()\n  })\n\n  return session\n}\n\nasync function connectWhenReady() {\n  await ready\n  return connect()\n}\n\nlet sessionPromise: undefined | ReturnType<typeof connectWhenReady>\n\nexport function getSession() {\n  return (sessionPromise ||= connectWhenReady())\n}\n","import {AliveSession as BaseAliveSession} from '@github/alive-client'\nimport type {Notifier} from '@github/alive-client'\nexport class AliveSession<T> extends BaseAliveSession<T> {\n  constructor(\n    url: string,\n    private refreshUrl: string,\n    shared: boolean,\n    notify: Notifier<T>,\n  ) {\n    super(url, () => this.getUrlFromRefreshUrl(), shared, notify)\n  }\n\n  private getUrlFromRefreshUrl() {\n    return fetchRefreshUrl(this.refreshUrl)\n  }\n}\n\ntype PostUrl = {url?: string; token?: string}\nasync function fetchRefreshUrl(url: string): Promise<string | null> {\n  const data = await fetchJSON<PostUrl>(url)\n  return data && data.url && data.token ? post(data.url, data.token) : null\n}\n\nasync function fetchJSON<T>(url: string): Promise<T | null> {\n  const response = await fetch(url, {headers: {Accept: 'application/json'}})\n  if (response.ok) {\n    return response.json()\n  } else if (response.status === 404) {\n    return null\n  } else {\n    throw new Error('fetch error')\n  }\n}\n\nasync function post(url: string, csrf: string): Promise<string> {\n  const response = await fetch(url, {\n    method: 'POST',\n    mode: 'same-origin',\n    headers: {\n      'Scoped-CSRF-Token': csrf,\n    },\n  })\n  if (response.ok) {\n    return response.text()\n  } else {\n    throw new Error('fetch error')\n  }\n}\n","let allowUserContentScrolling = true\n\nexport function setUserContentScrolling(setting: boolean) {\n  allowUserContentScrolling = setting\n}\n\nexport function getUserContentScrolling() {\n  return allowUserContentScrolling\n}\n","import type {CustomEventName, CustomEventDetail} from './types/custom-events'\n\nexport function emitToCodeMirror(event: CustomEventName, editorTarget: Element, detail: CustomEventDetail) {\n  if (!editorTarget) return\n\n  // codemirror 6 watches for events on its content element, not the root editor element\n  const innerEditorTarget = editorTarget.className.includes('cm-content')\n    ? editorTarget\n    : editorTarget.querySelector<HTMLDivElement>('.cm-content')\n\n  if (!innerEditorTarget) return\n\n  innerEditorTarget.dispatchEvent(new CustomEvent(event, {detail}))\n}\n","import {announce} from '@github-ui/aria-live'\nimport {ssrSafeDocument} from '@github-ui/ssr-utils'\n\nexport function setTitle(title: string) {\n  if (!ssrSafeDocument) return\n\n  const oldTitle = ssrSafeDocument.querySelector('title')\n  const newTitle = ssrSafeDocument.createElement('title')\n  newTitle.textContent = title\n\n  if (!oldTitle) {\n    ssrSafeDocument.head.appendChild(newTitle)\n    announce(title)\n  } else if (oldTitle.textContent !== title) {\n    // only replace and announce the title if it's changed\n    oldTitle.replaceWith(newTitle)\n    announce(title)\n  }\n}\n","// This is a simple function that just returns Promise.resolve() It is used in instances when we want to queue a\n// microtask before moving onto the next operation, but want to do so in a very explicit manner: `await microtask`\n// looks a lot clearer in intent than `await void 0` or `await Promise.resolve()`.\n//\n// You would want to use `await microtask()` if you have something that needs to be done very urgently, but still\n// needs to be done asynchronously. This will _not_ yield to the browser for any UI updates or wait for idle, instead\n// it queues a task in the \"microtask\" which is run immediately after the current stack. Use this sparingly. This\n// will likely delay subsequent code for 0-10ms.\nexport function microtask(): Promise<void> {\n  return Promise.resolve()\n}\n\n// This function simply Promisifies requestAnimationFrame so it is awaitable.\n//\n// You would want to use `await animationFrame()` if you're happy to yield to the browser to complete any UI updates\n// before calling your next piece of code. This is useful if - for example - you need to wait for scroll events,\n// or CSS transitions or something. This will likely delay subsequent code for 16ms or so - much longer (30-60ms)\n// if the tab is not focussed.\nexport function animationFrame(): Promise<number> {\n  return new Promise(window.requestAnimationFrame)\n}\n\n// Rejects a promise after a timeout has elapsed. The promise is never\n// successfully fulfilled.\n//\n// Examples\n//\n//   try {\n//     const value = await Promise.race([timeout(100), somethingSlow()])\n//     console.log('Slow operation finished within the timeout', value)\n//   } catch (e) {\n//     console.log('Slow operation did not finish', e)\n//   }\n//\n// Returns a rejected Promise rejected after a timeout.\nexport async function timeout(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>((resolve, reject) => {\n    id = self.setTimeout(() => reject(new Error('timeout')), ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\n// Fulfills a promise after a timeout has elapsed. The promise is never rejected.\n//\n// Examples\n//\n//   step1()\n//   await wait(100)\n//   step2()\n//\n// Returns a Promise fulfilled after a timeout.\nexport async function wait(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>(resolve => {\n    id = self.setTimeout(resolve, ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\nfunction whenAborted(signal: AbortSignal): Promise<never> {\n  return new Promise((resolve, reject) => {\n    const error = new Error('aborted')\n    error.name = 'AbortError'\n    if (signal.aborted) {\n      reject(error)\n    } else {\n      signal.addEventListener('abort', () => reject(error))\n    }\n  })\n}\n\nexport function taskQueue<T>(fn: (values: T[]) => unknown): (value: T) => void {\n  const queue: T[] = []\n  return function (value: T) {\n    queue.push(value)\n    if (queue.length === 1) {\n      queueMicrotask(() => {\n        const values = queue.slice(0)\n        queue.length = 0\n        fn(values)\n      })\n    }\n  }\n}\n","export type Variants = 'default' | 'pending' | 'failure' | 'success' | 'skipped'\n\nfunction getFaviconElements() {\n  // these will always be present in dev and production environments, not in tests\n  return {\n    favicon: document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/svg+xml\"]'),\n    faviconFallback: document.querySelector<HTMLLinkElement>('.js-site-favicon[type=\"image/png\"]'),\n  }\n}\n\n/**\n * Update the favicon to the given href.\n * Primarily used by the Rails app to update the favicon via when an element with the data attribute [data-favicon-override]\n * is added or removed from the DOM.\n * See /behaviors/favicon.ts for more information.\n * @param newHref The new href for the favicon.\n */\nexport function updateFaviconByHref(newHref: string) {\n  const {favicon, faviconFallback} = getFaviconElements()\n  if (!favicon || !faviconFallback) return\n\n  const colorSchemeSuffix = getColorSchemeSuffix()\n\n  newHref = newHref.substr(0, newHref.lastIndexOf('.'))\n  newHref = `${newHref}${colorSchemeSuffix}.svg`\n  favicon.href = newHref\n\n  const newFallbackHref = favicon.href.substr(0, favicon.href.lastIndexOf('.'))\n  faviconFallback.href = `${newFallbackHref}.png`\n}\n\n/**\n * Update the favicon to the current theme. This is used to keep the favicon in sync when the user changes their system theme.\n */\nexport function syncFaviconToTheme() {\n  const {favicon, faviconFallback} = getFaviconElements()\n  if (!favicon || !faviconFallback) return\n\n  const colorSchemeSuffix = getColorSchemeSuffix()\n\n  const n = favicon.href.indexOf('-dark.svg')\n  const newFaviconName = favicon.href.substr(0, n !== -1 ? n : favicon.href.lastIndexOf('.'))\n\n  favicon.href = `${newFaviconName}${colorSchemeSuffix}.svg`\n  faviconFallback.href = `${newFaviconName}${colorSchemeSuffix}.png`\n}\n\n/**\n * Update the favicon to the given variant\n * Primarily used by React components to update the favicon when the page status changes.\n * This method abstracts url building logic from the React components.\n */\nexport function updateFaviconByVariant(variant: Variants) {\n  const {favicon, faviconFallback} = getFaviconElements()\n  if (!favicon || !faviconFallback) return\n\n  const baseUrl = favicon.getAttribute('data-base-href')\n  const variantSuffix = variant === 'default' ? '' : `-${variant}`\n  const colorSchemeSuffix = getColorSchemeSuffix()\n\n  if (baseUrl) {\n    favicon.href = `${baseUrl}${variantSuffix}${colorSchemeSuffix}.svg`\n    faviconFallback.href = `${baseUrl}${variantSuffix}${colorSchemeSuffix}.png`\n  }\n}\n\n/**\n * Helper method to reset the favicon to the default state.\n */\nexport function resetFavicon() {\n  updateFaviconByVariant('default')\n}\n\nfunction getColorSchemeSuffix() {\n  return prefersDarkColorScheme() ? '-dark' : ''\n}\n\nfunction prefersDarkColorScheme() {\n  return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches\n}\n","import {filterMap} from './filter-map'\n\nexport type MapKey<T, K> = (item: T) => K | null | undefined\nexport type Comparator<T> = (a: T, b: T) => number\n\nexport function filterSort<T, K>(items: T[], map: MapKey<T, K>, compare: Comparator<K>): T[] {\n  const sortKey = (item: T): [T, K] | null => {\n    const key = map(item)\n    return key != null ? [item, key] : null\n  }\n  return [...filterMap(items, sortKey)].sort((a, b) => compare(a[1], b[1])).map(([item]) => item)\n}\n","export type MapFilter<T, U> = (item: T) => U | null | undefined\n\nexport function* filterMap<T, U>(items: T[], map: MapFilter<T, U>): Iterable<U> {\n  for (const item of items) {\n    const value = map(item)\n    if (value != null) {\n      yield value\n    }\n  }\n}\n","// Example\n// ```js\n//     fuzzyScore(\"foo.html\", \"foo\")\n//     // => 0.6458333333333334\n// ```\n//\n// ```js\n//     // Compute re once\n//     re = fuzzyRegexp(\"foo\")\n//     fuzzyScore(\"foo.html\", re)\n//     fuzzyScore(\"bar.html\", re)\n//     // => 0.6458333333333334\n// ```\n//\n// Returns a number between 0 and 1. 0 being the worst match and 1\n// being an exact match.\n// You can change the `prefixBonusWeight` variable to alter ordering.\n// Currently fuzzy search for the labels picker uses a weaker prefix bonus to weight heavier full word matches.\nexport function fuzzyScore(string: string, query: string, prefixBonusWeight = 0.1): number {\n  let score = stringScore(string, query, prefixBonusWeight)\n  if (score && query.indexOf('/') === -1) {\n    const basename = string.substring(string.lastIndexOf('/') + 1)\n    score += stringScore(basename, query, prefixBonusWeight)\n  }\n  return score\n}\n\n// Create a regexp that can be used to fuzzy match a given string. Any\n// special regexp characters in the input string will be escaped\n// correctly.\n//\n// A query of \"bar\" becomes /(.*)(b)([^a]*?)(a)([^r]*?)(r)(.*?)/.\n//\n// /\n//  (.*)     whatever's before the first b\n//  (b)      grab the first b of bar\n//  ([^a]*?) take everything up to the a of bar\n//  (a)      take the a of bar\n//  ([^r]*?) take everything up to the r of bar\n//  (r)      take the r of bar\n//  (.*?)    take the rest of the string\n// /\nexport function fuzzyRegexp(query: string): RegExp {\n  const chars = query.toLowerCase().split('')\n\n  let regex = ''\n\n  let firstChar = true\n  for (const char of chars) {\n    // must escape these chars so we match literals\n    const c = char.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n    if (firstChar) {\n      // for the first we want to greedily match anything, which pushes\n      // the first match as late as possible in the string\n      regex += `(.*)(${c})`\n      firstChar = false\n    } else {\n      regex += `([^${c}]*?)(${c})`\n    }\n  }\n  return new RegExp(`${regex}(.*?)$`, 'i')\n}\n\nexport function fuzzyHighlightElement(content: Element, text?: string, textRe?: RegExp): void {\n  if (text) {\n    const matches = content.innerHTML.trim().match(textRe || fuzzyRegexp(text))\n    if (!matches) return\n\n    let open = false\n    const html = []\n    for (let i = 1; i < matches.length; ++i) {\n      const m = matches[i]\n      if (!m) continue\n\n      if (i % 2 === 0) {\n        if (!open) {\n          // eslint-disable-next-line github/unescaped-html-literal\n          html.push('<mark>')\n          open = true\n        }\n      } else if (open) {\n        html.push('</mark>')\n        open = false\n      }\n      html.push(m)\n    }\n    content.innerHTML = html.join('')\n  } else {\n    const html = content.innerHTML.trim()\n    const clean = html.replace(/<\\/?mark>/g, '')\n    if (html !== clean) {\n      content.innerHTML = clean\n    }\n  }\n}\n\nconst wordSeparators = new Set([' ', '-', '_'])\n\n// string_score.js: Quicksilver-like string scoring algorithm.\n//  https://raw.github.com/joshaven/string_score/master/coffee/string_score.coffee\n//\n// Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>\n// Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>\n// MIT license: http://www.opensource.org/licenses/mit-license.php\n//\n// A string score implementation.\nfunction stringScore(originalString: string, abbreviation: string, prefixBonusWeight = 0.1): number {\n  let string = originalString\n  if (string === abbreviation) {\n    return 1.0\n  }\n  const stringLength = string.length\n  let totalCharacterScore = 0.0\n  let shouldAwardCommonPrefixBonus = 0\n  let firstChar = true\n  for (const char of abbreviation) {\n    const indexCLowercase = string.indexOf(char.toLowerCase())\n    const indexCUppercase = string.indexOf(char.toUpperCase())\n    const minIndex = Math.min(indexCLowercase, indexCUppercase)\n    const indexInString = minIndex > -1 ? minIndex : Math.max(indexCLowercase, indexCUppercase)\n    if (indexInString === -1) {\n      return 0.0\n    }\n    totalCharacterScore += 0.1\n    if (string[indexInString] === char) {\n      totalCharacterScore += 0.1\n    }\n    if (indexInString === 0) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n      if (firstChar) {\n        shouldAwardCommonPrefixBonus = 1\n      }\n    }\n    if (wordSeparators.has(string.charAt(indexInString - 1))) {\n      totalCharacterScore += 0.9 - prefixBonusWeight\n    }\n    string = string.substring(indexInString + 1, stringLength)\n    firstChar = false\n  }\n  const abbreviationLength = abbreviation.length\n  const abbreviationScore = totalCharacterScore / abbreviationLength\n  let finalScore = (abbreviationScore * (abbreviationLength / stringLength) + abbreviationScore) / 2\n  if (shouldAwardCommonPrefixBonus && finalScore + prefixBonusWeight < 1) {\n    finalScore += prefixBonusWeight\n  }\n  return finalScore\n}\n\nexport type TextScore = {score: number; text: string}\nexport function compare(a: TextScore, b: TextScore): -1 | 0 | 1 {\n  if (a.score > b.score) {\n    return -1\n  } else if (a.score < b.score) {\n    return 1\n  } else if (a.text < b.text) {\n    return -1\n  } else if (a.text > b.text) {\n    return 1\n  } else {\n    return 0\n  }\n}\n","import type {NavigatorUA} from './@types/user-agent-data'\nimport {ssrSafeWindow} from '@github-ui/ssr-utils'\n\nexport type NavigatorUserAgent = NavigatorUA\n\nexport const OS = {\n  Android: 'Android',\n  iOS: 'iOS',\n  macOS: 'macOS',\n  Windows: 'Windows',\n  Linux: 'Linux',\n  Unknown: 'Unknown',\n}\nexport type OS = (typeof OS)[keyof typeof OS]\n\nexport type OSInformation = {\n  os: OS\n  isAndroid: boolean\n  isIOS: boolean\n  isLinux: boolean\n  isMacOS: boolean\n  isWindows: boolean\n  isDesktop: boolean\n  isMobile: boolean\n}\n\nexport function getOS(): OSInformation {\n  let os: OS = OS.Unknown\n  let isMobileOS = false\n  if (ssrSafeWindow) {\n    // TypeScript doesn't 'know' about userAgentData yet\n    const navigator = ssrSafeWindow.navigator as Navigator & NavigatorUA\n    const userAgent = navigator.userAgent\n    const platform = navigator?.userAgentData?.platform || navigator.platform\n    const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K', 'macOS']\n    const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE']\n    const iosPlatforms = ['iPhone', 'iPad', 'iPod']\n\n    if (macosPlatforms.indexOf(platform) !== -1) {\n      os = OS.macOS\n    } else if (iosPlatforms.indexOf(platform) !== -1) {\n      os = OS.iOS\n    } else if (windowsPlatforms.indexOf(platform) !== -1) {\n      os = OS.Windows\n    } else if (/Android/.test(userAgent)) {\n      os = OS.Android\n    } else if (/Linux/.test(platform)) {\n      os = OS.Linux\n    }\n    isMobileOS = navigator?.userAgentData?.mobile ?? (os === OS.Android || os === OS.iOS)\n  }\n\n  return {\n    os,\n    isAndroid: os === OS.Android,\n    isIOS: os === OS.iOS,\n    isMacOS: os === OS.macOS,\n    isWindows: os === OS.Windows,\n    isLinux: os === OS.Linux,\n    isDesktop: os === OS.macOS || os === OS.Windows || os === OS.Linux,\n    isMobile: isMobileOS,\n  }\n}\n\nexport function isMobile(): boolean {\n  return getOS().isMobile\n}\n\nexport function isDesktop(): boolean {\n  return getOS().isDesktop\n}\n\nexport function isAndroid(): boolean {\n  return getOS().isAndroid\n}\n\nexport function isIOS(): boolean {\n  return getOS().isIOS\n}\n\nexport function isMacOS(): boolean {\n  return getOS().isMacOS\n}\n\nexport function isWindows(): boolean {\n  return getOS().isWindows\n}\n\nexport function isLinux(): boolean {\n  return getOS().isLinux\n}\n","import {eventToHotkeyString} from './hotkey'\n\n/** Returns false if a user has explicitly disabled character key shortcuts. */\nexport const areCharacterKeyShortcutsEnabled = () => {\n  // we don't have a document in the context of SSR.\n  // In that case, we don't need to allow keyboard shortcuts.\n  if (typeof document === 'undefined') return false\n\n  const keyboardShortcutsPreference = document.querySelector<HTMLMetaElement>(\n    'meta[name=keyboard-shortcuts-preference]',\n  )\n  if (keyboardShortcutsPreference) {\n    return keyboardShortcutsPreference.content === 'all'\n  }\n  return true\n}\n\n/**\n * Character-key shortcuts are implemented only with lowercase characters (\"g\", \"g f\"), uppercase characters (\"Shift+A\", \"a\"),\n * symbols (\"Alt+g\"), and punctuation (\"?\", \"!\", \"/\").\n *\n * Returns true if string is NOT what we define as a character key shortcut.\n */\nexport const isNonCharacterKeyShortcut = (hotkey: string) => {\n  return /Enter|Arrow|Escape|Meta|Control|Mod|Esc/.test(hotkey) || (hotkey.includes('Alt') && hotkey.includes('Shift'))\n}\n\nconst nonEditableInputTypes = new Set([\n  'button',\n  'checkbox',\n  'color',\n  'file',\n  'hidden',\n  'image',\n  'radio',\n  'range',\n  'reset',\n  'submit',\n])\n\n/**\n * Returns true if `element` is editable - that is, if it can be focused and typed in like an input or textarea.\n */\nexport function isEditableElement(target: EventTarget | null): boolean {\n  if (!(target instanceof HTMLElement)) return false\n\n  const name = target.nodeName.toLowerCase()\n  const type = target.getAttribute('type')?.toLowerCase() ?? 'text'\n\n  const isReadonly =\n    target.ariaReadOnly === 'true' ||\n    target.getAttribute('aria-readonly') === 'true' ||\n    target.getAttribute('readonly') !== null\n\n  return (\n    (name === 'select' ||\n      name === 'textarea' ||\n      (name === 'input' && !nonEditableInputTypes.has(type)) ||\n      target.isContentEditable) &&\n    !isReadonly\n  )\n}\n\n/**\n * Returns false if a user settings has character key shortcut disabled and keyboard event corresponds to a character\n * key shortcut. Character key shortcuts are never enabled on editable form inputs.\n */\nexport const isShortcutAllowed = (event: KeyboardEvent) => {\n  const hotkey = eventToHotkeyString(event)\n\n  // Never allow character key shortcuts in inputs\n  const allowCharacterKeyShortcuts = areCharacterKeyShortcutsEnabled() && !isEditableElement(event.target)\n\n  return isNonCharacterKeyShortcut(hotkey) || allowCharacterKeyShortcuts\n}\n","import {AnalyticsClient, getOptionsFromMeta} from '@github/hydro-analytics-client'\nimport type {Context} from '@github/hydro-analytics-client'\nimport safeStorage from '@github-ui/safe-storage'\nimport {isStaff} from '@github-ui/stats'\nconst {getItem} = safeStorage('localStorage')\n\ndeclare const process: {\n  env: {\n    NODE_ENV: string\n  }\n}\n\nconst dimensionPrefix = 'dimension_'\nlet hydroAnalyticsClient: AnalyticsClient | undefined\n\nconst MARKETING_PARAMS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'scid']\n\ntry {\n  const options = getOptionsFromMeta('octolytics')\n\n  // Remove the base context because meta tags can change as the user navigates with Turbo\n  // These will be folded in for each event & page view\n  delete options.baseContext\n\n  hydroAnalyticsClient = new AnalyticsClient(options)\n} catch {\n  // Failed to get options from meta tags.  This most likely means analytics are disabled.\n}\n\nfunction extendBaseContext(context?: Context) {\n  const baseContext = getOptionsFromMeta('octolytics').baseContext || {}\n\n  if (baseContext) {\n    delete baseContext.app_id\n    delete baseContext.event_url\n    delete baseContext.host\n\n    for (const [key, value] of Object.entries(baseContext)) {\n      // some octolytics meta tags are prefixed with dimension-, which we don't need with the new hydro-analytics-client\n      if (key.startsWith(dimensionPrefix)) {\n        baseContext[key.replace(dimensionPrefix, '')] = value\n        delete baseContext[key]\n      }\n    }\n  }\n\n  const visitorMeta = document.querySelector<HTMLMetaElement>('meta[name=visitor-payload]')\n  if (visitorMeta) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(baseContext, visitorHash)\n  }\n\n  const urlParams = new URLSearchParams(window.location.search)\n  for (const [key, value] of urlParams) {\n    if (MARKETING_PARAMS.includes(key.toLowerCase())) {\n      baseContext[key] = value\n    }\n  }\n\n  // Include additional context from the page\n  baseContext.staff = isStaff().toString()\n\n  return Object.assign(baseContext, context)\n}\n\nexport function sendPageView(context?: Context) {\n  hydroAnalyticsClient?.sendPageView(extendBaseContext(context))\n}\n\nexport function sendEvent(type: string, context: Record<string, string | number | boolean | undefined | null> = {}) {\n  const service = document.head?.querySelector<HTMLMetaElement>('meta[name=\"current-catalog-service\"]')?.content\n\n  const cleanContext: Context = service ? {service} : {}\n\n  for (const [key, value] of Object.entries(context)) {\n    if (value !== undefined && value !== null) {\n      cleanContext[key] = `${value}`\n    }\n  }\n\n  if (hydroAnalyticsClient) {\n    const typeWithFallback = type || 'unknown'\n    const fullContext = extendBaseContext(cleanContext)\n    hydroAnalyticsClient.sendEvent(typeWithFallback, extendBaseContext(cleanContext))\n\n    if (process.env.NODE_ENV === 'development') {\n      debugSendEvent(typeWithFallback, fullContext)\n    }\n  }\n}\n\nexport function stringifyObjectValues(obj: object) {\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, JSON.stringify(v)]))\n}\n\nfunction debugSendEvent(type: string, context: Context) {\n  if (getItem('hydro-debug.send-event') === 'true') {\n    // eslint-disable-next-line no-console\n    console.group('[hydro-debug.send-event]')\n    // eslint-disable-next-line no-console\n    console.log({type, context})\n    // eslint-disable-next-line no-console\n    console.groupEnd()\n  }\n}\n","// Check if the navigation is only a hash change.\nconst isHashNavigation = (currentUrl: string, targetUrl: string): boolean => {\n  const current = new URL(currentUrl, window.location.origin)\n  const target = new URL(targetUrl, window.location.origin)\n  const hasHash = target.href.includes('#')\n\n  return (\n    hasHash && current.host === target.host && current.pathname === target.pathname && current.search === target.search\n  )\n}\n\nexport default isHashNavigation\n","import type {ImageDimensions} from './types'\n\nconst PNG_HEADER = 0x89504e47\nconst CRC_WIDTH = 4\n\nexport class PNGScanner {\n  dataview: DataView\n  pos: number\n  callback: ((dimensions: ImageDimensions) => void) | undefined\n\n  constructor(buffer: ArrayBuffer, callback?: (dimensions: ImageDimensions) => void) {\n    this.dataview = new DataView(buffer)\n    this.pos = 0\n    this.callback = callback\n  }\n\n  advance(bytes: number) {\n    this.pos += bytes\n  }\n\n  readInt(bytes: 1 | 2 | 4) {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const self = this\n\n    // I want the do { } syntax *so* bad.\n    const value = (function () {\n      switch (bytes) {\n        case 1:\n          return self.dataview.getUint8(self.pos)\n        case 2:\n          return self.dataview.getUint16(self.pos)\n        case 4:\n          return self.dataview.getUint32(self.pos)\n        default:\n          // I shouldn't need this, but flow can't figure out that all values of bytes are handled by the above switch\n          throw new Error('bytes parameter must be 1, 2 or 4')\n      }\n    })()\n    this.advance(bytes)\n    return value\n  }\n\n  readChar() {\n    return this.readInt(1)\n  }\n\n  readShort() {\n    return this.readInt(2)\n  }\n\n  readLong() {\n    return this.readInt(4)\n  }\n\n  readString(length: number): string {\n    const buf = []\n    for (let i = 0; i < length; i++) {\n      buf.push(String.fromCharCode(this.readChar()))\n    }\n    return buf.join('')\n  }\n\n  scan(fn: (this: PNGScanner, type: string, len: number) => boolean) {\n    if (this.readLong() !== PNG_HEADER) {\n      throw new Error('invalid PNG')\n    }\n\n    this.advance(4)\n\n    for (;;) {\n      const len = this.readLong()\n      const type = this.readString(4)\n      const resumeAt = this.pos + len + CRC_WIDTH\n      if (fn.call(this, type, len) === false || type === 'IEND') {\n        break\n      }\n      this.pos = resumeAt\n    }\n  }\n}\n","import {isMacOS} from '@github-ui/get-os'\n\nimport {PNGScanner} from './pngScanner'\nimport type {ImageDimensions} from './types'\n\nexport const getSelectedLineRange = (textarea: HTMLTextAreaElement): [number, number] => {\n  // Subtract one from the caret position so the newline found is not the one _at_ the caret position\n  // then add one because we don't want to include the found newline. Also changes -1 (not found) result to 0\n  const start = textarea.value.lastIndexOf('\\n', textarea.selectionStart - 1) + 1\n\n  // activeLineEnd will be the index of the next newline inclusive, which works because slice is last-index exclusive\n  let end = textarea.value.indexOf('\\n', textarea.selectionEnd)\n  if (end === -1) end = textarea.value.length\n\n  return [start, end]\n}\n\nexport const markdownComment = (text: string) => `<!-- ${text.replaceAll('--', '\\\\-\\\\-')} -->`\n\nexport const markdownLink = (text: string, url: string) =>\n  `[${text.replaceAll('[', '\\\\[').replaceAll(']', '\\\\]')}](${url.replaceAll('(', '\\\\(').replaceAll(')', '\\\\)')})`\n\nexport const isModifierKey = (event: KeyboardEvent | React.KeyboardEvent<unknown>) =>\n  // eslint-disable-next-line @github-ui/ui-commands/no-manual-shortcut-logic\n  isMacOS() ? event.metaKey : event.ctrlKey\n\nconst METERS_PER_INCH = 0.0254\nconst RETINA_PPI = 72 * 2\n\nconst getImageDimensions = (imgData: ArrayBuffer) => {\n  const scanner = new PNGScanner(imgData)\n\n  const meta = {\n    width: 0,\n    height: 0,\n    ppi: 1,\n  }\n\n  scanner.scan(function (this: PNGScanner, type) {\n    switch (type) {\n      case 'IHDR': {\n        meta.width = this.readLong()\n        meta.height = this.readLong()\n        return true\n      }\n      case 'pHYs': {\n        const ppuX = this.readLong()\n        const ppuY = this.readLong()\n        const unit = this.readChar()\n        let inchesRatio\n        if (unit === 1) {\n          inchesRatio = METERS_PER_INCH\n        }\n        if (inchesRatio) {\n          meta.ppi = Math.round(((ppuX + ppuY) / 2) * inchesRatio)\n        }\n        return false\n      }\n      case 'IDAT': {\n        return false\n      }\n    }\n\n    return true\n  })\n\n  return meta\n}\n\nexport const getImageSizeFromFile = async (file: File) => {\n  const imgResult = await new Promise<ArrayBuffer>((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = () => resolve(reader.result as ArrayBuffer)\n    reader.onerror = () => reject(reader.error)\n    reader.readAsArrayBuffer(file)\n  })\n  return imgResult ? getImageDimensions(imgResult) : null\n}\n\nexport const markdownImageTag = (dimensions: ImageDimensions, src: string, alt: string = 'Image') => {\n  if (dimensions.ppi === RETINA_PPI) {\n    const width = Math.round(dimensions.width / 2)\n    // eslint-disable-next-line github/unescaped-html-literal\n    return `<img width=\"${width}\" alt=\"${alt}\" src=\"${src}\" />`\n  }\n  return `![${alt}](${src})`\n}\n","import {dialog} from '@github-ui/details-dialog'\nimport {fetchSafeDocumentFragment} from '@github-ui/fetch-utils'\nimport type {Kicker} from '@github/remote-form'\nimport {remoteForm} from '@github/remote-form'\nimport {webauthnSupportLevel} from '@github-ui/webauthn-support-level'\n\nlet sudoPromptExist = false\n\n/**\n * Take a URL and add webauthn params to it.\n *\n * @param {string} oldURL - The old URL.\n * @returns {string} - The new URL with added params.\n */\nfunction urlWithParams(oldURL: string): string {\n  const newURL = new URL(oldURL, window.location.origin)\n  const params = new URLSearchParams(newURL.search.slice(1))\n  params.set('webauthn-support', webauthnSupportLevel())\n  newURL.search = params.toString()\n  return newURL.toString()\n}\n\nasync function loadPromptTemplate(): Promise<HTMLTemplateElement> {\n  const link = document.querySelector<HTMLLinkElement>('link[rel=sudo-modal]')!\n  const template = document.querySelector('.js-sudo-prompt')\n  if (template instanceof HTMLTemplateElement) {\n    return template\n  } else if (link) {\n    const fragment = await fetchSafeDocumentFragment(document, urlWithParams(link.href))\n    document.body.appendChild(fragment)\n    return document.querySelector<HTMLTemplateElement>('.js-sudo-prompt')!\n  } else {\n    throw new Error(\"couldn't load sudo prompt\")\n  }\n}\n\nlet succeeded = false\n\n/**\n * Provide a sudo prompt, and return when it has been filled in or dismissed.\n *\n * @returns {Promise<boolean>} - Resolves to `true` if the user successfully authed with sudo.\n */\nexport async function sudoPrompt(currentTarget?: HTMLElement): Promise<boolean> {\n  if (sudoPromptExist) return false\n  sudoPromptExist = true\n  succeeded = false\n  const template = await loadPromptTemplate()\n  const content = template.content.cloneNode(true)\n  const prompt = await dialog({content})\n\n  // open/expanded HTML5 <details> can potentially steal focus from the dialog (https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details)\n  // Example bug: https://github.com/github/authentication/issues/2208\n  // close the open details element that triggered this sudo challenge\n  const details = currentTarget?.closest('details[open]') as HTMLElement\n  if (details) {\n    details.removeAttribute('open')\n  }\n\n  await new Promise<void>(resolve => {\n    prompt.addEventListener(\n      'dialog:remove',\n      function () {\n        // re-add the open attribute to the details that we closed above\n        if (details) {\n          details.setAttribute('open', 'open')\n        }\n        sudoPromptExist = false\n        resolve()\n      },\n      {once: true},\n    )\n  })\n  return succeeded\n}\n\nasync function sudoModalErrorOrClose(\n  form: HTMLFormElement,\n  wants: Kicker,\n  unauthorizedError = 'Sudo authentication failed.',\n  tooManyError = 'Too many authentication attempts. Please try again later.',\n  errorSelector = '.js-sudo-error',\n  inputElementSelector?: string,\n) {\n  try {\n    await wants.text()\n  } catch (error) {\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (!error.response) throw error\n    let errorMessage\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    switch (error.response.status) {\n      case 401:\n        errorMessage = unauthorizedError\n        break\n      case 429:\n        errorMessage = tooManyError\n        break\n      default:\n        errorMessage = 'An unknown error occurred. Please try again later.'\n    }\n\n    form.querySelector<HTMLElement>(errorSelector)!.textContent = errorMessage\n    form.querySelector<HTMLElement>(errorSelector)!.hidden = false\n    if (inputElementSelector) {\n      form.querySelector<HTMLInputElement>(inputElementSelector)!.value = ''\n    }\n\n    // rethrow error if not expected, only after surfacing it in flash\n    // @ts-expect-error catch blocks are bound to `unknown` so we need to validate the type before using it\n    if (error.response.status !== 401 && error.response.status !== 429) {\n      throw error\n    }\n\n    return\n  }\n  succeeded = true\n  form.closest<HTMLElement>('details')!.removeAttribute('open')\n}\n\nremoteForm('.js-sudo-webauthn-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-github-mobile-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants)\n})\n\nremoteForm('.js-sudo-totp-form', async function (form, wants) {\n  await sudoModalErrorOrClose(form, wants, undefined, undefined, '.flash-error', '#totp')\n})\n\nremoteForm('.js-sudo-password-form', async function (form, wants) {\n  await sudoModalErrorOrClose(\n    form,\n    wants,\n    'Incorrect password.',\n    'Too many password attempts. Please wait and try again.',\n    undefined,\n    '.js-sudo-password',\n  )\n})\n\n/**\n * Check if user is in sudo mode. If not, show a sudo prompt.\n *\n * @returns {Promise<boolean>} - Will be `true` if user is in or got in sudo mode after prompt.\n */\nexport default async function triggerSudoPrompt(currentTarget?: HTMLElement): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    }\n  }\n  return sudoPrompt(currentTarget)\n}\n\nexport async function fetchSessionInSudo(): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'},\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    }\n  }\n  return false\n}\n","// Gets the length of code-points from a String.\n//\n// This is different to `string.length` which returns the amount of utf-8\n// bytes, which is a different metric as - for example - the poo emoji is 2\n// utf-8 bytes, but 1 unicode code point.\n//\n// See http://blog.jonnew.com/posts/poo-dot-length-equals-two for more.\nexport function getUtf8StringLength(str: string): number {\n  const joiner = '\\u200D'\n  const split = str.split(joiner)\n  let count = 0\n\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]/).join('')).length\n    count += num\n  }\n\n  // assuming the joiners are used appropriately\n  return count / split.length\n}\n/**\n * Replace text in a textarea with a new string and\n * place the cursor at the selectionEnd position.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @param isFocused whether the textarea is currently in focus\n * @returns The new text\n */\nexport function replaceText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n  isFocused = true,\n): string {\n  let beginning = textarea.value.substring(0, textarea.selectionEnd || 0)\n  let remaining = textarea.value.substring(textarea.selectionEnd || 0)\n  beginning = beginning.replace(oldText, newText)\n  remaining = remaining.replace(oldText, newText)\n\n  setTextareaValueAndCursor(textarea, beginning + remaining, beginning.length, isFocused)\n\n  return newText\n}\n\n/**\n * Replace selected text in a textarea with a new string.\n * If the selection is empty, the old text is replaced by the\n * new text in the whole textarea.\n * @param textarea an `<input>` or `<textarea>` element\n * @param oldText The text to replace\n * @param newText The new text to replace with\n * @returns The new text\n */\nexport function replaceSelection(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  oldText: string,\n  newText: string,\n): string {\n  if (textarea.selectionStart === null || textarea.selectionEnd === null) {\n    return replaceText(textarea, oldText, newText)\n  }\n  const beginning = textarea.value.substring(0, textarea.selectionStart)\n  const remaining = textarea.value.substring(textarea.selectionEnd)\n\n  setTextareaValueAndCursor(textarea, beginning + newText + remaining, beginning.length)\n\n  return newText\n}\n\ntype InsertOptions = {\n  appendNewline?: boolean\n}\n/**\n * Inserts text into a text input and moves the cursor appropriately.\n * If the cursor happens to be in the middle of a line, or the textarea isn't empty,\n * we add a newline character before the inserted text. We also advance the cursor\n * appropriately\n * @param textarea an `<input>` or `<textarea>` element\n * @param text The text to add\n * @param appendNewline optionally adds a `\\n` character after `text`\n */\nexport function insertText(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  text: string,\n  options: InsertOptions = {},\n): string {\n  const point = textarea.selectionEnd || 0\n  const beginning = textarea.value.substring(0, point)\n  const remaining = textarea.value.substring(point)\n  const newline = textarea.value === '' || beginning.match(/\\n$/) ? '' : '\\n'\n  const trailingNewline = options.appendNewline ? '\\n' : ''\n  const insertedText = newline + text + trailingNewline\n\n  textarea.value = beginning + insertedText + remaining\n  const newPoint = point + insertedText.length\n  textarea.selectionStart = newPoint\n  textarea.selectionEnd = newPoint\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n  textarea.focus()\n  return insertedText\n}\n\n/**\n * Helper function to set the value of a textarea and move the cursor to a given position.\n * Emits a `change` event.\n * @param textarea an `<input>` or `<textarea>` element\n * @param value The new value\n * @param cursor The position to move the cursor to\n * @param isFocused whether the textarea is currently in focus\n */\nfunction setTextareaValueAndCursor(\n  textarea: HTMLInputElement | HTMLTextAreaElement,\n  value: string,\n  cursor: number,\n  isFocused = true,\n) {\n  textarea.value = value\n\n  if (isFocused) {\n    textarea.selectionStart = cursor\n    textarea.selectionEnd = cursor\n  }\n\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n}\n\n// Returns the character index for a given byte position, taking character encoding into account\n// Example usage for this method: highlighing text in a textarea that may contain non-UTF8 characters\n//\n// For context, in Javascript, strings are UTF16. However, Codemirror uses simple Javascript\n// indexing, that isn't Unicode aware. This leads to incorrect highlighting.\n//\n// For example, '' is represented as 4 bytes. In Javascript, it has length 2\n// and is composed of a surrogate pair (2 code points). ''.length is 2.\n// Given text string such as 'hello  world', this would be represented in hex as:\n// \n// 00000000 68 65 6c 6c 6f 20 f0 9f  92 a9 20 77 6f 72 6c 64 hello  world\n// \n// The string 'world' appears at byte positions (11, 16), but in Javascript `str.slice(11, 16)` returns 'rld'.\n// The correct position in Javascript, and codemirror, would be: (9, 14).\n//\n// When encoded using `TextEncoder#encodeInto` with '', we'd get an object with\n// the following properties: {written: 4, read: 2}. This discrepancy informs us\n// that we need to offset the start and end positions by 2.\nexport function GetCharIndexFromBytePosition(str: string, pos: number): number {\n  // The string iterator [...str] is unicode aware, and allows us to correctly\n  // iterate over each grapheme in the string. Iterating over `str[i]` would\n  // not work, as it separates the astral symbol into each of its surrogates.\n  const contents = [...str]\n  const encoder = new TextEncoder()\n\n  // Astral code points in Javascript are a surrogate pair of 2 UTF16 code units, or 4 bytes\n  const u8array = new Uint8Array(4)\n\n  for (let i = 0; i < contents.length; i++) {\n    const char = contents[i]!\n    const {written, read} = encoder.encodeInto(char, u8array)\n    if (!written || !read) {\n      return -1\n    }\n    const diff = written - read\n    if (diff === 0) {\n      continue\n    }\n\n    if (i < pos) {\n      pos -= diff\n    }\n\n    if (i >= pos) {\n      break\n    }\n  }\n\n  return pos\n}\n","export interface CacheNode {\n  title: string | null | undefined\n  transients: Element[]\n  bodyClasses: string | null | undefined\n  replacedElements: Element[]\n}\n\nconst DATA_TURBO_LOADED = 'data-turbo-loaded'\n\nexport function markTurboHasLoaded() {\n  document.documentElement.setAttribute(DATA_TURBO_LOADED, '')\n}\n\nexport function hasTurboLoaded() {\n  return document.documentElement.hasAttribute(DATA_TURBO_LOADED)\n}\n\n// Check if an event target is a <turbo-frame>\nexport const isTurboFrame = (el: EventTarget | null): boolean => (el as Element)?.tagName === 'TURBO-FRAME'\n\n// Checks if two urls start with the same \"/owner/repo\" prefix.\nexport function isSameRepo(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 3).join('/')\n  const path2 = url2.split('/', 3).join('/')\n  return path1 === path2\n}\n\n// Checks if two urls start with the same \"/owner\" prefix.\nexport function isSameProfile(url1: string, url2: string): boolean {\n  const path1 = url1.split('/', 2).join('/')\n  const path2 = url2.split('/', 2).join('/')\n  return path1 === path2\n}\n\n// Wait for all stylesheets to be loaded.\nexport async function waitForStylesheets() {\n  const headStylesheets = document.head.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')\n  const loadedStylesheets = new Set([...document.styleSheets].map(stylesheet => stylesheet.href))\n  const promises = []\n\n  for (const stylesheet of headStylesheets) {\n    if (stylesheet.href === '' || loadedStylesheets.has(stylesheet.href)) continue\n    promises.push(waitForLoad(stylesheet))\n  }\n\n  await Promise.all(promises)\n}\n\nconst waitForLoad = (stylesheet: HTMLLinkElement, timeout = 2000): Promise<void> => {\n  return new Promise(resolve => {\n    const onComplete = () => {\n      stylesheet.removeEventListener('error', onComplete)\n      stylesheet.removeEventListener('load', onComplete)\n      resolve()\n    }\n\n    stylesheet.addEventListener('load', onComplete, {once: true})\n    stylesheet.addEventListener('error', onComplete, {once: true})\n    setTimeout(onComplete, timeout)\n  })\n}\n\n// Replaces all elements with `data-turbo-replace` with the ones coming from the Turbo response.\nexport const replaceElements = (html: Document, cachedElements?: Element[]) => {\n  const newElements = cachedElements || html.querySelectorAll('[data-turbo-replace]')\n  const oldElements = [...document.querySelectorAll('[data-turbo-replace]')]\n\n  for (const newElement of newElements) {\n    const oldElement = oldElements.find(el => el.id === newElement.id)\n\n    if (oldElement) {\n      oldElement.replaceWith(newElement.cloneNode(true))\n    }\n  }\n}\n\n// Adds all missing stylesheets that come from the Turbo response.\nexport const addNewStylesheets = (html: Document) => {\n  // Only add stylesheets that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')) {\n    if (\n      !document.head.querySelector(\n        `link[href=\"${el.getAttribute('href')}\"],\n           link[data-href=\"${el.getAttribute('data-href')}\"]`,\n      )\n    ) {\n      document.head.append(el)\n    }\n  }\n}\n\n// Adds all missing scripts that come from the Turbo response.\nexport const addNewScripts = (html: Document) => {\n  // Only add scripts that aren't already in the page\n  for (const el of html.querySelectorAll<HTMLScriptElement>('script')) {\n    if (!document.head.querySelector(`script[src=\"${el.getAttribute('src')}\"]`)) {\n      executeScriptTag(el)\n    }\n  }\n}\n\n// Load and execute scripts using standard script request.\nexport const copyScriptTag = (script: HTMLScriptElement) => {\n  const {src} = script\n\n  if (!src) {\n    // we can't load a script without a source\n    return\n  }\n\n  // eslint-disable-next-line github/no-dynamic-script-tag\n  const newScript = document.createElement('script')\n  const type = script.getAttribute('type')\n  if (type) newScript.type = type\n\n  newScript.src = src\n  return newScript\n}\n\n// Load and execute scripts using standard script request.\nconst executeScriptTag = (script: HTMLScriptElement) => {\n  const newScript = copyScriptTag(script)\n\n  if (document.head && newScript) {\n    document.head.appendChild(newScript)\n  }\n}\n\n// Compares all `data-turbo-track=\"reload\"` reload with the ones coming from the Turbo response.\nexport const getChangedTrackedKeys = (html: Document): string[] => {\n  const changedKeys = []\n  for (const meta of html.querySelectorAll<HTMLMetaElement>('meta[data-turbo-track=\"reload\"]')) {\n    if (\n      document.querySelector<HTMLMetaElement>(`meta[http-equiv=\"${meta.getAttribute('http-equiv')}\"]`)?.content !==\n      meta.content\n    ) {\n      changedKeys.push(formatKeyToError(meta.getAttribute('http-equiv') || ''))\n    }\n  }\n\n  return changedKeys\n}\n\nexport const getTurboCacheNodes = (html: Document): CacheNode => {\n  const head = html.querySelector('[data-turbo-head]') || html.head\n\n  return {\n    title: head.querySelector('title')?.textContent,\n    transients: [...head.querySelectorAll('[data-turbo-transient]')].map(el => el.cloneNode(true) as Element),\n    bodyClasses: html.querySelector<HTMLMetaElement>('meta[name=turbo-body-classes]')?.content,\n    replacedElements: [...html.querySelectorAll('[data-turbo-replace]')].map(el => el.cloneNode(true) as Element),\n  }\n}\n\nexport const getDocumentAttributes = () => [...document.documentElement.attributes]\n\nexport const formatKeyToError = (key: string) => key.replace(/^x-/, '').replaceAll('-', '_')\n\nexport const dispatchTurboReload = (reason: string) =>\n  document.dispatchEvent(new CustomEvent('turbo:reload', {detail: {reason}}))\n\nexport const dispatchTurboRestored = () => document.dispatchEvent(new CustomEvent('turbo:restored'))\n\nexport const replaceElementAttributes = (element: HTMLElement, newElement: HTMLElement) => {\n  for (const attr of element.attributes) {\n    if (!newElement.hasAttribute(attr.nodeName) && attr.nodeName !== 'aria-busy') {\n      element.removeAttribute(attr.nodeName)\n    }\n  }\n\n  for (const attr of newElement.attributes) {\n    if (element.getAttribute(attr.nodeName) !== attr.nodeValue) {\n      element.setAttribute(attr.nodeName, attr.nodeValue!)\n    }\n  }\n}\n","import {attr, controller, target, targets} from '@github/catalyst'\nimport {get, parseRequestOptionsFromJSON, supported} from '@github/webauthn-json/browser-ponyfill'\nimport type {CredentialRequestOptionsJSON} from '@github/webauthn-json/browser-ponyfill'\nimport {requestSubmit} from '@github-ui/form-utils'\n\n// An event dispatched by `WebauthnGetElement` when a normal get request is initiated\nconst webauthnGetEvent = 'webauthn-get-prompt'\n// An event dispatched by `WebauthnSubtleElement` when its button is submitted\nconst webauthnSubtleEvent = 'webauthn-subtle-submit'\n\nexport enum State {\n  Initializing = 'initializing',\n  Unsupported = 'unsupported',\n  Ready = 'ready',\n  Waiting = 'waiting',\n  Error = 'error',\n  Submitting = 'submitting',\n}\n\n@controller\nexport class WebauthnGetElement extends HTMLElement {\n  state: State = State.Initializing\n  @target button: HTMLButtonElement\n  @target buttonText: HTMLElement\n  // `messages` contains all the message elements.\n  @targets messages: HTMLElement[]\n  @target capitalizedDescription: HTMLElement\n  @target unsupportedMessage: HTMLElement\n  @target passkeysUnsupportedMessage: HTMLElement\n  @target waitingMessage: HTMLElement\n  @target errorMessage: HTMLElement\n  @target errorText: HTMLElement\n\n  static attrPrefix = ''\n  @attr dataJson = ''\n  @attr subtleLogin = false\n  private originalButtonText: string\n  private hasErrored = false\n  private originalErrorText: string | null\n  private passkeySupport: boolean\n\n  async connectedCallback() {\n    this.originalButtonText = this.getCurrentButtonText()\n    this.originalErrorText = this.errorText.textContent\n    this.setState(supported() ? State.Ready : State.Unsupported)\n    this.passkeySupport = await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()\n    // show the passkey unsupported message if it's present on the page (renders when the user has passkeys)\n    // and we're not already showing the webauthn unsupported message\n    if (this.state !== State.Unsupported && !this.passkeySupport && this.passkeysUnsupportedMessage) {\n      this.passkeysUnsupportedMessage.hidden = false\n    }\n    // if this get request is for login and the user doesn't have any passkeys\n    if (this.subtleLogin) {\n      this.handleWebauthnSubtle()\n    } else {\n      this.showWebauthnLoginFragment()\n    }\n  }\n\n  // Handles login specific webauthn-get behavior.\n  // Reveals and prepares webauthn-subtle behavior for the subtle webauthn login scenario.\n  handleWebauthnSubtle(): void {\n    // show the subtle UX. webauthn-get loads last so we don't need to worry about if it isn't already on the page\n    const subtle = document.querySelector<HTMLElement>('.js-webauthn-subtle')!\n    if (!subtle) {\n      return\n    }\n\n    subtle.hidden = false\n    this.updateWebauthnSubtleParentBoxVisibility(false)\n    subtle.addEventListener(webauthnSubtleEvent, () => {\n      this.showWebauthnLoginFragment()\n      // if user tries subtle passkey login from an unsupported browser, show the unsupported UX but don't trigger the prompt\n      if (this.state !== State.Unsupported) {\n        this.prompt()\n      }\n    })\n  }\n\n  // Handles login specific webauthn-get behavior.\n  // Reveals main webauthn login component and hides the webauthn subtle hint - used for the subtle:false login scenario\n  // and for switching from subtle over to the main passkey login UX after user input.\n  showWebauthnLoginFragment(): void {\n    // grab and reveal parent webauthn section that isn't a catalyst component\n    const loginFragment = document.querySelector<HTMLElement>('.js-webauthn-login-section')!\n    if (!loginFragment) {\n      return\n    }\n    loginFragment.hidden = false\n\n    // also hide the parent box for the webauthn subtle component\n    // this is nessesary when it's the only content in the login alternatives box for subtle:false logins\n    this.updateWebauthnSubtleParentBoxVisibility(true)\n  }\n\n  updateWebauthnSubtleParentBoxVisibility(hidden: boolean): void {\n    const parentDiv = document.querySelector<HTMLElement>('.js-webauthn-hint')!\n    if (!parentDiv) {\n      return\n    }\n    parentDiv.hidden = hidden\n  }\n\n  getCurrentButtonText(): string {\n    return this.buttonText.textContent || ''\n  }\n\n  setCurrentButtonText(text: string): void {\n    this.buttonText.textContent = text\n  }\n\n  setState(state: State): void {\n    // Reset to defaults\n    const retryMessage = this.button.getAttribute('data-retry-message') || this.originalButtonText\n    const buttonText = this.hasErrored ? retryMessage : this.originalButtonText\n    this.setCurrentButtonText(buttonText)\n    this.button.disabled = false\n    this.button.hidden = false\n    this.errorText.textContent = ''\n    for (const elem of this.messages) {\n      elem.hidden = true\n    }\n\n    switch (state) {\n      case State.Initializing:\n        this.button.disabled = true\n        break\n      case State.Unsupported:\n        this.button.disabled = true\n        this.unsupportedMessage.hidden = false\n        // hide the passkey specific error if we're showing the generic one\n        if (this.passkeysUnsupportedMessage) {\n          this.passkeysUnsupportedMessage.hidden = true\n        }\n        break\n      case State.Ready:\n        break\n      case State.Waiting:\n        this.waitingMessage.hidden = false\n        this.button.hidden = true\n        break\n      case State.Error:\n        this.errorMessage.hidden = false\n        this.errorText.textContent = this.originalErrorText\n        break\n      case State.Submitting:\n        this.setCurrentButtonText('Verifying')\n        this.button.disabled = true\n        break\n      default:\n        throw new Error('invalid state')\n    }\n\n    this.state = state\n  }\n\n  // silent_unless_success: don't show waiting or error status. This is for automatically attempting a prompt at\n  // page/modal load time, without showing confusing UI if the browser rejects the attempt due to a missing user\n  // gesture. Most browsers allow at least one such prompt per page load, but we can't rely on it. In theory we could\n  // try to show an error to the user depending on the `get` rejection, but the spec is still in flux and browsers\n  // constantly change their mind (and have bugs). So we err on the side of not showing an error.\n  async prompt(event?: Event, silent_unless_success?: boolean): Promise<void> {\n    event?.preventDefault() // prevent default page form submission\n    this.dispatchEvent(new CustomEvent(webauthnGetEvent))\n    try {\n      if (!silent_unless_success) {\n        this.setState(State.Waiting)\n      }\n\n      const json: CredentialRequestOptionsJSON = JSON.parse(this.dataJson)\n      const signResponse = await get(parseRequestOptionsFromJSON(json))\n      this.setState(State.Submitting)\n\n      // Each `<webauthn-get>` element is currently embedded in a form (not\n      // the other way around), so we have to query for the form outside of it.\n      const form = this.closest<HTMLFormElement>('.js-webauthn-form')!\n      const responseField = form.querySelector<HTMLInputElement>('.js-webauthn-response')!\n      responseField.value = JSON.stringify(signResponse)\n      requestSubmit(form)\n    } catch (error) {\n      if (!silent_unless_success) {\n        this.hasErrored = true\n        this.setState(State.Error)\n        throw error\n      }\n    }\n  }\n}\n","import {supported as webauthnSupported} from '@github/webauthn-json/browser-ponyfill'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n"],"names":["resultsTimeout","currentTarget","deactivateTimer","activeSelection","previousSelection","visibilityDebounceTimeout","fetchResponse","queued","hovercardsEnabledForUser","hovercardAnnouncementEnabledForUser","hovercardFocusTrapAbortController","selector","on","event","target","defaultPrevented","classList","add","remove","remoteForm","form","wants","response","container","closest","html","err","status","replaceWith","fire","getItem","safeStorage","ssrSafeDocument","head","querySelector","content","analyticsEvent","element","getAttribute","analyticsEventAttributes","JSON","parse","sendEvent","map","state","join","observe","el","HTMLImageElement","parentElement","HTMLAnchorElement","parent","link","childElementCount","setAttribute","removeAttribute","clone","cloneNode","document","createElement","appendChild","replaceChild","sendStats","incrementKey","requestUrl","window","location","href","notes","WeakMap","reset","input","note","get","innerHTML","tagName","validate","htmlValidate","id","contains","generateId","Math","random","toFixed","ariaDescribedby","addEventListener","set","detail","message","text","HTMLElement","announceFromElement","isOk","append","hidden","activeElement","error","value","successMessage","toggleSubmitButton","completer","button","HTMLButtonElement","disabled","constructor","AutocompleteElement","initialize","previousController","HTMLFormElement","preventDefault","abort","url","URL","action","origin","method","formData","FormData","serialized","combineGetFormSearchParams","body","search","signal","AbortController","request","Request","toString","headers","Accept","fetch","ok","aborted","resultsContainer","getElementById","oldHeight","style","height","getComputedStyle","textContent","undefined","clearTimeout","delayResults","hasAttribute","results","resultsContent","parseHTML","firstElementChild","setTimeout","requestAnimationFrame","replaceState","onFocus","microtask","select","submit","HTMLInputElement","HTMLSelectElement","requestSubmit","debouncedSubmit","debounce","detectGravatar","gravitarUrl","fetchGravatarInfo","gravatarText","data","json","has_gravatar","subscribe","fromEvent","priceSelectors","updateTotals","itemKey","itemRawCount","params","URLSearchParams","slice","itemMinimum","parseInt","itemMaximum","itemCount","itemDelta","max","contactUs","downgradeButton","downgradeDisabledMessage","contact","toggle","planCost","paymentSummary","includes","billing","free","is_enterprise_cloud_trial","upgrade","downgrade","extraSeats","no_additional_seats","updateSeatFields","numberOfSeats","querySelectorAll","maxSeatForPlan","popover","parentNode","length","minimumSeatsTooltip","seats","ref","selectors","obj","isPriceSelector","priceCurrencyTag","default_currency","local_currency","history","className","price","span","flipTooltip","inverse","key","Object","entries","from","to","replace","newDuration","seatsField","updateDurationFields","oldDuration","planDurationText","planDurationAdjective","durationLink","planDurationInput","updateSeatFieldURLs","delete","toggleDurationUnitPrices","unitPrice","softNavigate","visible","addThrottledInputEventListener","addonField","selectedRadio","newUrl","capture","onInput","query","toLowerCase","row","trackingData","parsedTrackingData","type","context","currentSelection","item","label","open","updateBulkActions","actionsContainer","isItemSelected","bulkUrl","name","checkedItems","Array","sort","a","b","toggleMembershipTabs","membershipTabs","checked","setLocalJSON","localStorage","setItem","stringify","kind","e","report","urls","gatherBundleURLs","script","getElementsByTagName","match","src","read","getLocalJSON","previousURLs","downloadedBundles","keys","filter","bundle","write","cancelEvent","stopPropagation","loaded","requestIdleCallback","JustLoggedOutCookieName","getCookies","clearData","storage","sessionStorage","clear","deleteCookie","timerCallback","clipboardCopyElementTimers","toggleCopyButton","copyIcon","checkIcon","clipboardCopyElement","originalLabel","direction","announceSelector","announceElement","isFeatureEnabled","Element","prototype","ariaNotify","interrupt","priority","currentTimeout","clearFormError","formError","reportError","handleFormError","messageSuffix","errors","isArray","formGroupValidationFormWrapper","field","changeValue","writeTab","isInViewport","rect","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","click","updateContent","replaceContent","console","warn","setButtonText","hasValue","textTarget","spanText","createInputHandler","previousHasValue","newValue","trim","Boolean","toggleFocus","focused","blurred","commentField","handleInput","removeEventListener","once","inputCache","CaretPosition","coords","currentChar","lookBack","textArea","substring","index","checkLine","y","xDistance","x","abs","fetchCaretCoords","caretIndex","caretCache","has","Map","getCaretCoordinates","binaryCursorSearch","lower","upper","mouseX","mouseY","iterations","bestPosition","sameLineCandidates","candidates","c","mid","floor","midCoords","findCursorPosition","endIndex","uploadedItems","unsubscribe","pasteUrlLinksAsPlainText","defaultPlainTextPaste","urlLinks","attachmentPlaceholders","isVideo","attachment","file","placeholderText","prefix","isImage","disableSubmit","closestForm","submitButton","enableSubmit","onUploadCompleted","setValidityAndLinkText","imageTag","size","findAndReplacePlaceholders","placeholder","tagText","replaceText","dimensions","imageSize","alt","parameterizeName","markdownImageTag","getImageSizeFromFile","width","ppi","replacementText","removeFailedUpload","textToRemove","setCustomValidity","editor","getEditor","emitToCodeMirror","cursor","getSearchCursor","findNext","validity","fileUploadLoadingText","batch","selectedText","selectionStart","selectionEnd","insertedPlaceholder","replaceSelection","insertText","appendNewline","isFinished","getSelection","getCursor","toReplace","replaceRange","fileUploadMessage","uploaded","codeEditorElement","codeEditor","getCodeEditor","updateCursor","attachmentElement","updateCaret","dragEvent","clientX","clientY","scrollTop","setCursorPosition","textarea","newPosition","setSelectionRange","coordsChar","pageX","pageY","setCursor","focus","activateTab","tab","isPreview","writeContent","previewBody","minHeight","currentSelectedTabs","fetchPreview","previewForm","path","lineNumber","startLineNumber","side","startSide","startCommitOid","endCommitOid","baseCommitOid","commentId","token","dataToken","formTokenRef","elements","namedItem","cachedFetch","commentForm","TabContainerElement","pollForm","toolbar","renderPreview","relatedTarget","isPreviewPanel","memoize","uncachedFetch","hash","commentBody","onKey","ctrlKey","metaKey","shiftKey","toUpperCase","blur","dispatchEvent","CustomEvent","bubbles","cancelable","stopImmediatePropagation","plusOneMarker","isReactionLikeComment","matched","line","split","l","startsWith","test","toggleReactionSuggestion","eventTarget","reactionSuggestion","suggestionText","clearReactionSuggestion","suggestion","newCommentTextField","isShortcutAllowed","originalEvent","hotkey","corpTOSLink","regTOSLink","hints","hint","wording","autoselect","planChoice","corpTos","currentlyOpenedDetailsDropdown","autofocus","summary","closeCurrentDetailsDropdown","compose","loadDeferredContentByEvent","details","hashChange","node","menu","resetMenus","firstItem","filterableField","syncInputValue","HTMLTextAreaElement","fireMenuToggleEvent","isOpen","RemoteInputElement","activeElementId","focusEl","atLimit","loader","load","dialog","ownerDocument","show","originalText","getButtons","flat","revert","checkValidity","disabledText","afterRemote","fetchFeaturePreviewIndicator","fetchIndicator","indicator","show_indicator","updateFaviconByHref","resetFavicon","syncFaviconToTheme","SOFT_NAV_STATE","SUCCESS","matchMedia","addListener","trigger","newDialog","fetchSafeDocumentFragment","dialogClass","closeDetails","closeHmac","hydroEventPayload","hydroEventHmac","feature","AttachmentUpload","process","delegate","startTime","performance","now","Headers","policy","header","xhr","XMLHttpRequest","upload_url","setRequestHeader","onloadstart","attachmentUploadDidStart","upload","onprogress","lengthComputable","percent","round","total","attachmentUploadDidProgress","uploadForm","same_origin","upload_authenticity_token","Promise","resolve","reject","onload","onerror","send","markComplete","attachmentUploadDidComplete","responseText","attachmentUploadDidError","uploadTiming","duration","endTime","fileType","success","asset_upload_url","asset_upload_authenticity_token","credentials","saving","resetState","result","saved","String","asset","setAttachmentAsFailed","policyErrorState","attachments","uploader","policyForm","repoId","subjectType","subject","container_type","container_id","directory","preprocess","all","messaging","trimSizeErrorMessage","code","possibleStates","Batch","sum","isSaved","every","failedAttachments","push","items","reduce","dragAndDropLabel","inputId","count","hasFile","transfer","types","indexOf","onDocumentDrop","dataTransfer","onDocumentDragover","onFormReset","filterList","list","isVisible","options","limit","Infinity","children","display","filterElement","announceOptions","ariaLiveRegionId","ariaLiveRegion","announce","resetFilter","filterInput","panel","FilterInputElement","originalOrder","filterSortList","string","allItems","checkedInputBeforeFilter","currentItem","removeChild","found","filterSort","sortKey","compare","limited","createDocumentFragment","inputStateReset","checkedInput","Event","abortController","typeAheadCache","cache","currentQueryForList","getData","queryText","typeAhead","lastSearchResult","suggestions","users","cachedSuggestions","userResultCache","fetchQueryIfNeeded","getPreRenderedUsers","suggestedUsers","suggestedUser","login","selected","typeAheadData","pathname","trimmedText","lastSearchText","isInitialLoad","inputElement","requestHeaders","searchParams","substringMemoryFilterList","verifySsoSession","showSuggestionsHeaderOnLoad","template","existingElements","existing","cutoffPoint","nextElementSibling","queryTextEmpty","suggestionsDivider","restDivider","addItem","user","containsQueryText","matching","createReviewerItem","li","inputKey","fullName","description","avatar","copilotAvatar","class","anyVisibleNonSelectedSuggestions","selectedSuggestions","u","nonSelectedSuggestions","preSuggestionsVisibleCount","preUsersVisibleCount","labelsTypeaheadFilterList","labels","toLocaleLowerCase","createLabelItem","resultCache","labelResultCache","color","newStyle","htmlName","labelDescription","getPreRenderedLabels","renderedLabel","queryString","searchQuery","prioText","prioScore","fuzzyScore","score","autocomplete","throttleWaitInMs","onInputChange","wait","removeThrottledInputEventListener","inputField","toggleForm","filterText","itemExists","scrollTargetIntoViewIfNeeded","root","computeFixedYOffset","scrollToFragmentTarget","focusPreviousElementInDOM","visibleElements","offsetWidth","offsetHeight","offsetParent","visibility","indexOfElement","targetElement","elementBefore","flash","flashAlertContent","insertNonBreakingSpace","nonBreakingSpace","createTextNode","ALLOWED_FLASH_COOKIES","HTMLTemplateElement","displayFlash","flatMap","atob","decodeURIComponent","after","TemplateInstance","feedback","noticeHandler","FuzzyListElement","ariaLiveElement","chooseEvents","eventCheckbox","matches","fuzzyList","replyContainer","checkUrl","sslFields","protocol","checkbox","customIsSelected","hookEventsField","hookEventSelector","hookEventSelectorCollection","getElementsByClassName","hookWildcardEvent","wrapper","before","deliveriesDetails","registerInsecureSslVerificationDialog","disallowInsecureRadio","allowInsecureRadio","HTMLDialogElement","showModal","areCharacterKeyShortcutsEnabled","install","shortcut","validShortcuts","shortcuts","splitHotkeyString","isNonCharacterKeyShortcut","s","uninstall","isHovercardEnabledForUser","hovercardsPreference","isHovercardAccessibilityEnabled","isHovercardAccessibilityHintEnabled","cardContentContainer","cachedFetchSafeDocumentFragment","activatingElement","hovercardTrigger","focusIn","mouseOver","contentClass","suffix","contentClassPrefix","hideCard","cardContent","activateFn","minimumTimeout","fragment","MouseEvent","hovercardsAreEnabledForType","hovercardType","hovercardUrl","hovercardUrlFromTarget","baseHovercardUrl","subjectTag","determineEnclosingSubject","tag","meta","forcedDelay","r","showCard","cardContentBody","child","positionCard","containerTop","containerLeft","contentClassSuffix","calculatePositions","contentWidth","contentHeight","targetX","targetY","targetHeight","targetWidth","selectRectNearestMouse","rects","getClientRects","foundRect","roomBelowTarget","roomAbove","roomBelow","moreRoomAbove","targetCenterY","caretPaddingX","caretHeight","roomRight","targetCenterX","setProperty","pageYOffset","pageXOffset","setZIndexOverride","zIndex","trackingElement","trackView","hovercardAriaLabelForType","hovercardPrefix","focusTrap","deactivateFn","KeyboardEvent","preventScrolling","altKey","keyupFn","cancelDeactivation","onContentsKeyDown","onFocusIn","onFocusOut","onMouseLeave","deactivateWithTimeoutFn","targetWas","onMouseOver","onContentsMouseOver","onContentsFocusIn","isHovercardHintEnabledForUser","hovercardHintPreference","getContext","reactAppName","getCurrentReactAppName","react_app","FRAME_UPDATE","sendPageView","turbo","getSoftNavMechanism","targetEl","eventType","parts","gaEvent","category","dimensionPair","payload","hmac","hydroClientContext","sendData","indeterminate","shortcutModalShown","showKeyboardShortcuts","contexts","metaKeyboardShortcuts","shortcutModal","labelledBy","displayLengthWarning","maxLength","warningLength","inputValueWithNewLinesFix","inputValue","remainingLength","truncatedInputValue","substr","endsWith","warningText","warningArea","inputContainer","Node","isFormField","eventToHotkeyString","navigator","userAgent","filterOn","currentValue","regex","currentFilters","notice","showGlobalError","opacity","confirm","buttonLabelSpan","lastTurboRequestUrl","turboMeasure","turboStartMark","turboEndMark","trackTurboTiming","getEntriesByName","mark","measure","measures","pop","turboDuration","clearMarks","clearMeasures","print","close","reload","quickSubmit","altButton","isHighlightContainer","nodeName","filters","PRE","flavor","A","IMG","DIV","p","blockType","blockContent","pre","isTrusted","quote","Quote","range","collapsed","startContainer","commentBodyClone","quoteSelectionContainer","MarkdownQuote","codeBlock","pp","div","insertMarkdownSyntax","nodeIterator","createNodeIterator","NodeFilter","SHOW_ELEMENT","acceptNode","firstChild","FILTER_ACCEPT","FILTER_SKIP","nextNode","reverse","anchorNode","insert","selection","getRangeAt","resizeObserver","ResizeObserver","entry","contentRect","hideReactionOverflow","reactionContainer","availableWidth","reactionButtons","allReactionsPopover","totalButtonWidth","remainingWidth","buttonWidth","debouncedPickReaction","comment","reactionsContainer","reactionsHeader","newReactions","newReactionButton","elementToFocus","showReactionContent","hideReactionContent","defaultText","persistSubmitButtonValue","req","catch","then","statusText","findPersistedSubmitButtonValue","beforeRemote","verifySso","contents","childNodes","PerformanceObserver","supportedEntryTypes","observer","longTasks","getEntries","entryTypes","ModalDialogElement","savedReplyNumber","Number","reply","replies","ready","MutationObserver","mutationList","mutation","attributeName","oldValue","attributes","highlightRange","blobRange","snippet","adjustStart","adjustEnd","DOMRangeFromBlob","adjustedStart","GetCharIndexFromBytePosition","startOffset","setStart","adjustedEnd","endContainer","endOffset","setEnd","surroundContents","parseColumnHighlightRange","startLine","endLine","startColumn","dataEndColumn","start","column","end","highlightColumns","i","performRequest","removeNotificationParams","urlWithoutNotificationParameters","cleanSearchParams","storeAndStripShelfParams","markNotificationAsRead","toggleSearchScope","enabled","remoteShelfActionForm","inboxButton","updateNotificationStates","getStoredShelfParamsForCurrentPage","newParams","emptyQuery","blurHandler","isRegularSearchInput","toggleSearchInputHotkey","unobserve","searchBar","toggleAttribute","searchInput","CSS","supports","anchor","findFragmentTarget","originalScroll","scrollBehavior","scrollIntoView","behavior","prefersReducedMotion","abortControllers","snippetClipboardCopyTemplate","snippetClipboardCopyTemplateUnpositioned","insertSnippetClipboardCopyButton","clipboardContent","useUnpositioned","clonedZeroClipboardContainer","documentFragment","scrollableElement","timer","handleSocialResponse","newCount","isDeferredTogglerTarget","updateSocialCounts","singularSuffix","pluralSuffix","controller","replaceIncomingFocus","focusOn","checkVisibility","confirmationDialog","dialogPayload","confirmationDialogTemplate","templateSelector","confirmCsrfToken","confirmUrl","inputs","dialogElement","idleListeners","idle","isPresent","sessionChanged","reason","flashSignedIn","flashSignedOut","flashSwitched","switchedDetail","originalUserId","pageIsHidden","idleListener","watchSocketChannels","session","getSession","queueSubscribe","taskQueue","subs","queueUnsubscribe","els","unsubscribeAll","queueMetadata","updates","updatePresenceMetadata","listener","elementSubscriptions","channels","Topic","subscriber","topic","presenceChannels","subscription","channelName","isPresenceChannel","listenerSubscription","latestIdle","latestMetadata","queueMetadataOrIdleChange","metadata","IDLE_METADATA_KEY","Subscription","splice","bc","BroadcastChannel","onmessage","postingMessage","postMessage","storageArea","removeItem","broadcastMsgOnSignOut","updateStatusPosition","containerHeight","menuRect","iconRect","loadStatus","loadingArea","errorArea","onMouseEnter","closeOnToggle","closeStatusPopover","closeOnScroll","scrollEvent","intersectionObserver","IntersectionObserver","records","record","intersectionRatio","doc","intersectionRect","threshold","checkSudo","sudoRequired","sudo","onvalue","getValue","emojiEl","onchange","provide","emojiMenu","onactivate","expander","showPopover","cachedEmoji","emojiScore","aliases","emojiText","fetchEmoji","searchWithin","re","hashedScore","issueNumberScore","number","title","icons","renderResults","issues","render","icon","unsafeHTML","hideSuggestions","issueMenu","textExpander","dismiss","onclick","onkeydown","specialKeys","searchResults","queryResults","subscriptions","queriesInProgress","Set","queryCache","basicResults","cachedJSON","basicSearchResults","isFinite","refinedResults","refinedPromise","refinedQuery","refinedQueryUrl","jsonRequest","overage","liveSuggestions","liveQuery","selectedID","selectedElement","replaceChildren","self","responseError","mentionMenu","usersAndTeams","scorer","fuzzyScorer","queryChars","participant","shortestMatch","indexes","j","len","starts","allIndexesOf","char","results1","indexesOfChars","chars","startingIndex","desc","hiddenInput","question","includeFragment","members","mentions","tip","sentence","xs","Intl","lists","ListFormat","format","last","concat","addTimelineLastModifiedHeader","isCrossDomain","requestURL","host","lastModified","getTimelineLastModified","marker","scrollToFocusTimelineEvent","urlAnchor","focusElement","focusOrLoadElement","shouldLoadElement","loadResolvedComments","commentContainer","findCommentContainer","loadDeferredContent","loadHiddenComments","loadElement","threadCommentIds","commentIds","anchorCommentId","videosReady","v","readyState","HAVE_METADATA","timeout","done","imagesReady","complete","mediaLoaded","expandDetailsIfPresent","detailsContainer","isDetailsTargetExpanded","toggleDetailsTarget","newTimelineItem","gid","currentTimelineItem","unregisterAllServiceWorkers","registrations","serviceWorker","getRegistrations","registration","unregister","preservePosition","highlightedElement","existingTimelineItems","WeakSet","setExistingTimelineItems","serviceWorkerPath","register","scope","setProgressBarDelay","isVisitable","originalTrackedElementsAreIdentical","getOwnPropertyDescriptor","PageRenderer","getSnapshotSignatures","snapshot","values","detailsByOuterHTML","tracked","HTMLMetaElement","defineProperty","reloadReason","call","currentTracked","fromEntries","currentHeadSnapshot","changedKeys","newHeadSnapshot","formatKeyToError","patchHistoryApi","oldHistory","unused","skipTurbo","usr","update","turboState","turboUnused","turboUrl","currentTurboCount","turboCount","mergedState","restorationIdentifier","adapter","beginProgressBar","progressBar","setValue","completeProgressBar","hide","turboPageNodes","turboDocumentAttributes","getCachedNode","setCachedNode","setDocumentAttributesCache","getDocumentAttributes","getCachedAttributes","getTurboCacheNodes","responseFailed","errorDocument","ssrSafeWindow","inSoftNav","isHashNavigation","startSoftNav","unloadMessage","onbeforeunload","Error","frame","isTurboFrame","ev","fetchOptions","controllerPrototype","getPrototypeOf","originalRequestErrored","requestErrored","apply","fetchRequest","statusCode","dispatchTurboReload","navigateWithReact","responseHTML","DOMParser","parseFromString","customDriveRender","waitForStylesheets","resume","replaceElementAttributes","newBody","replaceSoftNavMechanism","nextEventLoopTick","currentBody","newScript","copyScriptTag","currentTurboBody","newTurboBody","currentDocument","cachedAttributes","attr","find","cached","nodeValue","frameNavigation","navigatingBetweenDifferentEntities","frameContainer","repoContainer","userProfileContainer","isSameRepo","isSameProfile","newFrame","responseLocation","parsedHTML","sourceFrame","matchingFrame","getChangedTrackedKeys","addNewStylesheets","addNewScripts","replaceElements","replaceFrameClasses","shouldScrollToTop","scrollTo","replaceTransientTags","replaceBodyClassesFromRequest","replacedElements","dispatchTurboRestored","replaceBodyClassesFromCachedNodes","replaceTitle","updateFrame","classes","bodyClasses","setTitle","transients","oldFrame","setSoftNavMechanism","renderedSoftNav","skipIfGoingToReactApp","allowedMechanisms","succeedSoftNav","markTurboHasLoaded","isHardLoad","timing","hasSoftNavFailure","failSoftNav","initSoftNav","endSoftNav","setSoftNavFailReason","END","PROGRESS_BAR","START","timezone","DateTimeFormat","resolvedOptions","timeZone","setCookie","encodeURIComponent","SudoCredentialOptionsElementState","SudoCredentialOptionsElement","connectedCallback","initialState","reRenderPrompt","initialLoad","resetPrompt","renderWebauthnOption","renderGitHubMobileOption","renderTotpAppOption","renderTotpSmsOption","renderPasswordOption","reRenderNavContainer","handleUnexpectedPromptError","unexpectedError","errorMessage","githubMobileGenericErrorMessage","smsGenericErrorMessage","genericErrorMessage","renderPasswordOptionWithError","showPassword","showErrorMessage","hideErrorMessage","isWebAuthnAvailable","hideWebAuthn","isGitHubMobileAvailable","hideGitHubMobile","isTotpAppAvailable","hideTotpApp","isTotpSmsAvailable","hideTotpSms","hidePassword","safeSetElementVisibility","webauthnContainer","webauthnNav","githubMobileContainer","githubMobileNav","githubMobileLoading","githubMobileLanding","totpAppContainer","totpAppNav","totpSmsContainer","totpSmsLanding","totpSmsNav","totpSmsResendNav","passwordContainer","passwordNav","webauthnGet","setState","supported","State","Ready","Unsupported","resetGitHubMobilePrompt","initiateGitHubMobileAuthRequest","initiateTotpSmsRequest","loginField","passwordField","hasMultipleOptions","webauthnAvailable","githubMobileAvailable","totpAppAvailable","totpSmsAvailable","showWebauthn","showGitHubMobile","showTotpApp","showTotpSms","githubMobileRetry","githubMobilePromptUrl","csrfToken","mobileFailHandler","hasChallenge","challenge","githubMobileNoChallengeMessage","githubMobileChallengeMessage","githubMobileChallengeValue","initializeMobileAuthRequestStatusPoll","mobileApprovedHandler","mobileCancelCheck","resendTotpSms","smsSending","isResend","totpSmsTriggerUrl","smsSuccess","responseJson","showGitHubMobileErrorState","elem","flashErrorMessageText","flashErrorMessageContainer","attrPrefix","unreadCount","isIntersecting","clearUnread","rootMargin","markThreadAsRead","hasFocus","unreadCounter","titleRe","updateTitle","handleSocketMessage","makeSocketMessageHandler","reapplyPreviouslyUpdatedContent","staleRecords","urlTarget","registerStaleRecords","orgId","ownerType","ownerId","detailsClass","cropForm","hashchange","getUserContentScrolling","decodeFragmentValue","normalizedHash","findElementByFragmentName","resetValidation","formGroup","group","clearErrorsFromInput","requestMenuBatchRender","batchUpdateUrl","repositoryIds","postData","repositoryId","updatedMenuContents","updateAllUserListMenus","roots","rootsByRepositoryId","groupRootsByRepositoryId","existingRoots","renderedMenuContents","replaceUserListMenuRoots","updatedMenu","matchingRoots","prepareUnsavedChangesWarning","hasDirtyFields","enableSaveChangesReminder","returnValue","disableSaveChangesReminder","disableSaveChangesReminderOnClosedDialogs","promptOnDialogClosing","confirmed","onTransitionEnd","issueLabel","isHovercardEnabled","titleUrl","setLabel","originalButtonText","setFlashError","responseBody","targetUrlElement","DocumentFragment","detailsElement","HTMLDetailsElement","triggerText","didStar","togglerContainer","starCount","socialContainer","menuContentRoot","defaultChecked","didCreate","templateID","editDialog","userListMenuRoot","placeholderName","userListMenuDetailsElement","userListMenuForm","requestUserListMenuFormSubmit","promise","formEvent","urlTargetElement","randomRGBColor","setColorSwatch","colorButton","rgb","hsl","convert","setInputColorFromButton","clickedButton","colorInput","hex","showOrHideLabelError","errorSelector","errorMessages","errorEl","showLabelErrors","hideLabelErrors","updateLabelPreview","startEl","previewContainer","fullErrorMessageEl","labelID","previewArea","nameInput","labelColorFrom","labelDescriptionFrom","descriptionInput","labelPreviewUrl","baseUrl","toggleBlankSlate","updateCount","delta","counter","oldCount","initLabelModal","modal","labelNameInput","labelName","labelNameEl","updateInputRemainingCharacters","addLabelButton","newLabelName","matchingExistingLabel","swatchesContainer","swatchButton","menuContent","prepend","defaultValue","resetCharactersRemainingCounts","editForm","labelPreview","labelLink","delayedOnLabelFormInputChange","toggleEventSettings","eventSettingsVisible","noEventSelected","eventSettingsContainer","getUtf8StringLength","CollapsibleSidebarWidgetElement","activeClass","loadingClass","onKeyDown","onMouseDown","pendingRequest","collapsible","setClose","setOpen","setLoading","updateCollapsible","handleAbort","SidebarMemexInputElement","isDisabled","hasErrored","hasExpanded","handleSelectMenuToggle","disconnectedCallback","handleDetailsSelect","custom","opened","updateCell","handleDetailsSelected","mouseDownFocus","keyDownFocus","onSelectMenuOpen","mouseDownFocusHeader","onChange","onBlur","instrumentType","parameters","formatted","Date","updateUrl","commit","columnId","parseAndFormatUpdate","month","day","year","submitForm","skipTeamsCheck","reviewerTeamsCheckRequired","previouslyRequestedTeams","newlySelectedTeams","allSelectedTeams","scopedFormData","getAll","team","triggerTeamReviewerCheck","previewSubmit","submitOnMenuClose","returnFocusToTrigger","menuTriggerId","currentSidebarTriggerEl","multiple","currentSidebarItemEl","currentSidebarDetailsId","hasFired","restoreCachedValues","cacheKey","formName","newInput","requestPreview","isSubmitting","cacheValuesOnHide","cacheValues","updated","datum","extra","mode","updateSidebar","reviewerCheckUrl","dialogHtml","showTeamReviewerConfirmationDialog","dialogAction","reviewerInput","findParam","getCacheKey","pageId","getPageID","updateProjectColumnMenuSummary","dropdown","columnName","moveUrl","cardId","unarchiveItemUrl","projectItemID","SOFT_NAV_EXTERNAL_EVENTS","freeze","INITIAL","ERROR","RENDER","isReactLazyPayload","isReactAlternate","hasFetchedGQL","getEntriesByType","some","initiatorType","hasFetchedJS","BUCKETS","xlg","lg","md","sm","getCPUBucket","concurrency","hardwareConcurrency","bucket","min","scheduleSend","stringifyObjectValues","appName","renderIsSSR","wasServerRendered","renderIsLazy","renderIsAlternate","sendSoftVitals","metric","navigationType","sendVitals","experimentalSoftNav","opts","stat","cpu","networkConnType","connection","effectiveType","mechanism","MECHANISM_MAPPING","getLatestMechanism","soft","ssr","lazy","alternate","hpcFound","hpcGqlFetched","gqlFetched","hpcJsFetched","jsFetched","headerRedesign","app","synthetic","webVitalTimings","sendStatToHydro","hydroStat","reactApp","react","reactPartials","partial","routePattern","attribution","buildWebVitalInformation","vitalInformation","largestShiftTarget","updateStaffBar","staffBarContainer","metricContainer","toPrecision","sendTimingResults","sendResourceTimings","sendNavigationTimings","resourceTimings","entryType","nextHopProtocol","workerStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize","navigationTimings","activationStart","unloadEventStart","unloadEventEnd","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","redirectCount","getName","nodeType","getSelector","maxLen","sel","part","HPCTimingEvent","HPCDomInsertionEvent","getAppName","setLCPasHPC","onLCP","HPCObserver","connect","hpcElement","insertionFound","setupListeners","hpcDOMInsertionObserver","buildMutationObserver","childList","subtree","disconnect","cleanupListeners","mutations","hasDataHPC","visibleElement","insertionElement","addedNodes","animationFrame","cancelAnimationFrame","reportHPC","insertionEvent","hpcTarget","timingEvent","hpcStart","dataHPCanimationFrame","stop","listenerOpts","onVisibilityChange","onSoftNavRender","onDOMInsertion","onHPCTiming","onAbort","latestHPCElement","tabHidden","EventTarget","emulatedHPCTimer","currentHPCElement","passive","InteractionCountObserver","interactionCount","interactionCountEstimate","teardown","takeRecords","updateEstimate","buffered","durationThreshold","minKnownInteractionId","maxKnownInteractionId","interactionId","InteractionList","shortestInteraction","interactions","interactionsMap","interaction","newLatency","latency","maxSize","findEntry","prevEntry","estimateP98","numOfPageInteractions","candidateInteractionIndex","INPMetric","firstEntryWithTarget","InteractionProcessor","inp","interactionCountObserver","processEntries","processEntry","existingInteraction","supportsINP","PerformanceEventTiming","INPObserver","onHiddenOrPageHide","visibilityState","interactionProcessor","cb","setupWebVitals","onCLS","onFCP","onFID","onTTFB","reportSoftNavs","inpObserver","hpcObserver","REPLACE_MECHANISM","AutoFlushingQueue","flush","onFlush","callback","callbacks","elementsToFlush","BatchLoader","loadInBatch","autoFlushingQueue","elementsByKey","batchElement","consolidatedData","validator","BaseBatchDeferredContentElement","batchLoader","batchLoaders","batchDeferredContentLoaders","BatchDeferredContentElement","docFragment","getFieldLimit","hasExceededCharacterLimit","remainingCount","showRemainingCharacterCount","remainingEl","charContainer","onDragstart","onDragend","onDragenter","onBodyDragleave","onDrop","dragging","ignorePageElementDrag","dropEffect","encrypt","publicKey","messageBytes","encoder","TextEncoder","encode","seal","decode","encoded","bytes","charCodeAt","Uint8Array","str","byte","fromCharCode","btoa","submitBulk","disableEmptyValues","formElement","required","encryptedValueElementName","plainText","asyncCalculateVisibility","nav","calculateVisibility","overflowContainer","overflowOffset","positionedOffset","anyHidden","itemOffset","toggleItem","itemName","itemToHide","safeLocalStorage","ttl","throwQuotaErrorsOnSet","sendCacheStats","restoreFieldsFromAllBackends","restoreResumableFields","persistFieldstoAllBackends","persistResumableFields","debouncedRestoreResumableFields","setForm","updateSelectedRepoTab","isSelected","selectedLink","TagInput","setup","removeTag","selectTag","autoComplete","bind","onSubmit","inputWrap","onBackspace","taggifyValueWhenSuggesterHidden","taggifyValue","tags","normalizeTag","selections","selectedTags","tagsAdded","templateTag","inputTag","tagTemplate","sanitizedText","multiTagInput","lastSelection","supportsUserSelectContain","cssText","getPropertyValue","rangeCount","commonAncestorContainer","selectAllChildren","parseBlobRange","lines","offset","parseBlobOffset","ascendingBlobRange","formatBlobRange","parseFileAnchor","anchorPrefix","parseAnchorPrefix","formatBlobRangeAnchor","lineMatch","columnMatch","getLineElement","_startOffset","findRangeOffset","_endOffset","createRange","lookAhead","lineElement","textNodes","getAllTextNodes","TEXT_NODE","textNode","nextC","nextTextNode","offsets","compareBlobOffsets","codeEditors","getAsyncCodeEditor","onEditorFromEvent","getScore","minScore","hasMatch","highlightElement","lastPosition","positions","sorting","states","textCache","getTextCache","inputEl","handler","HTMLLIElement","lazyItems","addLazyItems","dataset","oldSortAbort","sortAbort","markSelector","maxMatches","shouldMark","itemsToRender","nextBatch","itemToRender","buttons","emptyEl","isNaN","targetId","observedAttributes","attributeChangedCallback","customElements","define","visitorPayload","visitorHmac","sendHydroEvent","shelfParams","sessionStorageKey","storeShelfParams","pullRequestPathname","getCurrentPullRequestPathname","deleteShelfParams","currentPullRequestPathname","stored","notification","toggleNotificationSubscriptionStatus","toggleNotificationStarredStatus","newNode","extractContents","insertNode","metaTag","flashClassName","removeFlash","flashContainer","hidePromptAndShowErrorMessage","githubMobileAuthenticatePrompt","githubMobileAuthenticateErrorAndRetry","genericHandler","addFlashMessage","importNode","getErrorAndRetryMessage","successCallback","failCallback","checkCancelCallback","poll","errorCount","csrfInput","responseJSON","assign","smsError","pane1","pane2","pane","pattern","currentButton","noteContainer","newContent","throttledInputEvents","schedule","events","inputed","onKeydownInput","keypressed","onKeyupInput","onInputInput","dispatchThrottledInputEvent","BatchedUpdatableContent","onEvent","windowSize","updaterFunction","config","intervals","interval","targets","setInterval","onInterval","hasOwnProperty","clearInterval","batcher","event_updates","findByGid","batched","eventName","sessionPromise","AliveSession","BaseAliveSession","getUrlFromRefreshUrl","fetchRefreshUrl","refreshUrl","shared","notify","fetchJSON","post","csrf","subscribers","channel","AliveSessionProxy","added","worker","port","addedChannels","redundantPresenceChannels","redundantChannels","requestPresence","removed","drain","updatedPresenceChannels","presenceMetadata","removeSubscribers","sendPresenceMetadataUpdate","metadataUpdates","updatedChannels","setMetadata","channelNames","updatesForSharedWorker","getChannelMetadata","online","offline","hangup","receive","debouncedNotify","notifyPresenceDebouncedByChannel","debouncedEvent","sessionId","notifier","SubscriptionSet","PresenceMetadataSet","SharedWorker","workerSrc","createSession","isSafari","connectWhenReady","allowUserContentScrolling","setUserContentScrolling","setting","editorTarget","innerEditorTarget","oldTitle","newTitle","ms","race","fn","queue","queueMicrotask","getFaviconElements","favicon","faviconFallback","newHref","colorSchemeSuffix","getColorSchemeSuffix","lastIndexOf","newFallbackHref","n","newFaviconName","updateFaviconByVariant","variant","variantSuffix","prefersDarkColorScheme","filterMap","prefixBonusWeight","stringScore","fuzzyHighlightElement","textRe","fuzzyRegexp","firstChar","m","clean","wordSeparators","originalString","abbreviation","stringLength","totalCharacterScore","shouldAwardCommonPrefixBonus","indexCLowercase","indexCUppercase","minIndex","indexInString","charAt","abbreviationLength","abbreviationScore","finalScore","OS","Android","iOS","macOS","Windows","Linux","Unknown","isMacOS","getOS","os","isMobileOS","platform","userAgentData","macosPlatforms","iosPlatforms","windowsPlatforms","mobile","isAndroid","isIOS","isWindows","isLinux","isDesktop","isMobile","keyboardShortcutsPreference","nonEditableInputTypes","allowCharacterKeyShortcuts","isEditableElement","isReadonly","ariaReadOnly","isContentEditable","hydroAnalyticsClient","dimensionPrefix","MARKETING_PARAMS","getOptionsFromMeta","baseContext","AnalyticsClient","extendBaseContext","app_id","event_url","visitorMeta","staff","isStaff","service","cleanContext","k","currentUrl","targetUrl","current","hasHash","PNGScanner","advance","pos","readInt","dataview","getUint8","getUint16","getUint32","readChar","readShort","readLong","readString","buf","scan","resumeAt","buffer","DataView","getSelectedLineRange","markdownComment","replaceAll","markdownLink","isModifierKey","getImageDimensions","scanner","imgData","inchesRatio","ppuX","ppuY","imgResult","reader","FileReader","readAsArrayBuffer","sudoPromptExist","loadPromptTemplate","urlWithParams","oldURL","newURL","webauthnSupportLevel","succeeded","sudoPrompt","prompt","sudoModalErrorOrClose","unauthorizedError","tooManyError","inputElementSelector","triggerSudoPrompt","accept","sudoResponse","fetchSessionInSudo","oldText","newText","isFocused","beginning","remaining","setTextareaValueAndCursor","point","insertedText","newline","newPoint","u8array","written","encodeInto","diff","DATA_TURBO_LOADED","hasTurboLoaded","url1","url2","path1","headStylesheets","loadedStylesheets","styleSheets","stylesheet","promises","waitForLoad","onComplete","cachedElements","newElements","oldElements","newElement","oldElement","executeScriptTag","WebauthnGetElement","getCurrentButtonText","originalErrorText","errorText","passkeySupport","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","passkeysUnsupportedMessage","subtleLogin","handleWebauthnSubtle","showWebauthnLoginFragment","subtle","updateWebauthnSubtleParentBoxVisibility","loginFragment","parentDiv","buttonText","setCurrentButtonText","retryMessage","messages","unsupportedMessage","waitingMessage","silent_unless_success","dataJson","signResponse","parseRequestOptionsFromJSON","responseField","webauthnSupported","iuvpaaSupportLevel"],"sourceRoot":""}